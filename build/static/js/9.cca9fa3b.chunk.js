(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{432:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAD4AAAA+CAYAAABzwahEAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMDY3IDc5LjE1Nzc0NywgMjAxNS8wMy8zMC0yMzo0MDo0MiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6QTNGN0U4RTM1QzQwMTFFOUFERkZBNkQ1NkUxQzk4RDkiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6QTNGN0U4RTI1QzQwMTFFOUFERkZBNkQ1NkUxQzk4RDkiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTUgKFdpbmRvd3MpIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6Mjk4RDI0MjE1QzA5MTFFOUIzOUFEMTA2MTBCNTlGQUYiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6Mjk4RDI0MjI1QzA5MTFFOUIzOUFEMTA2MTBCNTlGQUYiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz5aBO+DAAABSElEQVR42uTbSQ7DIAwF0Pqrx+ipe2FXkZpF1ckJnuAjJSsQfkIMASK3u14Ik4IRvb3AiGaDv/RpMKJZ4B9HbzCiV4f/nKfBiF4VblqRgRG9GvzQ2huM6FXgp76ywIieHT70PQ1G9Kxwl50TMKJng7vukYERPQs8ZDcUjOju8NB9bzCiu8JTTjjAiO4GTz3LAiO6C7zk1BKM6Gp46fk0GNFV8BY3EcCIzoa3unMCRnQWvAItz6cMXoUubfG26Eh4B3T6xYD26Ai4GgKUarQ3XA8EKJVoT7ieyCNVaC+4DuSVCrQHXB3KSDZ6FK6OZSUTPQLXgC4iWeizcM952ooX7xhQiLbiJSIGFKP/4SUqBjRAW1s+/WJA5tpbs2JAI/S3OkNiuDZDp9WNhuiUBEb0NnCCEP3W4ixo2Qc3pp9LxTKqLwne00OAAQA6hVn4c+aVigAAAABJRU5ErkJggg=="},433:function(e,t,n){e.exports=n.p+"static/media/banner.c86d7444.png"},560:function(e,t,n){"use strict";n.r(t);var a=n(125),r=n(408),i=n.n(r),c=n(409),o=n(60),l=n(61),s=n(64),u=n(62),d=n(63),p=n(123),h=n(0),m=n.n(h),b=n(406),v=n.n(b),f=n(120),g=n.n(f),I=n(407),y=n(122),k=n(124),x=n(404),A=n(431),S=n(410),O=n(403),E=n(413),N=n.n(E),T=n(437),j=n.n(T),w=n(438),C=n.n(w),U=n(439),G=n.n(U),M={6:j.a,7:C.a,8:G.a};function R(e){var t=e.id,n=e.currId,a=e.name,r=e.handleToggleType,i=N()({active:t===n});return m.a.createElement("li",{className:i,onClick:function(){return r(t)}},m.a.createElement("img",{className:"icon",src:M[t],alt:""}),a)}var z=function(e){var t=e.items,n=e.currId,a=e.handleToggleType;return m.a.createElement("ul",{className:"nav"},t.map(function(e){return m.a.createElement(R,{key:e.productClassifyId,currId:n,id:e.productClassifyId,name:e.productClassifyName,handleToggleType:a})}))};function Q(e){var t=e.id,n=e.productId,a=e.money,r=e.integral,i=e.handleSelect,c=N()("item__inner",{active:t===n});return m.a.createElement("div",{className:"item"},m.a.createElement("div",{className:c,onClick:i},m.a.createElement("div",{className:"item__money"},a,"\u5143"),m.a.createElement("div",{className:"item__integral"},r,"\u79ef\u5206")))}var B=function(e){var t=e.productId,n=e.items,a=e.handleSelect;return m.a.createElement("div",{className:"items"},n.map(function(e){var n=Number(e.productCostBalance)*Number(e.disCount);return m.a.createElement(Q,{key:e.productId,id:e.productId,productId:t,money:e.salesPrice,integral:n,handleSelect:function(){return a(e.productId,n)}})}))},Z=n(117),D=n(118),F=n(432),Y=n.n(F);function V(){var e=Object(Z.a)(["\n  header{\n    margin-bottom: 15px;\n    .nav-box{\n      position: relative;\n      margin: -70px 15px 0 15px;\n    }\n    .nav{\n      display: flex;\n      background: #fff;\n      border-radius: 3px;\n      box-shadow: 0 1px 3px rgba(26,26,26,.1);\n      li{\n        flex: 1;\n        position: relative;\n        text-align: center;\n        padding: 15px 0;\n        font-size: 15px;\n        &.active{\n          color: #1c92ff;\n          &:after{\n            content: '';\n            position: absolute;\n            left: 50%;\n            bottom: 3px;\n            transform: translate(-50%);\n            height: 2px;\n            width: 60px;\n            background: #1c92ff;\n          }\n        }\n        .icon{\n          display: block;\n          width: 35px;\n          margin: 0 auto 5px;\n        }\n      }\n    }\n  }\n  .main{\n    background: #fff;\n    .input-box{\n      padding: 15px;\n      background: #eaeaea;\n    }\n    .items{\n      display: flex;\n      flex-wrap: wrap;\n      margin: 0 10px;\n      .item{\n        width: 33.33%;\n        padding: 5px;\n        .item__inner{\n          position: relative;\n          text-align: center;\n          padding: 10px;\n          border-radius: 2px;\n          border: 1px solid #eaeaea;\n          &.active{\n            color: #3b8afc;\n            border-color: #3b8afc;\n            &:after{\n              content: '';\n              position: absolute;\n              bottom: 0;\n              right: 0;\n              background: url(",") center top no-repeat;\n              background-size: 100%;\n              width: 20px;\n              height: 20px;\n            }\n          }\n          &__money{\n            font-size: 16px;\n            font-weight: bold;\n            margin-bottom: 5px;\n          }\n          &__integral{\n            font-size: 12px;\n          }\n        }\n      }\n\n    }\n  }\n"]);return V=function(){return e},e}var W=D.b.div(V(),Y.a),J=n(433),P=n.n(J),H=v.a.CancelToken;function L(e){var t=e.loading,n=e.productId,a=e.items,r=e.handleSelect;return t?m.a.createElement(A.a,null):a.length?m.a.createElement(B,{productId:n,items:a,handleSelect:r}):m.a.createElement(S.a,null)}var _=function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(s.a)(this,Object(u.a)(t).call(this,e))).handleChange=n.handleChange.bind(Object(p.a)(Object(p.a)(n))),n.handleSubmit=n.handleSubmit.bind(Object(p.a)(Object(p.a)(n))),n.handleToggleType=n.handleToggleType.bind(Object(p.a)(Object(p.a)(n))),n.handleSelect=n.handleSelect.bind(Object(p.a)(Object(p.a)(n))),n.state={currId:"",items:[],operators:[],skeletonLoading:!1,phone:"",productId:"",integral:0,availableIntegral:0},n}return Object(d.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.history.location.state.id;this.loadUserInfo(),this.loadOperatorById(t).then(function(){var t=e.state.operators[0].productClassifyId;t&&e.setState({currId:t},function(){e.loadProdcutsByType(t)})})}},{key:"componentWillUnmount",value:function(){this.loadUserInfoSource.cancel("Operation canceled by the user."),this.loadOperatorSource.cancel("Operation canceled by the user."),this.loadProdcutsSource.cancel("Operation canceled by the user.")}},{key:"loadUserInfo",value:function(){var e=Object(c.a)(i.a.mark(function e(){var t,n;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.loadUserInfoSource=H.source(),e.prev=1,e.next=4,Object(x.D)(null,{cancelToken:this.loadUserInfoSource.token});case 4:t=e.sent,200===(n=t.data).status&&this.setState({availableIntegral:Number(n.data[0].balance)});case 7:return e.prev=7,e.finish(7);case 9:case"end":return e.stop()}},e,this,[[1,,7,9]])}));return function(){return e.apply(this,arguments)}}()},{key:"loadOperatorById",value:function(){var e=Object(c.a)(i.a.mark(function e(t){var n,a;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.loadOperatorSource=H.source(),e.prev=1,e.next=4,Object(x.z)(t,{cancelToken:this.loadOperatorSource.token});case 4:n=e.sent,200===(a=n.data).status&&this.setState({operators:a.data});case 7:return e.prev=7,e.finish(7);case 9:case"end":return e.stop()}},e,this,[[1,,7,9]])}));return function(t){return e.apply(this,arguments)}}()},{key:"loadProdcutsByType",value:function(){var e=Object(c.a)(i.a.mark(function e(t){var n,a;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({skeletonLoading:!0}),this.loadProdcutsSource=H.source(),e.prev=2,e.next=5,Object(x.C)(t,{cancelToken:this.loadProdcutsSource.token});case 5:n=e.sent,200===(a=n.data).status&&this.setState({items:a.data});case 8:return e.prev=8,this.setState({skeletonLoading:!1}),e.finish(8);case 11:case"end":return e.stop()}},e,this,[[2,,8,11]])}));return function(t){return e.apply(this,arguments)}}()},{key:"doSubmit",value:function(){var e=Object(c.a)(i.a.mark(function e(t){var n,a,r,c=this;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=g.a.loading("\u5904\u7406\u4e2d"),e.prev=1,e.next=4,Object(x.N)(t);case 4:a=e.sent,200===(r=a.data).status?Object(k.b)("/result",{type:"success",title:r.msg}):1017===r.status?y.a.confirmRetry("\u5bc6\u7801\u9519\u8bef",function(){c.retryTransPswd()}):g.a.alert(r.msg);case 7:return e.prev=7,n.hide(),e.finish(7);case 10:case"end":return e.stop()}},e,null,[[1,,7,10]])}));return function(t){return e.apply(this,arguments)}}()},{key:"retryTransPswd",value:function(){this.handleSubmit()}},{key:"reset",value:function(){this.setState({productId:""})}},{key:"handleToggleType",value:function(e){var t=this;e!==this.state.currId&&(this.reset(),this.setState({currId:e},function(){t.loadProdcutsByType(e)}))}},{key:"handleSelect",value:function(e,t){this.setState({productId:e,integral:t})}},{key:"handleChange",value:function(e){this.setState(Object(a.a)({},e.target.name,e.target.value))}},{key:"verify",value:function(){if(this.state.phone)if(11===this.state.phone.length)if(this.state.productId){if(!(this.state.integral>this.state.availableIntegral))return!0;g.a.alert("\u79ef\u5206\u4e0d\u8db3")}else g.a.alert("\u8bf7\u9009\u62e9\u4ea7\u54c1");else g.a.alert("\u8bf7\u8f93\u5165\u5408\u6cd5\u7684\u624b\u673a\u53f7");else g.a.alert("\u8bf7\u8f93\u5165\u624b\u673a\u53f7")}},{key:"handleSubmit",value:function(){var e=this;this.verify()&&y.a.paymentConfirm({title:"\u5145\u503c",amount:this.state.integral,useable:this.state.availableIntegral,callback:function(t,n){if(!n.value)return!1;var a={phone:e.state.phone,productId:e.state.productId,tranPwd:n.value};e.doSubmit(a)}})}},{key:"render",value:function(){var e=this.state,t=e.productId,n=e.currId,a=e.items,r=e.operators,i=e.skeletonLoading;return m.a.createElement(W,null,m.a.createElement(I.Helmet,{title:"\u6d41\u91cf\u5145\u503c"}),m.a.createElement("header",null,m.a.createElement("img",{src:P.a,alt:""}),m.a.createElement("div",{className:"nav-box"},m.a.createElement(z,{currId:n,items:r,handleToggleType:this.handleToggleType}))),m.a.createElement("main",{className:"main"},m.a.createElement("div",{className:"u_p_xxx"},m.a.createElement("div",{className:"input-box"},m.a.createElement("input",{className:"input input-primary",type:"number",name:"phone",value:this.state.phone,onChange:this.handleChange,placeholder:"\u8bf7\u8f93\u5165\u624b\u673a\u53f7",autoComplete:"off"}))),m.a.createElement("h2",{className:"u_mx_xxx u_mb_x"},"\u8bf7\u9009\u62e9\u9762\u503c"),m.a.createElement(L,{loading:i,productId:t,items:a,handleSelect:this.handleSelect}),m.a.createElement("div",{className:"u_p_xxx"},m.a.createElement("button",{className:"btn btn-secondary",onClick:this.handleSubmit},"\u7acb\u5373\u5145\u503c"))),m.a.createElement(O.a,null))}}]),t}(h.Component);n.d(t,"view",function(){return _})}}]);
//# sourceMappingURL=9.cca9fa3b.chunk.js.map