(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{437:function(e,t,a){e.exports=a.p+"static/media/fz.c5fa25d0.svg"},438:function(e,t,a){e.exports=a.p+"static/media/gd.ec8aa3f0.svg"},439:function(e,t,a){e.exports=a.p+"static/media/gs.1a3c4b01.svg"},440:function(e,t,a){e.exports=a.p+"static/media/hx.3be0e6ed.svg"},441:function(e,t,a){e.exports=a.p+"static/media/js.e2841921.svg"},442:function(e,t,a){e.exports=a.p+"static/media/jt.2f070f4e.svg"},443:function(e,t,a){e.exports=a.p+"static/media/ms.6ba37844.svg"},444:function(e,t,a){e.exports=a.p+"static/media/ny.03c59a46.svg"},445:function(e,t,a){e.exports=a.p+"static/media/pa.f286000e.svg"},446:function(e,t,a){e.exports=a.p+"static/media/sh.9c8b70e2.svg"},447:function(e,t,a){e.exports=a.p+"static/media/shfz.287d5328.svg"},448:function(e,t,a){e.exports=a.p+"static/media/xy.ab1bcf3e.svg"},449:function(e,t,a){e.exports=a.p+"static/media/yz.38c7462e.svg"},450:function(e,t,a){e.exports=a.p+"static/media/zg.1344157f.svg"},451:function(e,t,a){e.exports=a.p+"static/media/zs.132007da.svg"},452:function(e,t,a){e.exports=a.p+"static/media/zx.498ec56f.svg"},453:function(e,t,a){e.exports=a.p+"static/media/default.1caa3942.svg"},513:function(e,t,a){e.exports=a.p+"static/media/banner.21d6f7a2.jpg"},514:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAHgAAAB4CAYAAAA5ZDbSAAACP0lEQVR4Xu3dMU4DUQxF0UlDl91k/1kYBRRB1NjSl27QobZHD7+cJinmdv3Tv+fz+fXXf+1+v388Ho/Pv86/09ztncJOsir4dS0FX9dF8IROZJZggn8/igRHVE5iEEwwwRMxtVmCCSa4pnKSh2CCCZ6Iqc0STDDBNZWTPAQTTPBETG2WYIIJrqmc5CGYYIInYmqzBBNMcE3lJA/BBBM8EVObJZhggmsqJ3kIJpjgiZjaLMEEE1xTOclDMMEET8TUZgkmmOCaykkeggkmeCKmNkswwQTXVE7yEEwwwRMxtVmCCSa4pnKSh2CCCZ6Iqc0STDDBNZWTPAQTTPBETG2WYIIJrqmc5CGYYIInYmqzBBNMcE3lJA/BP4Inh5gc2GzjAjcFN4o4lULBpy4bea6CI0WciqHgU5eNPFfBkSJOxVDwqctGnqvgSBGnYij41GUjz1VwpIhTMRR86rKR53q9rNfLRj6KwxiTr2C9fXR43MK4gv0e7PfggsRtBoIJJnirp7BHMMEEFyRuMxBMMMFbPYU9ggkmuCBxm4Fgggne6insEUwwwQWJ2wwEE0zwVk9hj2CCCS5I3GYgmGCCt3oKewQTTHBB4jYDwQQTvNVT2COYYIILErcZCCaY4K2ewh7BBBNckLjNQDDBBG/1FPYIJpjggsRtBoIJJnirp7BHMMEEFyRuMxBMMMFbPYU9ggkmuCBxm4Fgggne6insEUwwwQWJ2wwEE0zwVk9hj2CCCS5I3GYgmGCCt3oKewS/WvgGgXFFK0u07TYAAAAASUVORK5CYII="},559:function(e,t,a){"use strict";a.r(t);var n=a(81),s=a(19),i=a.n(s),r=a(33),c=a(45),l=a(46),o=a(49),d=a(47),u=a(48),m=a(5),p=a(0),h=a.n(p),f=a(537),g=a(11),b=a.n(g),v=a(137),x=a.n(v),C=a(135),k=a(34),E=a(74),N=a(31),w=a(80),B=a(21);function y(){var e=Object(B.a)(["\n  .info{\n    color: #888;\n    font-size: 12px;\n    padding-bottom: 15px;\n    border-bottom: 1px solid #eaeaea;\n  }\n  .card{\n    display: flex;\n    align-items: center;\n    .icon{\n      width: 40px;\n      height: 40px;\n      display: block;\n    }\n    .main{\n      flex: 1;\n      margin-left: 10px;\n      p{\n        margin: 0;\n      }\n      .title{\n        font-size: 16px;\n        font-weight: bold;\n        margin-bottom: 5px;\n      }\n      .text{\n        line-height: 1.5;\n        font-size: 12px;\n        color: #888;\n      }\n    }  \n    .arrow{\n      width: 20px;\n      height: 40px;\n    }  \n  }\n  .empty{\n    text-align: center;\n    position: relative;\n    margin-top: -30px;\n    .wrap{\n      font-size: 16px;\n      background: #fff;\n      margin: 15px 15px 0 15px;\n      padding: 15px 15px 20px 15px;\n      border-radius: 5px;\n      box-shadow: 0 1px 3px rgba(26,26,26,.1);\n    }\n    .icon{\n      width: 20px;\n      height: 20px;\n    }\n    .text{\n      padding: 5px 0;\n      color: #888;\n    }\n  }\n  .input-box{\n    display: flex;\n    justify-content: space-between;\n    padding: 15px 0;\n    border-bottom: 1px solid #eaeaea;\n    .tip{\n      font-size: 12px;\n      color: #ee6076;\n      flex-shrink: 0;\n    }\n  }\n  .group{\n    display: flex;\n    align-items: center;\n    &__body{\n      flex: 1;\n    }\n    &__foot{\n      margin-left: 10px;\n    }\n  }  \n"]);return y=function(){return e},e}var S=a(22).a.div(y()),O=a(513),I=a.n(O),j=a(514),A=a.n(j),T=a(100),P=a.n(T),M=a(437),_=a.n(M),F=a(438),R=a.n(F),G=a(439),Y=a.n(G),U=a(440),z=a.n(U),D=a(441),J=a.n(D),L=a(442),V=a.n(L),H=a(443),Z=a.n(H),K=a(444),Q=a.n(K),q=a(445),W=a.n(q),X=a(446),$=a.n(X),ee=a(447),te=a.n(ee),ae=a(448),ne=a.n(ae),se=a(449),ie=a.n(se),re=a(450),ce=a.n(re),le=a(451),oe=a.n(le),de=a(452),ue=a.n(de),me=a(453),pe=a.n(me),he={GDB:_.a,CEB:R.a,ICBC:Y.a,HXB:z.a,CCB:J.a,COMM:V.a,CMBC:Z.a,ABC:Q.a,SZPAB:W.a,BOS:$.a,SPDB:te.a,CIB:ne.a,PSBC:ie.a,BOC:ce.a,CMB:oe.a,CITIC:ue.a};function fe(e){var t=e.flag,a=e.interval,n=e.handleClick;return t?h.a.createElement("button",{className:"btn btn-mini",onClick:n},"\u83b7\u53d6\u9a8c\u8bc1\u7801"):h.a.createElement("button",{className:"btn btn-mini disable"},a,"\u79d2\u540e\u91cd\u53d1")}function ge(e){var t=e.pass,a=e.handleSubmit;return t?h.a.createElement("button",{className:"btn btn-primary",onClick:a},"\u7acb\u5373\u8fd8\u6b3e"):h.a.createElement("button",{className:"btn btn-primary disable"},"\u7acb\u5373\u8fd8\u6b3e")}function be(e){var t=e.logo,a=e.bankName,n=e.bankCard,s=e.hasCard,i=e.handleOpenPicker;return s?h.a.createElement("div",{className:"u_p_xxx u_mb_xx u_bg_white"},h.a.createElement("div",{className:"card"},h.a.createElement("div",{className:"aside"},h.a.createElement("img",{className:"icon",src:t,alt:""})),h.a.createElement("div",{className:"main"},h.a.createElement("p",{className:"title"},a," (\u5c3e\u53f7",h.a.createElement("span",null,E.a.getBankcardLastNum(n)),")"),h.a.createElement("p",{className:"text"},"\u9884\u8ba1\u4e0b\u4e00\u5de5\u4f5c\u65e5\u5230\u8d26\uff0c\u5b9e\u9645\u4ee5\u94f6\u884c\u5230\u8d26\u65e5\u4e3a\u51c6")),h.a.createElement("div",{className:"foot"},h.a.createElement("img",{className:"arrow",onClick:i,src:P.a,alt:""})))):h.a.createElement("div",{className:"empty"},h.a.createElement(f.a,{to:{pathname:"bankcard-add",state:{from:"/credit-card"}}},h.a.createElement("div",{className:"wrap"},h.a.createElement("img",{className:"icon",src:A.a,alt:""}),h.a.createElement("p",null,"\u8bf7\u6dfb\u52a0\u4fe1\u7528\u5361"))),h.a.createElement("p",{className:"text"},"\u6682\u65e0\u53ef\u7528"))}var ve=x.a.CancelToken,xe=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(o.a)(this,Object(d.a)(t).call(this,e))).handleGetCode=a.handleGetCode.bind(Object(m.a)(Object(m.a)(a))),a.handleOpenPicker=a.handleOpenPicker.bind(Object(m.a)(Object(m.a)(a))),a.handleChange=a.handleChange.bind(Object(m.a)(Object(m.a)(a))),a.handleSubmit=a.handleSubmit.bind(Object(m.a)(Object(m.a)(a))),a.handleBlur=a.handleBlur.bind(Object(m.a)(Object(m.a)(a))),a.state={pass:!1,interval:N.a.creditCard.INTERVAL,getCodeFlag:!0,smsCode:"",loading:!0,hasCard:!1,bankCard:"",bankCode:"",bankName:"",cardHoldName:"",userPhoneNo:"",cardList:[],redeemFee:0,actualReceived:0,deductIntegral:0,integral:"",availableIntegral:0},a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.loadUserInfo(),this.loadBankCardList()}},{key:"componentWillUnmount",value:function(){this.loadUserInfoSource&&this.loadUserInfoSource.cancel("Operation canceled by the user.")}},{key:"loadUserInfo",value:function(){var e=Object(r.a)(i.a.mark(function e(){var t,a;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.loadUserInfoSource=ve.source(),e.prev=1,e.next=4,Object(k.z)(null,{cancelToken:this.loadUserInfoSource.token});case 4:t=e.sent,200===(a=t.data).status&&this.setState({availableIntegral:Number(a.data[0].balance)});case 7:return e.prev=7,e.finish(7);case 9:case"end":return e.stop()}},e,this,[[1,,7,9]])}));return function(){return e.apply(this,arguments)}}()},{key:"loadBankCardList",value:function(){var e=Object(r.a)(i.a.mark(function e(){var t,a,n,s=this;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(k.k)();case 3:t=e.sent,200===(a=t.data).status&&(n=E.a.filterBankCardByStatusAndType(a.data,2,1),this.setState({cardList:n},function(){var e=n[0];e&&s.setCard(e)}));case 6:return e.prev=6,this.setState({loading:!1}),e.finish(6);case 9:case"end":return e.stop()}},e,this,[[0,,6,9]])}));return function(){return e.apply(this,arguments)}}()},{key:"doSubmit",value:function(){var e=Object(r.a)(i.a.mark(function e(t){var a,n,s,r,c=this;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=b.a.loading("\u5904\u7406\u4e2d"),n={amount:this.state.integral,bankCode:this.state.bankCode,bankName:this.state.bankName,cardHoldName:this.state.cardHoldName,cardPhoneNo:this.state.userPhoneNo,tradPwd:t,code:this.state.smsCode,bankCard:this.state.bankCard,payment:2},e.prev=2,e.next=5,Object(k.D)(n);case 5:s=e.sent,200===(r=s.data).status?b.a.alert(r.msg):1017===r.status?E.a.confirmRetry("\u5bc6\u7801\u9519\u8bef",function(){c.retryTransPswd()}):b.a.alert(r.msg);case 8:return e.prev=8,a.hide(),e.finish(8);case 11:case"end":return e.stop()}},e,this,[[2,,8,11]])}));return function(t){return e.apply(this,arguments)}}()},{key:"getCode",value:function(){var e=Object(r.a)(i.a.mark(function e(){var t,a,n,s=this;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=b.a.loading("\u53d1\u9001\u4e2d"),e.prev=1,e.next=4,Object(k.m)(this.state.userPhoneNo);case 4:a=e.sent,200===(n=a.data).status&&this.setState({getCodeFlag:!1},function(){s.countDown()}),b.a.alert(n.msg);case 8:return e.prev=8,t.hide(),e.finish(8);case 11:case"end":return e.stop()}},e,this,[[1,,8,11]])}));return function(){return e.apply(this,arguments)}}()},{key:"getWithdrawFee",value:function(){var e=Object(r.a)(i.a.mark(function e(){var t,a;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(k.B)(this.state.integral||0);case 2:t=e.sent,200===(a=t.data).status&&this.updateFee(a.data);case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"setCard",value:function(e){var t=this;this.setState({bankName:e.bankName,bankCode:e.bankCode,bankCard:e.bankCard,cardHoldName:e.cardHoldName,userPhoneNo:e.userPhoneNo,bankcardLogo:he[e.bankCode]||pe.a},function(){t.setState({hasCard:!0},function(){t.updateBtnStatus()})})}},{key:"countDown",value:function(){var e=this;this.state.interval>0?setTimeout(function(){e.setState({interval:e.state.interval-1},function(){e.countDown()})},1e3):this.resetGetCode()}},{key:"resetGetCode",value:function(){this.setState({interval:N.a.creditCard.INTERVAL,getCodeFlag:!0})}},{key:"updateBtnStatus",value:function(){this.state.integral&&this.state.hasCard&&this.state.smsCode?this.setState({pass:!0}):this.setState({pass:!1})}},{key:"updateFee",value:function(e){var t=e.poundage,a=e.money,n=e.totalAmount;this.setState({redeemFee:t,actualReceived:a,deductIntegral:n})}},{key:"retryTransPswd",value:function(){this.handleSubmit()}},{key:"handleOpenPicker",value:function(){var e=this;if(!this.state.cardList.length)return b.a.alert("\u6682\u65e0\u53ef\u7528\u4fe1\u7528\u5361"),!1;b.a.picker(E.a.parseBankcardList(this.state.cardList),{defaultValue:[0],onConfirm:function(t){t&&t[0]&&e.setCard(t[0])}})}},{key:"handleChange",value:function(e){var t=this;this.setState(Object(n.a)({},e.target.name,e.target.value),function(){t.updateBtnStatus()})}},{key:"handleGetCode",value:function(){this.getCode()}},{key:"handleBlur",value:function(e){this.getWithdrawFee()}},{key:"handleSubmit",value:function(){var e=this;E.a.paymentConfirm({title:"\u8fd8\u6b3e",amount:this.state.integral,useable:this.state.availableIntegral,callback:function(t,a){if(!a.value.trim())return alert("\u8bf7\u8f93\u5165\u5bc6\u7801"),!1;e.doSubmit(a.value)}})}},{key:"render",value:function(){var e=this.state.getCodeFlag;return h.a.createElement(S,null,h.a.createElement(C.Helmet,{defaultTitle:"\u6c83\u94f6\u4f01\u670d",title:"\u4fe1\u7528\u5361\u8fd8\u6b3e"}),h.a.createElement("header",null,h.a.createElement("img",{src:I.a,alt:""})),h.a.createElement(be,{hasCard:this.state.hasCard,logo:he[this.state.bankCode],bankName:this.state.bankName,bankCard:this.state.bankCard,handleOpenPicker:this.handleOpenPicker}),h.a.createElement("div",{className:"u_bg_white"},h.a.createElement("div",{className:"u_p_xxx"},h.a.createElement("h2",null,"\u8fd8\u6b3e\u91d1\u989d"),h.a.createElement("div",{className:"input-box"},h.a.createElement("input",{name:"integral",className:"input input-primary",value:this.state.integral,onChange:this.handleChange,onBlur:this.handleBlur,placeholder:"\u6700\u591a\u53ef\u4f7f\u7528".concat(this.state.availableIntegral,"\u79ef\u5206")}),h.a.createElement("div",{className:"tip"},"\u53ef\u7528\u79ef\u5206\uff1a",this.state.availableIntegral))),h.a.createElement("div",{className:"u_px_xxx u_pb_xxx"},h.a.createElement("div",{className:"info"},h.a.createElement("p",null,"\u6263\u9664",this.state.deductIntegral,"\u79ef\u5206\uff0c\u8fd8\u6b3e",this.state.deductIntegral/100,"\u5143"),h.a.createElement("p",null,"\u624b\u7eed\u8d39",this.state.redeemFee,"\u79ef\u5206\uff0c100\u79ef\u5206\u7b49\u4e8e1\u5143"))),h.a.createElement("div",{className:"u_px_xxx u_pb_xxx"},h.a.createElement("div",{className:"group"},h.a.createElement("div",{className:"group__body"},h.a.createElement("input",{type:"text",className:"input input-primary",name:"smsCode",value:this.state.smsCode,onChange:this.handleChange,placeholder:"\u8bf7\u8f93\u5165\u77ed\u4fe1\u9a8c\u8bc1\u7801"})),h.a.createElement("div",{className:"group__foot"},h.a.createElement(fe,{flag:e,interval:this.state.interval,handleClick:this.handleGetCode}))))),h.a.createElement("div",{className:"u_p_xxx"},h.a.createElement(ge,{pass:this.state.pass,handleSubmit:this.handleSubmit})),h.a.createElement(w.a,null))}}]),t}(p.Component);a.d(t,"view",function(){return xe})}}]);
//# sourceMappingURL=18.18715a17.chunk.js.map