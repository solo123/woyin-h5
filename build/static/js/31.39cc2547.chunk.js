(window.webpackJsonp=window.webpackJsonp||[]).push([[31],{467:function(n,e,t){"use strict";var a=t(21),i=t(0),l=t.n(i);function o(){var n=Object(a.a)(["\n  width: 105px;\n  display: inline-block;\n  vertical-align: middle;\n  span,\n  input {\n    position: relative;\n    float: left;\n    width: 30px;\n    height: 30px;\n    line-height: 30px;\n    background: #f6f6f6;\n    text-align: center;\n  }\n  .num{\n    -webkit-appearance: none;\n    border-radius: 0;\n    width: 45px;\n    height: 30px;\n    line-height: normal;\n    border: 0;\n    border-left: 1px solid #fff;\n    border-right: 1px solid #fff;\n    background: #f6f6f6;\n    font-size: 12px;\n    text-align: center;\n    font-family: industry;\n  }\n"]);return o=function(){return n},n}var r=t(22).a.div(o());e.a=function(n){var e=n.count,t=n.onClick,a=n.onChange;return l.a.createElement(r,null,l.a.createElement("span",{className:"minus",onClick:function(){return t(e-1)}},"-"),l.a.createElement("input",{className:"num",type:"text",onChange:a,value:e}),l.a.createElement("span",{className:"plus",onClick:function(){return t(e+1)}},"+"))}},541:function(n,e,t){"use strict";t.r(e);var a=t(19),i=t.n(a),l=t(3),o=t(33),r=t(45),c=t(46),s=t(49),d=t(47),u=t(48),f=t(5),h=t(0),p=t.n(h),m=t(135),b=t(11),g=t.n(b),x=t(137),v=t.n(x),k=t(31),E=t(34),w=t(80),y=t(21),C=t(22);function j(){var n=Object(y.a)(["\n  .layer{\n    position: fixed;\n    top: 0;\n    left: 0;\n    bottom: 0;\n    right: 0;\n    &__bg{\n      position: fixed;\n      bottom: 0;\n      left: 0;\n      top: 0;\n      right: 0;\n      z-index: 1040;\n      background: rgba(0, 0, 0, .6);      \n    }\n    &__content{\n      position: absolute;\n      left: 0;\n      bottom: 0;\n      right: 0;\n      z-index: 1050;\n    }\n  }  \n"]);return j=function(){return n},n}var O=C.a.div(j());var N=function(n){var e=n.show,t=n.children,a=n.handleClose;return e?p.a.createElement(O,null,p.a.createElement("div",{className:"layer"},p.a.createElement("div",{className:"layer__bg",onClick:a}),p.a.createElement("div",{className:"layer__content"},t))):null},T=t(467);var _=function(n){var e=n.count,t=n.totalIntegral,a=n.balance,i=n.handleClick,l=n.handleChange,o=n.handleSubmit;return p.a.createElement("div",{className:"confirm-info"},p.a.createElement("div",{className:"main"},p.a.createElement("span",{className:"badge"},"\u53ef\u7528\u79ef\u5206\uff1a",a),p.a.createElement("ul",null,p.a.createElement("li",null,p.a.createElement("div",null,"\u4f7f\u7528\u79ef\u5206\uff1a"),p.a.createElement("div",null,t)),p.a.createElement("li",null,p.a.createElement("div",null,"\u6570\u91cf"),p.a.createElement("div",null,p.a.createElement(T.a,{count:e,onClick:i,onChange:l}))))),p.a.createElement("div",{className:"confirm-btn",onClick:o},"\u786e\u8ba4"))},S=t(138);function I(){var n=Object(y.a)(['\n  padding-bottom: 40px;\n  .badge{\n    font-size: 14px;\n    color: #7e7e7e;\n    padding: 0 5px;\n    border-radius: 3px;\n    background: #f2f2f2;          \n  }   \n  header{\n    margin-bottom: 15px;\n    .info{\n      padding: 15px;\n      background: #fff;\n      .head{\n        display: flex;\n        align-items: center;\n        justify-content: space-between;\n        margin-bottom: 10px;\n        .price{\n          color: #F53415;\n          font-size: 20px;\n        }\n        .badge{\n          font-size: 14px;\n          color: #7e7e7e;\n          padding: 0 5px;\n          border-radius: 3px;\n          background: #f2f2f2;          \n        }  \n      }\n    }\n  }\n  main{\n    background: #fff;\n    margin-bottom: 15px;\n   \n    table{\n      width: 100%;\n      text-align: left;\n      border-spacing: 0;      \n      border-collapse: collapse;\n      thead{\n        th{\n          position: relative;\n          font-weight: bold;\n          padding: 15px 0 15px 15px;     \n          &:before{\n            content: " ";\n            display: block;\n            position: absolute;\n            width: 100%;\n            left: 0px;\n            height: 1px;\n            background: #E5E5E5;\n            bottom: 0px;\n            -webkit-transform: scaleY(.5);\n            transform: scaleY(.5);\n          }     \n        }\n      }\n      tbody{\n        .tdTitle, th{\n          position: relative;\n          color: #888;\n          width: 28%;\n          font-weight: normal;\n          padding: 15px 0 15px 15px;\n          &:before{\n            content: " ";\n            display: block;\n            position: absolute;\n            width: 100%;\n            left: 0px;\n            height: 1px;\n            background: #E5E5E5;\n            bottom: 0px;\n            -webkit-transform: scaleY(.5);\n            transform: scaleY(.5);\n          }\n        }\n        .tdTitle[colspan] {\n          color: #333;\n          font-weight: bold;\n        }        \n        td{\n          position: relative;\n          padding: 15px 0;\n          &:before{\n            content: " ";\n            display: block;\n            position: absolute;\n            width: 100%;\n            left: 0px;\n            height: 1px;\n            background: #E5E5E5;\n            bottom: 0px;\n            -webkit-transform: scaleY(.5);\n            transform: scaleY(.5);\n          }\n        }\n      }\n    }\n  }\n  .confirm-info{\n    .main{\n      padding: 15px;\n      background: #fff;\n      label{\n        color: #7e7e7e;\n        padding: 2px 10px;\n        border-radius: 10px;\n        background: #f2f2f2;\n      }\n      ul{\n        li{\n          position: relative;\n          display: flex;\n          align-items: center;\n          justify-content: space-between;\n          padding: 10px 0;\n          &:after{\n            content: " ";\n            position: absolute;\n            left: 0;\n            bottom: 0;\n            right: 0;\n            height: 1px;\n            border-bottom: 1px solid #e5e5e5;\n            transform: scaleY(0.5);\n          }\n          &:last-child:after{\n            content: none;\n          }\n        }\n      }\n    }\n    .confirm-btn{\n      color: #fff;\n      font-weight: bold;\n      line-height: 40px;\n      text-align: center;\n      background: #1c92ff;  \n    }\n  }\n  .fixed-bottom{\n    position: fixed;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    .submit-btn{\n      color: #fff;\n      font-weight: bold;\n      line-height: 40px;\n      text-align: center;\n      background: #1c92ff;      \n    }\n  }\n\n']);return I=function(){return n},n}var z=C.a.div(I()),Y=v.a.CancelToken,P=function(n){function e(n){var t;return Object(r.a)(this,e),(t=Object(s.a)(this,Object(d.a)(e).call(this,n))).handleClick=t.handleClick.bind(Object(f.a)(Object(f.a)(t))),t.handleChange=t.handleChange.bind(Object(f.a)(Object(f.a)(t))),t.handleSubmit=t.handleSubmit.bind(Object(f.a)(Object(f.a)(t))),t.handleToggle=t.handleToggle.bind(Object(f.a)(Object(f.a)(t))),t.state={show:!1,count:1,integral:100*t.props.location.state.detail.jdPrice,balance:0},t}return Object(u.a)(e,n),Object(c.a)(e,[{key:"componentDidMount",value:function(){this.getUserInfo()}},{key:"componentWillUnmount",value:function(){this.source&&this.source.cancel("Operation canceled by the user.")}},{key:"getUserInfo",value:function(){var n=Object(o.a)(i.a.mark(function n(){var e,t;return i.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return this.source=Y.source(),n.prev=1,n.next=4,Object(E.z)();case 4:if(e=n.sent,200!==(t=e.data).status){n.next=10;break}if(t.data.length){n.next=9;break}return n.abrupt("return");case 9:this.setState(Object(l.a)({},t.data[0]));case 10:return n.prev=10,n.finish(10);case 12:case"end":return n.stop()}},n,this,[[1,,10,12]])}));return function(){return n.apply(this,arguments)}}()},{key:"verify",value:function(){return!(this.state.integral*this.state.count>this.state.balance)||(g.a.alert("\u79ef\u5206\u4e0d\u8db3"),!1)}},{key:"handleClick",value:function(n){k.a.store.MAX_COUNT>=n&&n>=k.a.ecard.MIN_COUNT&&this.setState({count:n})}},{key:"handleChange",value:function(){}},{key:"handleToggle",value:function(){this.setState({show:!this.state.show})}},{key:"handleSubmit",value:function(){if(this.verify()){var n=this.props.location.state.detail,e=n.name,t=n.jdPrice,a=n.skuId,i=this.state.count;Object(S.a)("/store-confirm",{name:e,jdPrice:t,skuId:a,count:i})}}},{key:"render",value:function(){var n=this.state.count*this.state.integral,e=this.props.location.state.detail,t=e.name,a=e.jdPrice,i=e.imagePath,l=e.param;return p.a.createElement(z,null,p.a.createElement(m.Helmet,{defaultTitle:"\u6c83\u94f6\u4f01\u670d",title:"\u5546\u54c1\u8be6\u60c5"}),p.a.createElement("header",null,p.a.createElement("div",{className:"swiper"},p.a.createElement("img",{src:"http://img13.360buyimg.com/n0/".concat(i),alt:""})),p.a.createElement("div",{className:"info"},p.a.createElement("div",{className:"head"},p.a.createElement("span",{className:"price"},"\xa5",a),p.a.createElement("span",{className:"badge"},"\u6709\u8d27")),p.a.createElement("h2",null,t))),p.a.createElement("main",null,p.a.createElement("div",{dangerouslySetInnerHTML:{__html:l}})),p.a.createElement("div",{className:"fixed-bottom"},p.a.createElement("div",{className:"submit-btn",onClick:this.handleToggle},"\u7acb\u5373\u5151\u6362")),p.a.createElement(N,{show:this.state.show,handleClose:this.handleToggle},p.a.createElement(_,{count:this.state.count,totalIntegral:n,balance:this.state.balance,handleClick:this.handleClick,handleChange:this.handleChange,handleSubmit:this.handleSubmit})),p.a.createElement(w.a,null))}}]),e}(h.Component);t.d(e,"view",function(){return P})}}]);
//# sourceMappingURL=31.39cc2547.chunk.js.map