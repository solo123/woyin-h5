(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{107:function(e,n,a){"use strict";a.d(n,"a",function(){return r}),a.d(n,"b",function(){return c});var t=a(32);function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"/";t.a.push(e)}function c(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"/";t.a.replace(e)}},113:function(e,n){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMDY3IDc5LjE1Nzc0NywgMjAxNS8wMy8zMC0yMzo0MDo0MiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTUgKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOkUyMkE3QTBENDkyODExRTk4NkYwRTc5NjBDNzJBRENBIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOkUyMkE3QTBFNDkyODExRTk4NkYwRTc5NjBDNzJBRENBIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6RTIyQTdBMEI0OTI4MTFFOTg2RjBFNzk2MEM3MkFEQ0EiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6RTIyQTdBMEM0OTI4MTFFOTg2RjBFNzk2MEM3MkFEQ0EiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz7gM8GWAAAC30lEQVR42uybvUscQRjG9/JBDAbhCv0HLAJKQDCCiBpBBElAEUywEhuJBCxMpWChkOKstFKwSBPQQguJHCqIH5gqEMRCUUxsBAsjiGATFS/PwCxchv267HzdzrzwsOcs7M3z252Z9x33UrlczjE5HjiGhwVgARgej+Je4M3iP3++hlqhGugh575uQuNsY7ZbMQAaaegL4SHwZp1r+QQgUtAaVGfqHDBYrOZ5AXirozHMTVVQWsYQqPVoO4B+c/a0X4D5ahx2oDN8bsJEeSkSwFOPtjFoQdGdd82nqXaCICQqD2DMu1FNIaQTDcDHfD6E9sQCCDFP4gOGwHwiAUQ0P5PUWqAmjnmeqbAq89tQmc/5oTDzvgBIEoFDBZuL44IHRWR+Kk4tQKouts4i6/o7Dp3vh15CA1BOpXkVQ4CYn6WfS6C+AiFwNS97Esw3T6IXmitg3yDM/Eih5mUC6GHM57cvRHgSo5jPqKoGo8Q6dORzrgtagh77nK8TZV4mgAuoMQAC2UnKQk88zG+IMi97DgiD0Aat5lWXrvlnAStVJm6nZK8CLoRv0HOP8y10uIxCXwPMZ2jJ7cTNY1RkgmEQGuiddwLMj4R8R+Q8RlUtEDYc4pjXdg6IC2GKt3kdqsGoEIj5IREd0KEcDoMgzLxO+wF+EISa121DhIUwI9q8jhsiLgRSKn+S8YU6boldyDKvKwCpYQFYABaABWB08MgDyK5uimmrorW98GBe0nKj3KPtXhSAE6iSaRvT8Gb/EjUE9orkad8VBWACutPc/CG0LArAd+i9xhBOoY5st/NH5CrwGap36ItJzv/9z49n3EA/ab9ewPyxjGrwB9Qs22ncV2VtImQBWAA2FfaKK4+2FqSdWwr76vl7AVEA9nzy61cKAZzLHALkpcJrY+cArK1kY3LY9ElwGvoI3Rq5H4CngKSzk5j4VnDspFleqcK+7ou4aMr+dNYmQhaABWBy/BVgAIpos/yzjVFgAAAAAElFTkSuQmCC"},114:function(e,n,a){e.exports=a.p+"static/media/arrow_right.8075ec42.svg"},149:function(e,n,a){e.exports=a.p+"static/media/unchecked.519021c7.svg"},177:function(e,n,a){"use strict";a.r(n);var t=a(33),r=a(101),c=a.n(r),i=a(102),s=a(13),o=a(14),l=a(16),d=a(15),u=a(17),m=a(99),g=a(0),b=a.n(g),f=a(100),p=a(6),h=a.n(p),k=a(19),v=a(51),x=a(35),E=a(107),N=(a(9),a(103)),A=a(114),w=a.n(A),C=a(113),B=a.n(C),I=a(149),j=a.n(I),y=(a(118),a(119),a(120)),M=a.n(y),S=(a(121),a(122)),O=a.n(S),R=(a(123),a(124),a(125),a(126),a(127),a(128),a(129),a(130),a(131),a(132)),F=a.n(R),D=(a(133),a(134)),z=a.n(D);function G(){var e=Object(m.a)(["\n  padding: 15px;\n  background: #fff;\n  .trigger-bar{\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    .icon{\n      width: 20px;\n      height: 20px;\n    }\n  }\n  .empty{\n    color: #888;\n    line-height: 50px;\n    font-size: 16px;\n    font-weight: bold;\n    text-align: center;\n  }\n  .bankcard{\n    display: flex;\n    .icon{\n      width: 50px;\n      height: 50px;\n    }\n    .card{\n      font-family: industry;\n    }\n    .main{\n      flex: 1;\n      .name{\n        font-size: 16px;\n        font-weight: bold;\n        margin-bottom: 5px;\n      }\n      .text{\n        line-height: 1.5;\n        font-size: 12px;\n        color: #888;\n      }\n    }\n  }\n  .input-box{\n    padding: 15px;\n    background: #f4f4f4;\n  }\n  .small-text{\n    color: #888;\n    font-size: 12px;\n  }\n\n  .checkbox{\n    width: 16px;\n    height: 16px;\n    margin-right: 3px;\n  }\n  .flex-y-center{\n    display: flex;\n    align-items: center;\n  }\n  .group{\n    display: flex;\n    align-items: center;\n    &__body{\n      flex: 1;\n    }\n    &__foot{\n      margin-left: 10px;\n    }\n  }  \n  .loading{\n    display: flex;\n    &__head{\n     width: 50px;\n     height: 50px;\n     background: #eaeaea;\n    }\n    &__main{\n      flex: 1;\n      margin-left: 15px;\n    }\n    &__line{\n      height: 20px;\n      background: #eaeaea;\n    }\n  }\n"]);return G=function(){return e},e}function Q(){var e=Object(m.a)(["\n  font-family: industry;\n  font-size: 14px;\n"]);return Q=function(){return e},e}function L(){var e=Object(m.a)(["\n  color: #444;\n  font-size: 16px;\n  font-family: industry;\n"]);return L=function(){return e},e}function T(){var e=Object(m.a)(["\n  border: 0;\n  padding: 0;\n  width: 100%;\n  outline: none;\n  color: inherit;\n  font-size: inherit;\n  -webkit-appearance: none;\n  background: transparent;\n"]);return T=function(){return e},e}function Y(){var e=Object(m.a)(["\n  color: #fff;\n  font-size: 12px;\n  padding: 5px 10px;\n  line-height: 1.5;\n  border-radius: 3px;\n  background: #ccc;\n"]);return Y=function(){return e},e}function _(){var e=Object(m.a)(["\n  color: #fff;\n  font-size: 12px;\n  padding: 5px 10px;\n  line-height: 1.5;\n  border-radius: 3px;\n  background: -webkit-linear-gradient(47deg,#4cadff,#8ce0ff);\n"]);return _=function(){return e},e}function Z(){var e=Object(m.a)(["\n  color: #fff;\n  font-weight: bold;\n  font-size: 16px;\n  line-height: 50px;\n  border-radius: 3px;\n  background: #ccc;\n"]);return Z=function(){return e},e}function U(){var e=Object(m.a)(["\n  color: #fff;\n  font-size: 16px;\n  font-weight: bold;\n  line-height: 50px;\n  border-radius: 3px;\n  box-shadow: 0 3px 5px rgba(76, 173, 255, .54);\n  background: -webkit-linear-gradient(47deg,#4cadff,#8ce0ff);\n"]);return U=function(){return e},e}function H(){var e=Object(m.a)(["\n  border: 0;\n  padding: 0;\n  width: 100%;\n  outline: none;\n  display: block;\n  background: transparent;\n"]);return H=function(){return e},e}var V=f.a.button(H()),W=Object(f.a)(V)(U()),J=Object(f.a)(V)(Z()),P=Object(f.a)(V)(_()),K=Object(f.a)(V)(Y()),X=f.a.input(T()),q=Object(f.a)(X)(L()),$=Object(f.a)(X)(Q()),ee=f.a.div(G()),ne=100,ae=5e6,te={jsIcon:O.a,zsIcon:F.a,gsIcon:M.a},re=function(){return b.a.createElement("div",{className:"loading"},b.a.createElement("div",{className:"loading__head"}),b.a.createElement("div",{className:"loading__main"},b.a.createElement("div",{className:"loading__line",style:{width:"50%",marginBottom:10}}),b.a.createElement("div",{className:"loading__line"})))},ce=function(e){var n=e.flag,a=e.timer,t=e.handleClick;return n?b.a.createElement(P,{onClick:t},"\u83b7\u53d6\u9a8c\u8bc1\u7801"):b.a.createElement(K,null,a,"\u79d2\u540e\u91cd\u53d1")},ie=function(e){var n=e.pass,a=e.handleSubmit;return n?b.a.createElement(W,{onClick:a},"\u786e\u8ba4\u8d4e\u56de"):b.a.createElement(J,null,"\u786e\u8ba4\u8d4e\u56de")},se=function(e){var n=e.logo,a=e.bankcardNo,t=e.bankcardName;return b.a.createElement("div",{className:"bankcard"},b.a.createElement("div",{className:"aside"},b.a.createElement("img",{className:"icon",src:n,alt:""})),b.a.createElement("div",{className:"main",style:{marginLeft:15}},b.a.createElement("p",{className:"name"},t,"(\u5c3e\u53f7",b.a.createElement("span",{className:"card"},x.a.getBankcardLastNum(a)),")"),b.a.createElement("p",{className:"text"},"\u9884\u8ba1\u4e0b\u4e00\u5de5\u4f5c\u65e5\u5230\u8d26\uff0c\u5b9e\u9645\u4ee5\u94f6\u884c\u5230\u8d26\u65e5\u4e3a\u51c6")))},oe=function(e){var n=e.loading,a=e.hasBankcard,t=e.bankcardLogo,r=e.bankcardNo,c=e.bankcardName;return n?b.a.createElement(re,null):a?b.a.createElement(se,{logo:t,bankcardNo:r,bankcardName:c}):b.a.createElement("div",{className:"empty"},"\u6682\u65e0\u53ef\u7528\u94f6\u884c\u5361")},le=function(e){var n=e.agreementFlag;return b.a.createElement("img",{className:"checkbox",src:n?B.a:j.a})},de=function(e){function n(){var e,a;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),u=0;u<r;u++)o[u]=arguments[u];return(a=Object(l.a)(this,(e=Object(d.a)(n)).call.apply(e,[this].concat(o)))).state={integral:"",availableIntegral:0,smsCode:"",pass:!1,loading:!0,hasBankcard:!1,agreementFlag:!0,bankcardList:[],bankcardNo:"",bankcardName:"",bankcardLogo:"",timer:60,sendMsgCodeFlag:!0,phone:"",redeemFee:0,actualReceived:0,deductIntegral:0},a.loadBankcardList=Object(i.a)(c.a.mark(function e(){var n,t;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.getBankcardList();case 2:n=e.sent,t=n.data,a.setState({loading:!1}),200===t.status&&a.setState({bankcardList:t.data},function(){var e=t.data[0];e&&a.setCurrBankcard(e.bankCard,e.bankName,e.bankCode)});case 6:case"end":return e.stop()}},e)})),a.loadUserInfo=Object(i.a)(c.a.mark(function e(){var n,t;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.getUserInfo();case 2:n=e.sent,200===(t=n.data).status&&a.setState({availableIntegral:t.data[0].balance,phone:t.data[0].userPhoneNo});case 5:case"end":return e.stop()}},e)})),a.setCurrBankcard=function(e,n,t){a.setState({bankcardNo:e,bankcardName:n,bankcardLogo:te[t]||z.a},function(){a.setState({hasBankcard:!0})})},a.handleClick=function(e){if(!a.state.bankcardList.length)return!1;h.a.picker(x.a.parseBankcardList(a.state.bankcardList),{defaultValue:[0],onConfirm:function(e){e&&e[0]&&a.setCurrBankcard(e[0].bankcardNo,e[0].bankcardName,e[0].bankcardClass)}})},a.handleToggle=function(e){a.setState({agreementFlag:!a.state.agreementFlag},function(){a.updateSubmitBtnStatus()})},a.handleChange=function(e){a.setState(Object(t.a)({},e.target.name,e.target.value),function(){a.updateSubmitBtnStatus()})},a.handleBlur=function(){var e=Object(i.a)(c.a.mark(function e(n){var t,r;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.getRedeemFee(a.state.integral||0);case 2:t=e.sent,200===(r=t.data).status&&a.updateFee(r.data);case 5:case"end":return e.stop()}},e)}));return function(n){return e.apply(this,arguments)}}(),a.updateFee=function(e){var n=e.poundage,t=e.money,r=e.totalAmount;a.setState({redeemFee:n,actualReceived:t,deductIntegral:r})},a.updateSubmitBtnStatus=function(){var e=!0;a.state.integral<ne&&(e=!1),a.state.integral>ae&&(e=!1),a.state.bankcardNo||(e=!1),a.state.smsCode||(e=!1),a.state.agreementFlag||(e=!1),a.setState({pass:e})},a.handleSubmit=function(e){x.a.paymentConfirm({title:"\u5145\u503c",subtitle:"\u58f9\u4f01\u670d",amount:a.state.integral,useable:a.state.availableIntegral,callback:function(e,n){if(!n.value)return!1;a.submitRedeem(n.value)}})},a.submitRedeem=function(){var e=Object(i.a)(c.a.mark(function e(n){var t,r,i,s;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=h.a.loading("\u5904\u7406\u4e2d"),r={amount:a.state.integral,bankCard:"6227007200230197008",bankCode:0,bankName:"\u5efa\u8bbe\u94f6\u884c",cardHoldName:"\u9ad8\u5f3a",cardPhoneNo:"15014095291",tradPwd:n,code:a.state.smsCode},e.prev=2,e.next=5,v.a.redeemIntegral(r);case 5:i=e.sent,200===(s=i.data).status?h.a.alert(s.msg,function(){Object(E.b)("/redeem-record")}):1017===s.status?x.a.confirmRetry("\u5bc6\u7801\u9519\u8bef",function(){a.retryTransPswd()}):h.a.alert(s.msg);case 8:return e.prev=8,t.hide(),e.finish(8);case 11:case"end":return e.stop()}},e,null,[[2,,8,11]])}));return function(n){return e.apply(this,arguments)}}(),a.retryTransPswd=function(){a.handleSubmit()},a.countDown=function(){a.state.timer>0?setTimeout(function(){a._isMounted&&a.setState({timer:a.state.timer-1},function(){a.countDown()})},1e3):a.resetMessageState()},a.resetMessageState=function(){a.setState({timer:10,sendMsgCodeFlag:!0})},a.getMsgCode=Object(i.a)(c.a.mark(function e(){var n,t,r,i;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=h.a.loading("\u53d1\u9001\u4e2d"),t={userPhoneNo:"15014095291",codeType:3},a._isMounted=!0,e.next=5,v.a.getCode(t);case 5:if(r=e.sent,200!==(i=r.data).status){e.next=12;break}if(a._isMounted){e.next=10;break}return e.abrupt("return");case 10:a.setState({sendMsgCodeFlag:!1},function(){a.countDown()}),h.a.alert(i.msg);case 12:n.hide();case 13:case"end":return e.stop()}},e)})),a}return Object(u.a)(n,e),Object(o.a)(n,[{key:"componentDidMount",value:function(){this.loadUserInfo(),this.loadBankcardList()}},{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"render",value:function(){var e=this.state,n=e.pass,a=e.loading,t=e.agreementFlag,r=e.hasBankcard,c=e.bankcardNo,i=e.bankcardName,s=e.bankcardLogo,o=e.sendMsgCodeFlag,l="\u6700\u591a\u53ef\u8d4e\u56de".concat(this.state.availableIntegral);return b.a.createElement(ee,null,b.a.createElement("div",{className:"u_mb_xxx"},b.a.createElement("div",{className:"trigger-bar"},b.a.createElement("label",null,"\u8f6c\u5165\u94f6\u884c\u5361"),b.a.createElement("img",{className:"icon",onClick:this.handleClick,src:w.a,alt:"\u7bad\u5934"}))),b.a.createElement("div",{className:"u_mb_xxx"},b.a.createElement(oe,{loading:a,hasBankcard:r,bankcardLogo:s,bankcardNo:c,bankcardName:i})),b.a.createElement("div",{className:"u_mb_x"},b.a.createElement("div",{className:"input-box"},b.a.createElement(q,{type:"number",name:"integral",value:this.state.integral,onChange:this.handleChange,onBlur:this.handleBlur,placeholder:l}))),b.a.createElement("div",{className:"u_mb_xxx"},b.a.createElement("div",{className:"small-text"},b.a.createElement("p",null,"\u6263\u9664",this.state.deductIntegral,"\u79ef\u5206"),b.a.createElement("p",null,"\u5b9e\u9645\u5230\u8d26",this.state.actualReceived,"\u5143(\u624b\u7eed\u8d39",this.state.redeemFee,"\u79ef\u5206\uff0c100\u79ef\u5206\u7b49\u4e8e1\u5143)"))),b.a.createElement("div",{className:"u_mb_xxx"},b.a.createElement("div",{className:"group"},b.a.createElement("div",{className:"group__body"},b.a.createElement($,{type:"text",name:"smsCode",value:this.state.smsCode,onChange:this.handleChange,placeholder:"\u8bf7\u8f93\u5165\u77ed\u4fe1\u9a8c\u8bc1\u7801"})),b.a.createElement("div",{className:"group__foot"},b.a.createElement(ce,{flag:o,timer:this.state.timer,handleClick:this.getMsgCode})))),b.a.createElement("div",{className:"u_mb_xxx"},b.a.createElement("div",{className:"small-text flex-y-center",onClick:this.handleToggle},b.a.createElement(le,{agreementFlag:t}),"\u540c\u610f\u7528\u6237",b.a.createElement(k.a,{to:"/redeen-agreement",style:{color:"#007AFF"}},"\u300a\u8d4e\u56de\u89c4\u5219\u534f\u8bae\u300b"))),b.a.createElement(ie,{pass:n,handleSubmit:this.handleSubmit}),b.a.createElement(N.a,null))}}]),n}(g.Component);n.default=de}}]);
//# sourceMappingURL=12.47fb16db.chunk.js.map