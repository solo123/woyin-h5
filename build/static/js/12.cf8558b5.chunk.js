(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{495:function(e,t,a){e.exports=a.p+"static/media/banner.c6b6b97b.jpg"},496:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAD4AAAA+CAYAAABzwahEAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMDY3IDc5LjE1Nzc0NywgMjAxNS8wMy8zMC0yMzo0MDo0MiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTUgKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjI5OEQyNDIxNUMwOTExRTlCMzlBRDEwNjEwQjU5RkFGIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjI5OEQyNDIyNUMwOTExRTlCMzlBRDEwNjEwQjU5RkFGIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6Mjk4RDI0MUY1QzA5MTFFOUIzOUFEMTA2MTBCNTlGQUYiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6Mjk4RDI0MjA1QzA5MTFFOUIzOUFEMTA2MTBCNTlGQUYiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz4w/prlAAAClklEQVR42uSbvS5EQRTH7c0WCg+g8QQUEmofDZFoFD6WXfECOjR6jaXAA7gz8RGEQqIgsRKNF6BQikZLaCTWmbg3uRlzv2fOzJ17kn9yd3aL+9tz/ueemexW2usdZYzdagmhL0GTTsmgKYMGfZUJnIDq3vV3WcBdUCPwulIG8H3QIr9YLUF5N0Rv2AxOA57+F47Fma5HfcBGcDesvG0Gd0WNzHaP07jytjHjJA20LeCJPG0beGJP2+RxkiXTRQenaT1tQ6m7eaGLCJ7Z00UGlwZdJI9TGeVdtIwT2dBFAM80nBQdXKqni+JxoirTJoNTFZ42vdRdDGjTwJV62lRwVGhTPE6xytukjBMd0LrBlQ0nJoOje9oEj1Nd5a0z48QEaGxwrZ7WBb6P7Gn2y55t3R4nyJneAm141z2gaR0ZpxqgVwKvZ0Gf2ODYjWyTg2ZxAerELHXsRtYErXFrd6BhzOYWNpz8gIbimk7G8l7l1m6joFVkPGw4eQLNgB5B96Bu0LwCT/vQo5iPsyhPv3nQfiyAjhRAt5JAywSP8zS7mXNubT4HfFMAzTw9gjnAJN1wTIEOBPDHEjzdivO0bHCSciJjoIfcWi1F5sPKeyTtjecBzzqciEBFX4gy6DzgeU9D5wSgCxHwe3k9LQNc1iFCLQSe9/wNaDnNcKICXPbJSU3Q8NjamXd9DRrL28jyglNFW0vRY23a22CMy/J0VnDVGw6R509UQScFx9pwiMpeSiMTRJeD7OkkZX+gwtNcvFYNOjkJwvd6Da5fcqb9OK6E/O/MiCNghdHnKBhOTI9TtlN0NHsaOz5AS3xXtx36HTQI+vLBma4sh2YzwQDo2V9gXX0HNOGVQdsi2JeOv2Mu9nR64N/8FWAAqYCNrww7EU0AAAAASUVORK5CYII="},542:function(e,t,a){"use strict";a.r(t);var n=a(369),r=a.n(n),i=a(370),s=a(58),l=a(59),c=a(62),o=a(60),u=a(61),d=a(115),p=a(1),h=a.n(p),m=a(367),b=a.n(m),g=a(113),v=a.n(g),f=a(368),y=a(364),I=a(116),x=a(402),T=a(371),k=a(365),w=a(375),S=a.n(w),A=a(414),E=a.n(A),N=a(415),j=a.n(N),O=a(416),C=a.n(O),G={2:E.a,3:j.a,4:C.a};function R(e){var t=e.id,a=e.type,n=e.name,r=e.handleToggleType,i=S()({active:t===a});return h.a.createElement("li",{className:i,onClick:function(){return r(t)}},h.a.createElement("img",{className:"icon",src:G[t],alt:""}),n)}var B=function(e){var t=e.items,a=e.type,n=e.handleToggleType;return h.a.createElement("ul",{className:"nav"},t.map(function(e){return h.a.createElement(R,{key:e.productClassifyId,type:a,id:e.productClassifyId,name:e.productClassifyName,handleToggleType:n})}))},z=a(362),M=a(363),Q=a(495),U=a.n(Q),D=a(496),J=a.n(D);function Z(){var e=Object(z.a)(["\n\n  header{\n    padding: 110px 15px 0 15px;\n    background: url(",") center top no-repeat;\n    background-size: 100%;\n    margin-bottom: 15px;\n    .nav{\n      display: flex;\n      background: #fff;\n      border-radius: 3px;\n      box-shadow: 0 1px 3px rgba(26,26,26,.1);\n      li{\n        flex: 1;\n        position: relative;\n        text-align: center;\n        padding: 15px 0;\n        font-size: 15px;\n        &.active{\n          color: #ff7b00;\n          &:after{\n            content: '';\n            position: absolute;\n            left: 50%;\n            bottom: 3px;\n            transform: translate(-50%);\n            height: 2px;\n            width: 60px;\n            background: #ff7b00;\n          }\n        }\n        .icon{\n          display: block;\n          width: 35px;\n          margin: 0 auto 5px;\n        }\n      }\n    }\n  }\n  .main{\n    margin: 0 15px;\n    border-radius: 5px;\n    overflow: hidden;\n    background: #fff;\n    .input-box{\n      padding: 12px;\n      border: 1px solid #ff7b00;\n    }\n    .items{\n      display: flex;\n      flex-wrap: wrap;\n      margin: 0 10px;\n      .item{\n        width: 33.33%;\n        padding: 5px;\n        &__inner{\n          position: relative;\n          text-align: center;\n          padding: 10px;\n          border-radius: 2px;\n          border: 1px solid #eaeaea;\n          &.active{\n            border-color: #ff7b00;\n            &:after{\n              content: '';\n              position: absolute;\n              bottom: 0;\n              right: 0;\n              background: url(",") center top no-repeat;\n              background-size: 100%;\n              width: 20px;\n              height: 20px;\n            }\n          }\n        }\n        &__money{\n          font-size: 16px;\n          font-weight: bold;\n        }\n        &__integral{\n          color: #7a7a7a;\n          font-size: 12px;\n        }\n      }\n    }\n  }\n"]);return Z=function(){return e},e}var Y=M.a.div(Z(),U.a,J.a);function F(e){var t=e.id,a=e.selectId,n=e.money,r=e.integral,i=e.handleSelect,s=S()("item__inner",{active:t===a});return h.a.createElement("div",{className:"item"},h.a.createElement("div",{className:s,onClick:i},h.a.createElement("div",{className:"item__money"},n,"\u5143"),h.a.createElement("div",{className:"item__integral"},r,"\u79ef\u5206")))}var P=function(e){var t=e.selectId,a=e.items,n=e.handleSelect;return h.a.createElement("div",{className:"items"},a.map(function(e){var a=(Number(e.disCount)/10).toFixed(2);return h.a.createElement(F,{key:e.productId,id:e.productId,selectId:t,money:e.salesPrice,integral:e.productCostBalance*a,handleSelect:function(){return n(e.productId,e.productCostBalance*a)}})}))},L=b.a.CancelToken;function W(e){var t=e.loading,a=e.selectId,n=e.items,r=e.handleSelect;return t?h.a.createElement(x.a,null):n.length?h.a.createElement(P,{selectId:a,items:n,handleSelect:r}):h.a.createElement(T.a,null)}function H(e){var t=e.pass,a=e.handleSubmit;return t?h.a.createElement("button",{className:"btn btn-quartus",onClick:a},"\u7acb\u5373\u5145\u503c"):h.a.createElement("button",{className:"btn btn-quartus disable",onClick:a},"\u7acb\u5373\u5145\u503c")}var V="13",X=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(c.a)(this,Object(o.a)(t).call(this,e))).handleChange=a.handleChange.bind(Object(d.a)(Object(d.a)(a))),a.handleSubmit=a.handleSubmit.bind(Object(d.a)(Object(d.a)(a))),a.handleToggleType=a.handleToggleType.bind(Object(d.a)(Object(d.a)(a))),a.handleSelect=a.handleSelect.bind(Object(d.a)(Object(d.a)(a))),a.state={pass:!1,items:[],skeletonLoading:!1,qq:"",chargeType:"2",selectId:"",type:V,operators:[],integral:0,availableIntegral:0},a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){I.a.addClass(document.body,"qq");var e=this.props.history.location.state.id;this.loadUserInfo(),this.loadOperatorById(e),this.loadProdcutsByType(this.state.type)}},{key:"componentWillUnmount",value:function(){I.a.removeClass(document.body,"qq"),this.loadUserInfoSource.cancel("Operation canceled by the user."),this.loadOperatorSource.cancel("Operation canceled by the user."),this.loadProdcutsSource.cancel("Operation canceled by the user.")}},{key:"loadUserInfo",value:function(){var e=Object(i.a)(r.a.mark(function e(){var t,a;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.loadUserInfoSource=L.source(),e.prev=1,e.next=4,y.e.getUserInfo(null,{cancelToken:this.loadUserInfoSource.token});case 4:t=e.sent,200===(a=t.data).status&&this.setState({availableIntegral:Number(a.data[0].balance)});case 7:return e.prev=7,e.finish(7);case 9:case"end":return e.stop()}},e,this,[[1,,7,9]])}));return function(){return e.apply(this,arguments)}}()},{key:"loadOperatorById",value:function(){var e=Object(i.a)(r.a.mark(function e(t){var a,n;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.loadOperatorSource=L.source(),e.prev=1,e.next=4,Object(y.v)(t,{cancelToken:this.loadOperatorSource.token});case 4:a=e.sent,200===(n=a.data).status&&this.setState({operators:n.data});case 7:return e.prev=7,e.finish(7);case 9:case"end":return e.stop()}},e,this,[[1,,7,9]])}));return function(t){return e.apply(this,arguments)}}()},{key:"loadProdcutsByType",value:function(){var e=Object(i.a)(r.a.mark(function e(t){var a,n;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({skeletonLoading:!0}),this.loadProdcutsSource=L.source(),e.prev=2,e.next=5,y.e.getRechargePhoneProductsByType(t,{cancelToken:this.loadProdcutsSource.token});case 5:a=e.sent,200===(n=a.data).status&&this.setState({items:n.data});case 8:return e.prev=8,this.setState({skeletonLoading:!1}),e.finish(8);case 11:case"end":return e.stop()}},e,this,[[2,,8,11]])}));return function(t){return e.apply(this,arguments)}}()},{key:"doSubmit",value:function(){var e=Object(i.a)(r.a.mark(function e(t){var a,n,i,s,l=this;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=v.a.loading("\u5904\u7406\u4e2d"),n={chargeAddr:this.state.qq,chargeType:this.state.chargeType,productId:this.state.selectId,tranPwd:t},e.prev=2,e.next=5,Object(y.H)(n);case 5:i=e.sent,200===(s=i.data).status?v.a.alert(s.msg):1017===s.status?I.a.confirmRetry("\u5bc6\u7801\u9519\u8bef",function(){l.retryTransPswd()}):v.a.alert(s.msg);case 8:return e.prev=8,a.hide(),e.finish(8);case 11:case"end":return e.stop()}},e,this,[[2,,8,11]])}));return function(t){return e.apply(this,arguments)}}()},{key:"retryTransPswd",value:function(){this.handleSubmit()}},{key:"updateBtnStatus",value:function(){this.state.qq&&this.state.selectId&&this.state.integral<=this.state.availableIntegral?this.setState({pass:!0}):this.setState({pass:!1})}},{key:"reset",value:function(){var e=this;this.setState({selectId:""},function(){e.updateBtnStatus()})}},{key:"handleToggleType",value:function(e){var t=this;if(e!==this.state.type){this.reset();var a="13"===e?"2":"3";this.setState({type:e,chargeType:a},function(){t.loadProdcutsByType(e)})}}},{key:"handleSelect",value:function(e,t){var a=this;this.setState({selectId:e,integral:t},function(){a.updateBtnStatus()})}},{key:"handleChange",value:function(e){var t=this;this.setState({qq:e.target.value},function(){t.updateBtnStatus()})}},{key:"handleSubmit",value:function(){var e=this;this.state.qq?this.state.selectId?this.state.integral>this.state.availableIntegral?v.a.alert("\u79ef\u5206\u4e0d\u8db3"):I.a.paymentConfirm({title:"\u5145\u503c",amount:this.state.integral,useable:this.state.availableIntegral,callback:function(t,a){if(!a.value)return!1;e.doSubmit(a.value)}}):v.a.alert("\u8bf7\u9009\u62e9\u4ea7\u54c1"):v.a.alert("\u8bf7\u8f93\u5165QQ\u53f7")}},{key:"render",value:function(){var e=this.state,t=e.selectId,a=e.type,n=e.items,r=e.operators,i=e.skeletonLoading,s=e.pass;return h.a.createElement(Y,null,h.a.createElement(f.Helmet,{defaultTitle:"\u6c83\u94f6\u4f01\u670d",title:"Q\u5e01\u5145\u503c"}),h.a.createElement("header",null,h.a.createElement(B,{type:a,items:r,handleToggleType:this.handleToggleType})),h.a.createElement("main",{className:"main"},h.a.createElement("div",{className:"u_p_xxx"},h.a.createElement("div",{className:"input-box"},h.a.createElement("input",{type:"number",className:"input input-primary",value:this.state.qq,onChange:this.handleChange,placeholder:"\u8bf7\u8f93\u5165QQ\u53f7",autoComplete:"off"}))),h.a.createElement("h2",{className:"u_mx_xxx u_mb_x"},"\u5145Q\u5e01"),h.a.createElement(W,{loading:i,selectId:t,items:n,handleSelect:this.handleSelect}),h.a.createElement("div",{className:"u_p_xxx"},h.a.createElement(H,{pass:s,handleSubmit:this.handleSubmit}))),h.a.createElement(k.a,null))}}]),t}(p.Component);a.d(t,"view",function(){return X})}}]);
//# sourceMappingURL=12.cf8558b5.chunk.js.map