{"version":3,"sources":["asset/images/recharge/checked.png","asset/images/recharge/banner.png","pages/charge/RechargeTraffic/views/Nav.js","pages/charge/RechargeTraffic/views/List.js","pages/charge/RechargeTraffic/views/styled.js","pages/charge/RechargeTraffic/views/Traffic.js","pages/charge/RechargeTraffic/index.js"],"names":["module","exports","__webpack_require__","p","ICON_SCHEMA","6","cmcc","7","cucc","8","ctcc","Item","_ref","id","currId","name","handleToggleType","itemClass","classnames","active","external_React_default","a","createElement","className","onClick","src","alt","Nav","_ref2","items","map","item","key","productClassifyId","productClassifyName","productId","money","integral","handleSelect","itemInnerClass","List","Number","productCostBalance","disCount","List_Item","salesPrice","styled","div","_templateObject","checked","CancelToken","axios","Product","loading","ProductSkeleton","length","views_List","EmptyArrayPlaceholder","_default","props","_this","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","handleChange","bind","assertThisInitialized","handleSubmit","state","operators","skeletonLoading","phone","availableIntegral","_this2","history","location","loadUserInfo","loadOperatorById","then","setState","loadProdcutsByType","loadUserInfoSource","cancel","loadOperatorSource","loadProdcutsSource","source","getUserInfo","cancelToken","token","data","status","balance","getProducts","getSubProducts","params","weui","rechargeTraffic","replace","type","title","msg","util","confirmRetry","_this3","retryTransPswd","alert","hide","_this4","reset","e","defineProperty","target","value","_this5","verify","paymentConfirm","amount","useable","callback","inputElem","tranPwd","doSubmit","_this$state","Helmet","banner","views_Nav","onChange","placeholder","autoComplete","Backhome","Component","d","__webpack_exports__","Traffic_default"],"mappings":"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","file":"static/js/9.d02bb8b5.chunk.js","sourcesContent":["module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAD4AAAA+CAYAAABzwahEAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMDY3IDc5LjE1Nzc0NywgMjAxNS8wMy8zMC0yMzo0MDo0MiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6QTNGN0U4RTM1QzQwMTFFOUFERkZBNkQ1NkUxQzk4RDkiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6QTNGN0U4RTI1QzQwMTFFOUFERkZBNkQ1NkUxQzk4RDkiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTUgKFdpbmRvd3MpIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6Mjk4RDI0MjE1QzA5MTFFOUIzOUFEMTA2MTBCNTlGQUYiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6Mjk4RDI0MjI1QzA5MTFFOUIzOUFEMTA2MTBCNTlGQUYiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz5aBO+DAAABSElEQVR42uTbSQ7DIAwF0Pqrx+ipe2FXkZpF1ckJnuAjJSsQfkIMASK3u14Ik4IRvb3AiGaDv/RpMKJZ4B9HbzCiV4f/nKfBiF4VblqRgRG9GvzQ2huM6FXgp76ywIieHT70PQ1G9Kxwl50TMKJng7vukYERPQs8ZDcUjOju8NB9bzCiu8JTTjjAiO4GTz3LAiO6C7zk1BKM6Gp46fk0GNFV8BY3EcCIzoa3unMCRnQWvAItz6cMXoUubfG26Eh4B3T6xYD26Ai4GgKUarQ3XA8EKJVoT7ieyCNVaC+4DuSVCrQHXB3KSDZ6FK6OZSUTPQLXgC4iWeizcM952ooX7xhQiLbiJSIGFKP/4SUqBjRAW1s+/WJA5tpbs2JAI/S3OkNiuDZDp9WNhuiUBEb0NnCCEP3W4ixo2Qc3pp9LxTKqLwne00OAAQA6hVn4c+aVigAAAABJRU5ErkJggg==\"","module.exports = __webpack_public_path__ + \"static/media/banner.c86d7444.png\";","import React from 'react'\r\nimport classnames from 'classnames'\r\n\r\nimport cmcc from '@/asset/images/recharge/cmcc.png'\r\nimport cucc from '@/asset/images/recharge/cucc.png'\r\nimport ctcc from '@/asset/images/recharge/ctcc.png'\r\n\r\nconst ICON_SCHEMA = {\r\n  '6': cmcc,\r\n  '7': cucc,\r\n  '8': ctcc\r\n}\r\n\r\nfunction Item({id, currId, name, handleToggleType}) {\r\n  const itemClass = classnames({'active': id === currId})\r\n  return (\r\n    <li \r\n      className={itemClass} \r\n      onClick={() => handleToggleType(id)}\r\n    >\r\n      <img className=\"icon\" src={ICON_SCHEMA[id]} alt=\"\"/>\r\n      {name}\r\n    </li>\r\n  )\r\n}\r\n\r\nfunction Nav({items, currId, handleToggleType}) {\r\n  return (\r\n    <ul className=\"nav\">\r\n      {items.map(item => (\r\n        <Item\r\n          key={item.productClassifyId} \r\n          currId={currId}\r\n          id={item.productClassifyId}\r\n          name={item.productClassifyName}\r\n          handleToggleType={handleToggleType}\r\n        />\r\n      ))}\r\n    </ul>\r\n  )\r\n}\r\n\r\nexport default Nav","import React from 'react'\r\nimport classnames from 'classnames'\r\n\r\nfunction Item({id, productId, money, integral, handleSelect}) {\r\n  const itemInnerClass = classnames('item__inner', {'active': id === productId})\r\n  return (\r\n    <div className=\"item\">\r\n      <div className={itemInnerClass} onClick={handleSelect}>\r\n        <div className=\"item__money\">{money}元</div>\r\n        <div className=\"item__integral\">{integral}积分</div>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nfunction List({productId, items, handleSelect}) {\r\n  return (\r\n    <div className=\"items\">\r\n      {items.map(item => {\r\n        const integral = Number(item.productCostBalance) * Number(item.disCount)\r\n        return (\r\n          <Item\r\n            key={item.productId}\r\n            id={item.productId}\r\n            productId={productId}\r\n            money={item.salesPrice}\r\n            integral={integral}\r\n            handleSelect={() => handleSelect(item.productId, integral)}\r\n          />\r\n        )\r\n      })}\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default List","import styled from 'styled-components'\r\n\r\nimport checked from '@/asset/images/recharge/checked.png'\r\n\r\nexport default styled.div`\r\n  header{\r\n    margin-bottom: 15px;\r\n    .nav-box{\r\n      position: relative;\r\n      margin: -70px 15px 0 15px;\r\n    }\r\n    .nav{\r\n      display: flex;\r\n      background: #fff;\r\n      border-radius: 3px;\r\n      box-shadow: 0 1px 3px rgba(26,26,26,.1);\r\n      li{\r\n        flex: 1;\r\n        position: relative;\r\n        text-align: center;\r\n        padding: 15px 0;\r\n        font-size: 15px;\r\n        &.active{\r\n          color: #1c92ff;\r\n          &:after{\r\n            content: '';\r\n            position: absolute;\r\n            left: 50%;\r\n            bottom: 3px;\r\n            transform: translate(-50%);\r\n            height: 2px;\r\n            width: 60px;\r\n            background: #1c92ff;\r\n          }\r\n        }\r\n        .icon{\r\n          display: block;\r\n          width: 35px;\r\n          margin: 0 auto 5px;\r\n        }\r\n      }\r\n    }\r\n  }\r\n  .main{\r\n    background: #fff;\r\n    .input-box{\r\n      padding: 15px;\r\n      background: #eaeaea;\r\n    }\r\n    .items{\r\n      display: flex;\r\n      flex-wrap: wrap;\r\n      margin: 0 10px;\r\n      .item{\r\n        width: 33.33%;\r\n        padding: 5px;\r\n        .item__inner{\r\n          position: relative;\r\n          text-align: center;\r\n          padding: 10px;\r\n          border-radius: 2px;\r\n          border: 1px solid #eaeaea;\r\n          &.active{\r\n            color: #3b8afc;\r\n            border-color: #3b8afc;\r\n            &:after{\r\n              content: '';\r\n              position: absolute;\r\n              bottom: 0;\r\n              right: 0;\r\n              background: url(${checked}) center top no-repeat;\r\n              background-size: 100%;\r\n              width: 20px;\r\n              height: 20px;\r\n            }\r\n          }\r\n          &__money{\r\n            font-size: 16px;\r\n            font-weight: bold;\r\n            margin-bottom: 5px;\r\n          }\r\n          &__integral{\r\n            font-size: 12px;\r\n          }\r\n        }\r\n      }\r\n\r\n    }\r\n  }\r\n`","import React, {Component} from 'react'\r\nimport axios from 'axios'\r\nimport weui from 'weui.js'\r\nimport {Helmet} from \"react-helmet\"\r\n\r\nimport util from '@/util'\r\nimport {replace} from '@/services/redirect'\r\nimport {getUserInfo, getProducts, getSubProducts, rechargeTraffic} from '@/api'\r\n\r\nimport ProductSkeleton from '@/components/ProductSkeleton'\r\nimport EmptyArrayPlaceholder from '@/components/EmptyArrayPlaceholder'\r\nimport Backhome from '@/components/Backhome'\r\nimport Nav from './Nav'\r\nimport List from './List'\r\nimport Page from './styled'\r\n\r\nimport banner from '@/asset/images/recharge/banner.png'\r\n\r\nconst CancelToken = axios.CancelToken\r\n\r\nfunction Product({loading, productId, items, handleSelect}) {\r\n  if(loading) {\r\n    return <ProductSkeleton/>\r\n  }\r\n  if(items.length) {\r\n    return <List productId={productId} items={items} handleSelect={handleSelect}/>\r\n  }\r\n  return <EmptyArrayPlaceholder />\r\n}\r\n\r\nexport default class extends Component {\r\n  constructor(props) {\r\n    super(props)\r\n\r\n    this.handleChange = this.handleChange.bind(this)\r\n    this.handleSubmit = this.handleSubmit.bind(this)\r\n    this.handleToggleType = this.handleToggleType.bind(this)\r\n    this.handleSelect = this.handleSelect.bind(this)\r\n\r\n    this.state = {\r\n      currId: '',\r\n      items: [],\r\n      operators: [],\r\n      skeletonLoading: false,\r\n\r\n      phone: '',\r\n      productId: '',\r\n\r\n      integral: 0,\r\n      availableIntegral: 0\r\n    }\r\n  }\r\n\r\n  componentDidMount() {\r\n    const {id} = this.props.history.location.state\r\n    this.loadUserInfo()\r\n    this.loadOperatorById(id)\r\n      .then(() => {\r\n        const {productClassifyId} = this.state.operators[0]\r\n        if(!productClassifyId){return}\r\n        this.setState({\r\n          currId: productClassifyId\r\n        }, () => {\r\n          this.loadProdcutsByType(productClassifyId)\r\n        })\r\n      })\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    this.loadUserInfoSource.cancel('Operation canceled by the user.')\r\n    this.loadOperatorSource.cancel('Operation canceled by the user.')\r\n    this.loadProdcutsSource.cancel('Operation canceled by the user.')\r\n  }\r\n\r\n  async loadUserInfo() {\r\n    this.loadUserInfoSource = CancelToken.source()\r\n    try {\r\n      const {data} = await getUserInfo(null, {cancelToken: this.loadUserInfoSource.token})\r\n      if(data.status === 200) {\r\n        this.setState({availableIntegral: Number(data.data[0].balance)})\r\n      }\r\n    }finally {\r\n    }\r\n  }\r\n\r\n  async loadOperatorById(id) {\r\n    this.loadOperatorSource = CancelToken.source()\r\n    try {\r\n      const {data} = await getProducts(id, {cancelToken: this.loadOperatorSource.token})\r\n      if(data.status === 200) {\r\n        this.setState({operators: data.data})\r\n      }\r\n    }finally {\r\n    }\r\n  }\r\n\r\n  async loadProdcutsByType(id) {\r\n    this.setState({skeletonLoading: true})\r\n    this.loadProdcutsSource = CancelToken.source()\r\n    try {\r\n      const {data} = await getSubProducts(id, {cancelToken: this.loadProdcutsSource.token})\r\n      if(data.status === 200) {\r\n        this.setState({items: data.data})\r\n      }\r\n    }finally {\r\n      this.setState({skeletonLoading: false})\r\n    }\r\n  }\r\n\r\n  async doSubmit(params) {\r\n    const loading = weui.loading('处理中')\r\n    try {\r\n      const {data} = await rechargeTraffic(params)\r\n      if(data.status === 200) {\r\n        replace('/result', {type: 'success', title: data.msg})\r\n      }else if(data.status === 1017) {\r\n        util.confirmRetry('密码错误', () => {\r\n          this.retryTransPswd()\r\n        })\r\n      }else {\r\n        weui.alert(data.msg)\r\n      }\r\n    }finally {\r\n      loading.hide()\r\n    }\r\n  }\r\n\r\n  retryTransPswd() {\r\n    this.handleSubmit()\r\n  }\r\n\r\n  reset() {\r\n    this.setState({productId: ''})\r\n  }\r\n\r\n  handleToggleType(id) {\r\n    if(id === this.state.currId) {return}\r\n    this.reset()\r\n    this.setState({currId: id}, () => {\r\n      this.loadProdcutsByType(id)\r\n    })\r\n  }\r\n\r\n  handleSelect(productId, integral) {\r\n    this.setState({productId, integral})\r\n  }\r\n\r\n  handleChange(e) {\r\n    this.setState({[e.target.name]: e.target.value})\r\n  }\r\n\r\n  verify() {\r\n    if(!this.state.phone) {\r\n      weui.alert('请输入手机号')\r\n      return\r\n    }\r\n    if(this.state.phone.length !== 11) {\r\n      weui.alert('请输入合法的手机号')\r\n      return\r\n    }    \r\n    if(!this.state.productId) {\r\n      weui.alert('请选择产品')\r\n      return\r\n    }\r\n    if(this.state.integral > this.state.availableIntegral) {\r\n      weui.alert('积分不足')\r\n      return\r\n    }   \r\n    return true\r\n  }\r\n\r\n  handleSubmit() {\r\n    if(!this.verify()) {\r\n      return\r\n    }\r\n\r\n    util.paymentConfirm({\r\n      title: '充值',\r\n      amount: this.state.integral,\r\n      useable: this.state.availableIntegral,\r\n      callback: (e, inputElem) => {\r\n        if(!inputElem.value) {return false}\r\n\r\n        const params = {\r\n          phone: this.state.phone,\r\n          productId: this.state.productId,\r\n          tranPwd: inputElem.value\r\n        }        \r\n        this.doSubmit(params)\r\n      }\r\n    })\r\n  }\r\n\r\n  render() {\r\n    const {productId, currId, items, operators, skeletonLoading} = this.state\r\n\r\n    return (\r\n      <Page>\r\n        <Helmet title=\"流量充值\"/>\r\n\r\n        <header>\r\n          <img src={banner} alt=\"\"/>\r\n          <div className=\"nav-box\">\r\n            <Nav currId={currId} items={operators} handleToggleType={this.handleToggleType} />\r\n          </div>\r\n        </header>\r\n\r\n        <main className=\"main\">\r\n\r\n           <div className=\"u_p_xxx\">\r\n            <div className=\"input-box\">\r\n              <input\r\n                className=\"input input-primary\" \r\n                type=\"number\" \r\n                name=\"phone\"\r\n                value={this.state.phone}\r\n                onChange={this.handleChange} \r\n                placeholder=\"请输入手机号\" \r\n                autoComplete=\"off\"\r\n              />\r\n            </div>\r\n          </div>\r\n\r\n          <h2 className=\"u_mx_xxx u_mb_x\">请选择面值</h2>\r\n          <Product loading={skeletonLoading} productId={productId} items={items} handleSelect={this.handleSelect} />\r\n\r\n          <div className=\"u_p_xxx\">\r\n            <button className=\"btn btn-secondary\" onClick={this.handleSubmit}>立即充值</button>\r\n          </div>\r\n        </main>\r\n\r\n        <Backhome />\r\n      </Page>\r\n    )\r\n  }\r\n}","import view from './views/Traffic'\r\n\r\nexport {view}"],"sourceRoot":""}