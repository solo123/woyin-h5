(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{436:function(e,a,t){e.exports=t.p+"static/media/fz.c5fa25d0.svg"},437:function(e,a,t){e.exports=t.p+"static/media/gd.ec8aa3f0.svg"},438:function(e,a,t){e.exports=t.p+"static/media/gs.1a3c4b01.svg"},439:function(e,a,t){e.exports=t.p+"static/media/hx.3be0e6ed.svg"},440:function(e,a,t){e.exports=t.p+"static/media/js.e2841921.svg"},441:function(e,a,t){e.exports=t.p+"static/media/jt.2f070f4e.svg"},442:function(e,a,t){e.exports=t.p+"static/media/ms.6ba37844.svg"},443:function(e,a,t){e.exports=t.p+"static/media/ny.03c59a46.svg"},444:function(e,a,t){e.exports=t.p+"static/media/pa.f286000e.svg"},445:function(e,a,t){e.exports=t.p+"static/media/sh.9c8b70e2.svg"},446:function(e,a,t){e.exports=t.p+"static/media/shfz.287d5328.svg"},447:function(e,a,t){e.exports=t.p+"static/media/xy.ab1bcf3e.svg"},448:function(e,a,t){e.exports=t.p+"static/media/yz.38c7462e.svg"},449:function(e,a,t){e.exports=t.p+"static/media/zg.1344157f.svg"},450:function(e,a,t){e.exports=t.p+"static/media/zs.132007da.svg"},451:function(e,a,t){e.exports=t.p+"static/media/zx.498ec56f.svg"},452:function(e,a,t){e.exports=t.p+"static/media/default.1caa3942.svg"},458:function(e,a,t){e.exports=t.p+"static/media/checked.5e6b7b3b.png"},510:function(e,a){e.exports="data:image/png;base64,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"},511:function(e,a,t){e.exports=t.p+"static/media/unchecked.519021c7.svg"},562:function(e,a,t){"use strict";t.r(a);var n=t(81),i=t(19),s=t.n(i),r=t(33),c=t(45),l=t(46),u=t(49),d=t(47),o=t(48),m=t(5),h=t(0),f=t.n(h),p=t(11),v=t.n(p),g=t(536),b=t(135),k=t(31),N=t(34),x=t(74),w=t(80),B=t(21);function A(){var e=Object(B.a)(["\n  padding: 15px;\n  background: #fff;\n  .trigger-bar{\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    .icon{\n      width: 25px;\n      height: 25px;\n    }\n  }\n  .empty{\n    color: #888;\n    line-height: 50px;\n    font-size: 16px;\n    font-weight: bold;\n    text-align: center;\n  }\n  .bankcard{\n    display: flex;\n    .icon{\n      width: 50px;\n      height: 50px;\n    }\n    .card{\n      font-family: industry;\n    }\n    .main{\n      flex: 1;\n      .name{\n        font-size: 16px;\n        font-weight: bold;\n        margin-bottom: 5px;\n      }\n      .text{\n        line-height: 1.5;\n        font-size: 12px;\n        color: #888;\n      }\n    }\n  }\n  .input-box{\n    padding: 15px;\n    background: #f4f4f4;\n  }\n  .small-text{\n    color: #888;\n    font-size: 12px;\n  }\n\n  .checkbox{\n    width: 16px;\n    height: 16px;\n    margin-right: 3px;\n  }\n  .flex-y-center{\n    display: flex;\n    align-items: center;\n  }\n  .group{\n    display: flex;\n    align-items: center;\n    &__body{\n      flex: 1;\n    }\n    &__foot{\n      margin-left: 10px;\n    }\n  }  \n  .loading{\n    display: flex;\n    &__head{\n     width: 50px;\n     height: 50px;\n     background: #eaeaea;\n    }\n    &__main{\n      flex: 1;\n      margin-left: 15px;\n    }\n    &__line{\n      height: 20px;\n      background: #eaeaea;\n    }\n  }\n"]);return A=function(){return e},e}var C=t(22).a.div(A()),E=t(510),j=t.n(E),y=t(458),P=t.n(y),O=t(511),D=t.n(O),S=t(436),M=t.n(S),K=t(437),L=t.n(K),T=t(438),I=t.n(T),R=t(439),G=t.n(R),F=t(440),z=t.n(F),H=t(441),X=t.n(H),U=t(442),Y=t.n(U),Z=t(443),_=t.n(Z),q=t(444),Q=t.n(q),V=t(445),W=t.n(V),J=t(446),$=t.n(J),ee=t(447),ae=t.n(ee),te=t(448),ne=t.n(te),ie=t(449),se=t.n(ie),re=t(450),ce=t.n(re),le=t(451),ue=t.n(le),de=t(452),oe=t.n(de),me={GDB:M.a,CEB:L.a,ICBC:I.a,HXB:G.a,CCB:z.a,COMM:X.a,CMBC:Y.a,ABC:_.a,SZPAB:Q.a,BOS:W.a,SPDB:$.a,CIB:ae.a,PSBC:ne.a,BOC:se.a,CMB:ce.a,CITIC:ue.a},he=function(){return f.a.createElement("div",{className:"loading"},f.a.createElement("div",{className:"loading__head"}),f.a.createElement("div",{className:"loading__main"},f.a.createElement("div",{className:"loading__line",style:{width:"50%",marginBottom:10}}),f.a.createElement("div",{className:"loading__line"})))},fe=function(e){var a=e.flag,t=e.interval,n=e.handleClick;return a?f.a.createElement("button",{className:"btn btn-secondary btn-mini",onClick:n},"\u83b7\u53d6\u9a8c\u8bc1\u7801"):f.a.createElement("button",{className:"btn btn-secondary btn-mini disable"},t,"\u79d2\u540e\u91cd\u53d1")},pe=function(e){var a=e.pass,t=e.handleSubmit;return a?f.a.createElement("button",{className:"btn btn-secondary",onClick:t},"\u786e\u8ba4\u4ee3\u5356"):f.a.createElement("button",{className:"btn btn-secondary disable"},"\u786e\u8ba4\u4ee3\u5356")},ve=function(e){var a=e.logo,t=e.bankcardNo,n=e.bankName;return f.a.createElement("div",{className:"bankcard"},f.a.createElement("div",{className:"aside"},f.a.createElement("img",{className:"icon",src:a,alt:""})),f.a.createElement("div",{className:"main",style:{marginLeft:15}},f.a.createElement("p",{className:"name"},n,"(\u5c3e\u53f7",f.a.createElement("span",{className:"card"},x.a.getBankcardLastNum(t)),")"),f.a.createElement("p",{className:"text"},"\u9884\u8ba1\u4e0b\u4e00\u5de5\u4f5c\u65e5\u5230\u8d26\uff0c\u5b9e\u9645\u4ee5\u94f6\u884c\u5230\u8d26\u65e5\u4e3a\u51c6")))},ge=function(e){var a=e.loading,t=e.hasBankcard,n=e.bankcardLogo,i=e.bankcard,s=e.bankName;return a?f.a.createElement(he,null):t?f.a.createElement(ve,{logo:n,bankcardNo:i,bankName:s}):f.a.createElement("div",{className:"empty"},"\u6682\u65e0\u53ef\u7528\u94f6\u884c\u5361")},be=function(e){var a=e.agreementFlag;return f.a.createElement("img",{className:"checkbox",src:a?P.a:D.a,alt:""})},ke=function(e){function a(e){var t;return Object(c.a)(this,a),(t=Object(u.a)(this,Object(d.a)(a).call(this,e))).handleToggle=function(e){t.setState({agreementFlag:!t.state.agreementFlag},function(){t.updateBtnStatus()})},t.handleGetCode=t.handleGetCode.bind(Object(m.a)(Object(m.a)(t))),t.handleClick=t.handleClick.bind(Object(m.a)(Object(m.a)(t))),t.handleToggle=t.handleToggle.bind(Object(m.a)(Object(m.a)(t))),t.handleChange=t.handleChange.bind(Object(m.a)(Object(m.a)(t))),t.handleBlur=t.handleBlur.bind(Object(m.a)(Object(m.a)(t))),t.handleSubmit=t.handleSubmit.bind(Object(m.a)(Object(m.a)(t))),t.state={integral:"",availableIntegral:0,pass:!1,loading:!0,hasBankcard:!1,agreementFlag:!0,bankcardList:[],bankCard:"",bankName:"",bankcardLogo:"",code:"",interval:k.a.redeem.INTERVAL,getCodeFlag:!0,phone:"",redeemFee:0,actualReceived:0,deductIntegral:0},t}return Object(o.a)(a,e),Object(l.a)(a,[{key:"componentDidMount",value:function(){this.loadUserInfo(),this.loadCardList()}},{key:"componentWillUnmount",value:function(){}},{key:"loadUserInfo",value:function(){var e=Object(r.a)(s.a.mark(function e(){var a,t;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(N.z)();case 3:a=e.sent,200===(t=a.data).status&&this.setState({phone:t.data[0].userPhoneNo,availableIntegral:t.data[0].balance});case 6:return e.prev=6,e.finish(6);case 8:case"end":return e.stop()}},e,this,[[0,,6,8]])}));return function(){return e.apply(this,arguments)}}()},{key:"loadCardList",value:function(){var e=Object(r.a)(s.a.mark(function e(){var a,t,n,i=this;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(N.k)();case 3:a=e.sent,200===(t=a.data).status&&(n=x.a.filterBankCardByStatusAndType(t.data,"1","1"),this.setState({bankcardList:n},function(){var e=n[0];e&&i.setCard(e)}));case 6:return e.prev=6,this.setState({loading:!1}),e.finish(6);case 9:case"end":return e.stop()}},e,this,[[0,,6,9]])}));return function(){return e.apply(this,arguments)}}()},{key:"getRedeemFee",value:function(){var e=Object(r.a)(s.a.mark(function e(){var a,t;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(N.w)(this.state.integral||0);case 3:a=e.sent,200===(t=a.data).status&&this.updateFee(t.data);case 6:return e.prev=6,e.finish(6);case 8:case"end":return e.stop()}},e,this,[[0,,6,8]])}));return function(){return e.apply(this,arguments)}}()},{key:"getCode",value:function(){var e=Object(r.a)(s.a.mark(function e(){var a,t,n,i=this;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=v.a.loading("\u53d1\u9001\u4e2d"),e.prev=1,e.next=4,Object(N.m)(this.state.phone);case 4:t=e.sent,200===(n=t.data).status&&this.setState({getCodeFlag:!1},function(){i.countDown()}),v.a.alert(n.msg);case 8:return e.prev=8,a.hide(),e.finish(8);case 11:case"end":return e.stop()}},e,this,[[1,,8,11]])}));return function(){return e.apply(this,arguments)}}()},{key:"doSubmit",value:function(){var e=Object(r.a)(s.a.mark(function e(a){var t,n,i,r,c=this;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=v.a.loading("\u5904\u7406\u4e2d"),n={amount:this.state.integral,bankCode:this.state.bankCode,bankName:this.state.bankName,cardHoldName:this.state.cardHoldName,cardPhoneNo:this.state.userPhoneNo,bankCard:this.state.bankCard,code:this.state.code,tradPwd:a,payment:1},e.prev=2,e.next=5,Object(N.L)(n);case 5:i=e.sent,200===(r=i.data).status?v.a.alert(r.msg):1017===r.status?x.a.confirmRetry("\u5bc6\u7801\u9519\u8bef",function(){c.retryTransPswd()}):v.a.alert(r.msg);case 8:return e.prev=8,t.hide(),e.finish(8);case 11:case"end":return e.stop()}},e,this,[[2,,8,11]])}));return function(a){return e.apply(this,arguments)}}()},{key:"retryTransPswd",value:function(){this.handleSubmit()}},{key:"countDown",value:function(){var e=this;this.state.interval>0?setTimeout(function(){e.setState({interval:e.state.interval-1},function(){e.countDown()})},1e3):this.resetGetCode()}},{key:"resetGetCode",value:function(){this.setState({interval:k.a.redeem.INTERVAL,getCodeFlag:!0})}},{key:"updateFee",value:function(e){var a=e.poundage,t=e.money,n=e.totalAmount;this.setState({redeemFee:a,actualReceived:t,deductIntegral:n})}},{key:"updateBtnStatus",value:function(){var e=!0;this.state.integral<k.a.redeem.MIN_INTEGRAL&&(e=!1),this.state.integral>k.a.redeem.MAX_INTEGRAL&&(e=!1),this.state.bankCard||(e=!1),this.state.code||(e=!1),this.state.agreementFlag||(e=!1),this.setState({pass:e})}},{key:"setCard",value:function(e){var a=this;this.setState({bankName:e.bankName,bankCode:e.bankCode,bankCard:e.bankCard,cardHoldName:e.cardHoldName,userPhoneNo:e.userPhoneNo,bankcardLogo:me[e.bankCode]||oe.a},function(){a.setState({hasBankcard:!0},function(){a.updateBtnStatus()})})}},{key:"handleBlur",value:function(e){this.getRedeemFee()}},{key:"handleGetCode",value:function(){this.getCode()}},{key:"handleClick",value:function(e){var a=this;if(!this.state.bankcardList.length)return v.a.alert("\u6682\u65e0\u53ef\u7528"),!1;v.a.picker(x.a.parseBankcardList(this.state.bankcardList),{defaultValue:[0],onConfirm:function(e){e&&e[0]&&a.setCard(e[0])}})}},{key:"handleChange",value:function(e){var a=this;this.setState(Object(n.a)({},e.target.name,e.target.value),function(){a.updateBtnStatus()})}},{key:"handleSubmit",value:function(e){var a=this;x.a.paymentConfirm({title:"\u4ee3\u5356",amount:this.state.integral,useable:this.state.availableIntegral,callback:function(e,t){if(!t.value)return!1;a.doSubmit(t.value)}})}},{key:"render",value:function(){var e=this.state,a=e.pass,t=e.loading,n=e.agreementFlag,i=e.hasBankcard,s=e.bankCard,r=e.bankName,c=e.bankcardLogo,l=e.getCodeFlag,u="\u6700\u591a\u53ef\u4ee3\u5356".concat(this.state.availableIntegral,"\u79ef\u5206");return f.a.createElement(C,null,f.a.createElement(b.Helmet,{defaultTitle:"\u6c83\u94f6\u4f01\u670d",title:"\u79ef\u5206\u4ee3\u5356"}),f.a.createElement("div",{className:"u_mb_xxx"},f.a.createElement("div",{className:"trigger-bar"},f.a.createElement("label",null,"\u9009\u62e9\u94f6\u884c\u5361"),f.a.createElement("img",{className:"icon",onClick:this.handleClick,src:j.a,alt:"\u7bad\u5934"}))),f.a.createElement("div",{className:"u_mb_xxx"},f.a.createElement(ge,{loading:t,hasBankcard:i,bankcardLogo:c,bankName:r,bankcard:s})),f.a.createElement("div",{className:"u_mb_x"},f.a.createElement("div",{className:"input-box"},f.a.createElement("input",{className:"input",type:"number",name:"integral",value:this.state.integral,onChange:this.handleChange,onBlur:this.handleBlur,placeholder:u}))),f.a.createElement("div",{className:"u_mb_xxx"},f.a.createElement("div",{className:"small-text"},f.a.createElement("p",null,"\u6263\u9664",this.state.deductIntegral,"\u79ef\u5206"),f.a.createElement("p",null,"\u5b9e\u9645\u5230\u8d26",this.state.actualReceived,"\u5143(\u624b\u7eed\u8d39",this.state.redeemFee,"\u79ef\u5206\uff0c100\u79ef\u5206\u7b49\u4e8e1\u5143)"))),f.a.createElement("div",{className:"u_mb_xxx"},f.a.createElement("div",{className:"group"},f.a.createElement("div",{className:"group__body"},f.a.createElement("input",{className:"input",type:"text",name:"code",value:this.state.code,onChange:this.handleChange,placeholder:"\u8bf7\u8f93\u5165\u77ed\u4fe1\u9a8c\u8bc1\u7801"})),f.a.createElement("div",{className:"group__foot"},f.a.createElement(fe,{flag:l,interval:this.state.interval,handleClick:this.handleGetCode})))),f.a.createElement("div",{className:"u_mb_xxx"},f.a.createElement("div",{className:"small-text flex-y-center",onClick:this.handleToggle},f.a.createElement(be,{agreementFlag:n}),"\u540c\u610f\u7528\u6237",f.a.createElement(g.a,{to:"/redeen-agreement",style:{color:"#007AFF"}},"\u300a\u4ee3\u5356\u89c4\u5219\u534f\u8bae\u300b"))),f.a.createElement(pe,{pass:a,handleSubmit:this.handleSubmit}),f.a.createElement(w.a,null))}}]),a}(h.Component);t.d(a,"view",function(){return ke})}}]);
//# sourceMappingURL=16.e0eca618.chunk.js.map