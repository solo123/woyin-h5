{"version":3,"sources":["common/Backhome.js","asset/images/icon/home.svg","common/EmptyArrayPlaceholder.js","asset/images/empty.svg","common/SkeletonPlaceholder.js","pages/Order.js"],"names":["LayoutFixedRight","styled","div","_templateObject","StyledBackhome","_templateObject2","StyledHomeIcon","img","_templateObject3","__webpack_exports__","react__WEBPACK_IMPORTED_MODULE_1___default","a","createElement","react_router_dom__WEBPACK_IMPORTED_MODULE_3__","to","src","homeIcon","alt","module","exports","__webpack_require__","p","LayoutPage","empty","_ref","_ref$count","count","items","i","push","key","className","Page","currentPage","STATUS_SCHEMA","11","12","13","Item","date","name","totalAmt","status","react__WEBPACK_IMPORTED_MODULE_9___default","List","_ref2","map","item","byOrderDetail","productName","createTime","Content","_ref3","loading","_common_SkeletonPlaceholder__WEBPACK_IMPORTED_MODULE_14__","length","_common_EmptyArrayPlaceholder__WEBPACK_IMPORTED_MODULE_15__","isLoading","Order","state","scrollListener","_this","scrollContainer","scrollTop","offsetHeight","itemsElem","weui","loadNextPage","_callee","page","params","_ref5","data","C_Users_htbst_Desktop_woyin_h5_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default","wrap","_context","prev","next","_isMounted","limit","api","getOrderList","sent","abrupt","setState","concat","Object","C_Users_htbst_Desktop_woyin_h5_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_1__","hide","finish","stop","reset","handleClick","this","addEventListener","removeEventListener","_this2","_this$state","classNames","active","onClick","ref","node","_common_Backhome__WEBPACK_IMPORTED_MODULE_16__","Component"],"mappings":"qkBAMA,IAAMA,EAAmBC,IAAOC,IAAVC,KAKhBC,EAAiBH,IAAOC,IAAVG,KAMdC,EAAiBL,IAAOM,IAAVC,KAKLC,EAAA,aACb,OACEC,EAAAC,EAAAC,cAACZ,EAAD,KACEU,EAAAC,EAAAC,cAACC,EAAA,EAAD,CAAMC,GAAG,KACPJ,EAAAC,EAAAC,cAACR,EAAD,KACEM,EAAAC,EAAAC,cAACN,EAAD,CAAgBS,IAAKC,IAAUC,IAAI,sDC3B7CC,EAAAC,QAAiBC,EAAAC,EAAuB,0UCKxC,IAAMC,EAAarB,IAAOC,IAAVC,KAWDM,EAAA,aACb,OACEC,EAAAC,EAAAC,cAACU,EAAD,KACEZ,EAAAC,EAAAC,cAAA,OAAKG,IAAKQ,IAAON,IAAI,6BACrBP,EAAAC,EAAAC,cAAA,8DCpBNM,EAAAC,QAAiBC,EAAAC,EAAuB,gYCGxC,IAAMC,SAAarB,EAAOC,IAAVC,KAoBDM,EAAA,WAAAe,GAEb,IAF8B,IAAAC,EAAAD,EAAfE,aAAe,IAAAD,EAAP,EAAOA,EACxBE,EAAQ,GACNC,EAAI,EAAGA,EAAIF,EAAOE,IACxBD,EAAME,KACJnB,EAAAC,EAAAC,cAAA,OAAKkB,IAAKF,EAAGG,UAAU,QACrBrB,EAAAC,EAAAC,cAAA,OAAKmB,UAAU,SACfrB,EAAAC,EAAAC,cAAA,OAAKmB,UAAU,aACfrB,EAAAC,EAAAC,cAAA,OAAKmB,UAAU,aACfrB,EAAAC,EAAAC,cAAA,OAAKmB,UAAU,eAIrB,OAAOrB,EAAAC,EAAAC,cAACU,EAAD,KAAaK,g2CCxBtB,IAAMK,EAAO/B,IAAOC,IAAVC,KA2DN8B,EAAc,EACZC,EAAgB,CACpBC,GAAM,qBACNC,GAAM,eACNC,GAAM,gBAGFC,EAAO,SAAAd,GAAoC,IAAlCe,EAAkCf,EAAlCe,KAAMC,EAA4BhB,EAA5BgB,KAAMC,EAAsBjB,EAAtBiB,SAAUC,EAAYlB,EAAZkB,OACnC,OACEC,EAAAhC,EAAAC,cAAA,OAAKmB,UAAU,QACbY,EAAAhC,EAAAC,cAAA,OAAKmB,UAAU,cACbY,EAAAhC,EAAAC,cAAA,MAAImB,UAAU,eAAeS,GAC7BG,EAAAhC,EAAAC,cAAA,OAAKmB,UAAU,gBAAgBW,IAEjCC,EAAAhC,EAAAC,cAAA,OAAKmB,UAAU,cACZS,GAEHG,EAAAhC,EAAAC,cAAA,OAAKmB,UAAU,cACbY,EAAAhC,EAAAC,cAAA,WAAM2B,GACNI,EAAAhC,EAAAC,cAAA,uCAAW6B,MAMbG,EAAO,SAAAC,GACX,OADwBA,EAAXlB,MACAmB,IAAI,SAAAC,GACf,OACEJ,EAAAhC,EAAAC,cAAC0B,EAAD,CACER,IAAKiB,EAAKC,cACVR,KAAMO,EAAKE,YACXD,cAAeD,EAAKC,cACpBN,OAAQR,EAAca,EAAKL,QAC3BH,KAAMQ,EAAKG,WACXT,SAAUM,EAAKN,cAMjBU,EAAU,SAAAC,GAAsB,IAApBC,EAAoBD,EAApBC,QAAS1B,EAAWyB,EAAXzB,MACzB,OAAG0B,EACMV,EAAAhC,EAAAC,cAAA,OAAKmB,UAAU,qBAAoBY,EAAAhC,EAAAC,cAAC0C,EAAA,EAAD,CAAqB5B,MAAO,KAErEC,EAAM4B,OACAZ,EAAAhC,EAAAC,cAAA,OAAKmB,UAAU,QAAOY,EAAAhC,EAAAC,cAACgC,EAAD,CAAMjB,MAAOA,KAErCgB,EAAAhC,EAAAC,cAAC4C,EAAA,EAAD,OAGLC,GAAY,EACVC,6MACJC,MAAQ,CACNjB,OAAQ,KACRW,SAAS,EACT1B,MAAO,MAaTiC,eAAiB,WACZH,GAEeI,EAAKC,gBAAgBC,UACrBF,EAAKC,gBAAgBE,cACrBH,EAAKI,UAAUD,eAG/BP,GAAY,EACZI,EAAKR,QAAUa,IAAKb,QAAQ,sBAC5BQ,EAAKM,aAAaN,EAAKF,MAAMjB,SAAUT,OAI3CkC,mDAAe,SAAAC,EAAM1B,EAAQ2B,GAAd,IAAAC,EAAAC,EAAAC,EAAA,OAAAC,EAAA9D,EAAA+D,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,cACbhB,EAAKiB,YAAa,EACZR,EAAS,CACb5B,OAAQmB,EAAKF,MAAMjB,OACnBqC,MAAO,GACPV,KAAM,GALKM,EAAAC,KAAA,EAAAD,EAAAE,KAAA,EAQUG,IAAIC,aAAaX,GAR3B,UAAAC,EAAAI,EAAAO,KASQ,OADZV,EARID,EAQJC,MACC9B,OATG,CAAAiC,EAAAE,KAAA,YAULhB,EAAKiB,WAVA,CAAAH,EAAAE,KAAA,gBAAAF,EAAAQ,OAAA,qBAWLX,EAAKA,KAAK9C,MAXL,CAAAiD,EAAAE,KAAA,gBAAAF,EAAAQ,OAAA,kBAYTtB,EAAKuB,SAAS,CACZzD,MAAK,GAAA0D,OAAAC,OAAAC,EAAA,EAAAD,CAAMzB,EAAKF,MAAMhC,OAAjB2D,OAAAC,EAAA,EAAAD,CAA2Bd,EAAKA,KAAKA,QACzC,WACDf,GAAY,IAfL,WAAAkB,EAAAC,KAAA,GAmBRf,EAAKR,SACNQ,EAAKR,QAAQmC,OAEX3B,EAAKiB,WAtBE,CAAAH,EAAAE,KAAA,gBAAAF,EAAAQ,OAAA,yBAuBXtB,EAAKuB,SAAS,CAAC/B,SAAS,IAvBbsB,EAAAc,OAAA,6BAAAd,EAAAe,SAAAtB,EAAA,gFA2BfuB,MAAQ,WACN1D,EAAc,EACd4B,EAAKuB,SAAS,CAACzD,MAAO,QAGxBiE,YAAc,SAAAlD,GACTmB,EAAKF,MAAMjB,SAAWA,IACzBmB,EAAK8B,QACL9B,EAAKuB,SAAS,CAAC1C,OAAQA,EAAQW,SAAS,GAAO,WAC7CQ,EAAKM,aAAazB,EAAQT,0FA3D5B4D,KAAK1B,aAAa0B,KAAKlC,MAAMjB,OAAQT,GACrC4D,KAAK/B,gBAAgBgC,iBAAiB,SAAUD,KAAKjC,+DAIrDiC,KAAKf,YAAa,EAClBe,KAAK/B,gBAAgBiC,oBAAoB,SAAUF,KAAKjC,iDAyDjD,IAAAoC,EAAAH,KAAAI,EAC0BJ,KAAKlC,MAA/BN,EADA4C,EACA5C,QAAS1B,EADTsE,EACStE,MAAOe,EADhBuD,EACgBvD,OAEvB,OACEC,EAAAhC,EAAAC,cAACoB,EAAD,KACEW,EAAAhC,EAAAC,cAAA,WACE+B,EAAAhC,EAAAC,cAAA,KAAGmB,UAAWmE,IAAW,CAACC,OAAmB,OAAXzD,IAAmB0D,QAAS,kBAAMJ,EAAKJ,YAAY,QAArF,sBACAjD,EAAAhC,EAAAC,cAAA,KAAGmB,UAAWmE,IAAW,CAACC,OAAmB,OAAXzD,IAAmB0D,QAAS,kBAAMJ,EAAKJ,YAAY,QAArF,gBACAjD,EAAAhC,EAAAC,cAAA,KAAGmB,UAAWmE,IAAW,CAACC,OAAmB,OAAXzD,IAAmB0D,QAAS,kBAAMJ,EAAKJ,YAAY,QAArF,iBAEFjD,EAAAhC,EAAAC,cAAA,OAAKmB,UAAU,YAAYsE,IAAK,SAAAC,GAAI,OAAIN,EAAKlC,gBAAkBwC,IAC7D3D,EAAAhC,EAAAC,cAAA,QAAMyF,IAAK,SAAAC,GAAI,OAAIN,EAAK/B,UAAYqC,IAClC3D,EAAAhC,EAAAC,cAACuC,EAAD,CAASE,QAASA,EAAS1B,MAAOA,MAGtCgB,EAAAhC,EAAAC,cAAC2F,EAAA,EAAD,cAtFYC,aA4FL9C","file":"static/js/10.4492a795.chunk.js","sourcesContent":["import React, { Component } from 'react';\r\nimport styled from 'styled-components'\r\nimport { Link } from \"react-router-dom\"\r\n\r\nimport homeIcon from '../asset/images/icon/home.svg'\r\n\r\nconst LayoutFixedRight = styled.div`\r\n  position: fixed;\r\n  right: 0;\r\n  bottom: 100px;\r\n`\r\nconst StyledBackhome = styled.div`\r\n  background: rgba(0, 0, 0, .5);\r\n  padding: 5px 3px 6px 5px;\r\n  border-top-left-radius: 3px;\r\n  border-bottom-left-radius: 3px;\r\n`\r\nconst StyledHomeIcon = styled.img`\r\n  width: 35px;\r\n  height: 35px;\r\n`\r\n\r\nexport default function () {\r\n  return (\r\n    <LayoutFixedRight>\r\n      <Link to=\"/\">\r\n        <StyledBackhome>\r\n          <StyledHomeIcon src={homeIcon} alt=\"回到首页\" />\r\n        </StyledBackhome>\r\n      </Link>\r\n    </LayoutFixedRight>\r\n  )\r\n}","module.exports = __webpack_public_path__ + \"static/media/home.73f12746.svg\";","import React, { Component } from 'react'\r\nimport styled from 'styled-components'\r\n\r\nimport empty from '../asset/images/empty.svg'\r\n\r\nconst LayoutPage = styled.div`\r\n  padding: 40px 0;\r\n  color: #aaa;\r\n  text-align: center;\r\n  img{\r\n    width: 100px;\r\n    height: 100px;\r\n    margin-bottom: 10px;\r\n  }\r\n`\r\n\r\nexport default function () {\r\n  return (\r\n    <LayoutPage>\r\n      <img src={empty} alt=\"暂无数据\"/>\r\n      <div>暂无数据</div>\r\n    </LayoutPage>\r\n  )\r\n}","module.exports = __webpack_public_path__ + \"static/media/empty.8103a6b5.svg\";","import React from 'react'\r\nimport styled from 'styled-components'\r\n\r\nconst LayoutPage = styled.div`\r\n  .item{\r\n    margin-bottom: 30px;\r\n  }\r\n  .line{\r\n    height: 25px;\r\n    background: #eee;\r\n    margin-bottom: 10px;\r\n  }\r\n  .w80{\r\n    width: 80%;\r\n  }\r\n  .w50{\r\n    width: 50%;\r\n  }\r\n  .w30{\r\n    width: 30%;\r\n  }\r\n`\r\n\r\nexport default ({count = 1}) => {\r\n  const items = []\r\n  for(let i = 0; i < count; i++) {\r\n    items.push((\r\n      <div key={i} className=\"item\">\r\n        <div className=\"line\"></div>\r\n        <div className=\"line w80\"></div>\r\n        <div className=\"line w50\"></div>\r\n        <div className=\"line w30\"></div>\r\n      </div>\r\n    ))\r\n  }\r\n  return <LayoutPage>{items}</LayoutPage>\r\n}","import React, { Component } from 'react'\r\nimport styled from 'styled-components'\r\nimport classNames from 'classnames'\r\nimport weui from 'weui.js'\r\n\r\nimport api from '../api'\r\nimport SkeletonPlaceholder from '../common/SkeletonPlaceholder'\r\n\r\nimport EmptyArrayPlaceholder from '../common/EmptyArrayPlaceholder'\r\nimport Backhome from '../common/Backhome'\r\n\r\nconst Page = styled.div`\r\n  position: absolute;\r\n  top: 0;\r\n  left: 0;\r\n  right: 0;\r\n  bottom: 0;\r\n  display: flex;\r\n  flex-direction: column;\r\n  nav{\r\n    display: flex;\r\n    flex-shrink: 0;\r\n    line-height: 60px;\r\n    background: #fff;\r\n    a{\r\n      flex: 1;\r\n      text-align: center;\r\n      transition: all .3s ease;\r\n      color: #888;\r\n      &.active{\r\n        color: #444;\r\n        font-size: 16px;\r\n        font-weight: bold;\r\n      }\r\n    }\r\n  }\r\n  .container{\r\n    flex-shrink: 1;\r\n    flex-grow: 1;\r\n    overflow-y: auto;\r\n  }\r\n  .list{\r\n    margin: 15px 15px 0 15px;\r\n    .item{\r\n      background: #fff;\r\n      margin-bottom: 15px;\r\n      &__head{\r\n        display: flex;\r\n        justify-content: space-between;\r\n        border-bottom: 1px solid #eaeaea;\r\n        padding: 15px;\r\n      }\r\n      &__body{\r\n        padding: 15px 15px 0 15px;\r\n      }\r\n      &__foot{\r\n        display: flex;\r\n        justify-content: space-between;\r\n        font-size: 12px;        \r\n        padding: 15px;\r\n      }\r\n      &__title{\r\n      }\r\n      &__status{\r\n        font-size: 12px;\r\n      }\r\n    }\r\n  }\r\n`\r\n\r\nlet currentPage = 1\r\nconst STATUS_SCHEMA = {\r\n  '11': '处理中',\r\n  '12': '成功',\r\n  '13': '失败'\r\n}\r\n\r\nconst Item = ({date, name, totalAmt, status}) => {\r\n  return (\r\n    <div className=\"item\">\r\n      <div className=\"item__head\">\r\n        <h2 className=\"item__title\">{name}</h2>\r\n        <div className=\"item__status\">{status}</div>\r\n      </div>\r\n      <div className=\"item__body\">\r\n        {name}\r\n      </div>\r\n      <div className=\"item__foot\">\r\n        <div>{date}</div>\r\n        <div>合计积分 {totalAmt}</div>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nconst List = ({items}) => {\r\n  return items.map(item => {\r\n    return (\r\n      <Item \r\n        key={item.byOrderDetail} \r\n        name={item.productName}\r\n        byOrderDetail={item.byOrderDetail}\r\n        status={STATUS_SCHEMA[item.status]}\r\n        date={item.createTime} \r\n        totalAmt={item.totalAmt}\r\n      />\r\n    )\r\n  })\r\n}\r\n    \r\nconst Content = ({loading, items}) => {\r\n  if(loading) {\r\n    return <div className=\"u_mx_xxx u_pt_xxx\"><SkeletonPlaceholder count={3} /></div>\r\n  }\r\n  if(items.length) {\r\n    return <div className=\"list\"><List items={items} /></div>\r\n  }\r\n  return <EmptyArrayPlaceholder />\r\n}\r\n\r\nlet isLoading = false\r\nclass Order extends Component {\r\n  state = {\r\n    status: '11',\r\n    loading: true,\r\n    items: []\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.loadNextPage(this.state.status, currentPage) \r\n    this.scrollContainer.addEventListener('scroll', this.scrollListener)\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    this._isMounted = false\r\n    this.scrollContainer.removeEventListener('scroll', this.scrollListener)\r\n  }\r\n\r\n  scrollListener = () => {\r\n    if(isLoading){ return }\r\n\r\n    const scrollTop = this.scrollContainer.scrollTop\r\n    const winHeight = this.scrollContainer.offsetHeight\r\n    const docHeight = this.itemsElem.offsetHeight\r\n\r\n    if((scrollTop + winHeight) >= docHeight){\r\n      isLoading = true\r\n      this.loading = weui.loading('加载中')\r\n      this.loadNextPage(this.state.status, ++currentPage)\r\n    }\r\n  }\r\n\r\n  loadNextPage = async(status, page) => {\r\n    this._isMounted = true\r\n    const params = {\r\n      status: this.state.status,\r\n      limit: 10,\r\n      page: 0\r\n    }\r\n    try {\r\n      const {data} = await api.getOrderList(params)\r\n      if(data.status === 200){\r\n        if(!this._isMounted){return}\r\n        if(!data.data.count){return}\r\n        this.setState({\r\n          items: [...this.state.items, ...data.data.data]\r\n        }, () => {\r\n          isLoading = false\r\n        })\r\n      }\r\n    }finally {\r\n      if(this.loading) {\r\n        this.loading.hide()\r\n      }\r\n      if(!this._isMounted){return}\r\n      this.setState({loading: false})\r\n    }\r\n  }\r\n\r\n  reset = () => {\r\n    currentPage = 1\r\n    this.setState({items: []})\r\n  }\r\n\r\n  handleClick = status => {\r\n    if(this.state.status === status) {return}\r\n    this.reset()\r\n    this.setState({status: status, loading: true}, () => {\r\n      this.loadNextPage(status, currentPage)\r\n    })\r\n  }\r\n\r\n  render() {\r\n    const {loading, items, status} = this.state\r\n\r\n    return (\r\n      <Page>\r\n        <nav>\r\n          <a className={classNames({active: status === '11'})} onClick={() => this.handleClick('11')}>处理中</a>\r\n          <a className={classNames({active: status === '12'})} onClick={() => this.handleClick('12')}>成功</a>\r\n          <a className={classNames({active: status === '13'})} onClick={() => this.handleClick('13')}>失败</a>\r\n        </nav>\r\n        <div className=\"container\" ref={node => this.scrollContainer = node}>\r\n          <main ref={node => this.itemsElem = node}>\r\n            <Content loading={loading} items={items} />\r\n          </main>\r\n        </div>\r\n        <Backhome />\r\n      </Page>\r\n    )\r\n  }\r\n}\r\n\r\nexport default Order"],"sourceRoot":""}