(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{501:function(e,t,n){e.exports=n.p+"static/media/banner.c6b6b97b.jpg"},502:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAD4AAAA+CAYAAABzwahEAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMDY3IDc5LjE1Nzc0NywgMjAxNS8wMy8zMC0yMzo0MDo0MiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTUgKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjI5OEQyNDIxNUMwOTExRTlCMzlBRDEwNjEwQjU5RkFGIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjI5OEQyNDIyNUMwOTExRTlCMzlBRDEwNjEwQjU5RkFGIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6Mjk4RDI0MUY1QzA5MTFFOUIzOUFEMTA2MTBCNTlGQUYiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6Mjk4RDI0MjA1QzA5MTFFOUIzOUFEMTA2MTBCNTlGQUYiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz4w/prlAAAClklEQVR42uSbvS5EQRTH7c0WCg+g8QQUEmofDZFoFD6WXfECOjR6jaXAA7gz8RGEQqIgsRKNF6BQikZLaCTWmbg3uRlzv2fOzJ17kn9yd3aL+9tz/ueemexW2usdZYzdagmhL0GTTsmgKYMGfZUJnIDq3vV3WcBdUCPwulIG8H3QIr9YLUF5N0Rv2AxOA57+F47Fma5HfcBGcDesvG0Gd0WNzHaP07jytjHjJA20LeCJPG0beGJP2+RxkiXTRQenaT1tQ6m7eaGLCJ7Z00UGlwZdJI9TGeVdtIwT2dBFAM80nBQdXKqni+JxoirTJoNTFZ42vdRdDGjTwJV62lRwVGhTPE6xytukjBMd0LrBlQ0nJoOje9oEj1Nd5a0z48QEaGxwrZ7WBb6P7Gn2y55t3R4nyJneAm141z2gaR0ZpxqgVwKvZ0Gf2ODYjWyTg2ZxAerELHXsRtYErXFrd6BhzOYWNpz8gIbimk7G8l7l1m6joFVkPGw4eQLNgB5B96Bu0LwCT/vQo5iPsyhPv3nQfiyAjhRAt5JAywSP8zS7mXNubT4HfFMAzTw9gjnAJN1wTIEOBPDHEjzdivO0bHCSciJjoIfcWi1F5sPKeyTtjecBzzqciEBFX4gy6DzgeU9D5wSgCxHwe3k9LQNc1iFCLQSe9/wNaDnNcKICXPbJSU3Q8NjamXd9DRrL28jyglNFW0vRY23a22CMy/J0VnDVGw6R509UQScFx9pwiMpeSiMTRJeD7OkkZX+gwtNcvFYNOjkJwvd6Da5fcqb9OK6E/O/MiCNghdHnKBhOTI9TtlN0NHsaOz5AS3xXtx36HTQI+vLBma4sh2YzwQDo2V9gXX0HNOGVQdsi2JeOv2Mu9nR64N/8FWAAqYCNrww7EU0AAAAASUVORK5CYII="},546:function(e,t,n){"use strict";n.r(t);var a=n(376),r=n.n(a),i=n(377),l=n(59),c=n(60),s=n(63),o=n(61),d=n(62),u=n(121),p=n(0),h=n.n(p),m=n(374),b=n.n(m),g=n(118),v=n.n(g),f=n(375),y=n(372),I=n(120),x=n(410),w=n(378),T=n(371),k=n(382),A=n.n(k),N=n(422),j=n.n(N),E=n(423),O=n.n(E),S=n(424),C=n.n(S),G={2:j.a,3:O.a,4:C.a};function R(e){var t=e.id,n=e.type,a=e.name,r=e.handleToggleType,i=A()({active:t===n});return h.a.createElement("li",{className:i,onClick:function(){return r(t)}},h.a.createElement("img",{className:"icon",src:G[t],alt:""}),a)}var z=function(e){var t=e.items,n=e.type,a=e.handleToggleType;return h.a.createElement("ul",{className:"nav"},t.map(function(e){return h.a.createElement(R,{key:e.productClassifyId,type:n,id:e.productClassifyId,name:e.productClassifyName,handleToggleType:a})}))},B=n(115),M=n(116),Q=n(501),U=n.n(Q),D=n(502),J=n.n(D);function Z(){var e=Object(B.a)(["\n\n  header{\n    padding: 110px 15px 0 15px;\n    background: url(",") center top no-repeat;\n    background-size: 100%;\n    margin-bottom: 15px;\n    .nav{\n      display: flex;\n      background: #fff;\n      border-radius: 3px;\n      box-shadow: 0 1px 3px rgba(26,26,26,.1);\n      li{\n        flex: 1;\n        position: relative;\n        text-align: center;\n        padding: 15px 0;\n        font-size: 15px;\n        &.active{\n          color: #ff7b00;\n          &:after{\n            content: '';\n            position: absolute;\n            left: 50%;\n            bottom: 3px;\n            transform: translate(-50%);\n            height: 2px;\n            width: 60px;\n            background: #ff7b00;\n          }\n        }\n        .icon{\n          display: block;\n          width: 35px;\n          margin: 0 auto 5px;\n        }\n      }\n    }\n  }\n  .main{\n    margin: 0 15px;\n    border-radius: 5px;\n    overflow: hidden;\n    background: #fff;\n    .input-box{\n      padding: 12px;\n      border: 1px solid #ff7b00;\n    }\n    .items{\n      display: flex;\n      flex-wrap: wrap;\n      margin: 0 10px;\n      .item{\n        width: 33.33%;\n        padding: 5px;\n        &__inner{\n          position: relative;\n          text-align: center;\n          padding: 10px;\n          border-radius: 2px;\n          border: 1px solid #eaeaea;\n          &.active{\n            border-color: #ff7b00;\n            &:after{\n              content: '';\n              position: absolute;\n              bottom: 0;\n              right: 0;\n              background: url(",") center top no-repeat;\n              background-size: 100%;\n              width: 20px;\n              height: 20px;\n            }\n          }\n        }\n        &__money{\n          font-size: 16px;\n          font-weight: bold;\n        }\n        &__integral{\n          color: #7a7a7a;\n          font-size: 12px;\n        }\n      }\n    }\n  }\n"]);return Z=function(){return e},e}var Y=M.a.div(Z(),U.a,J.a);function F(e){var t=e.id,n=e.selectId,a=e.money,r=e.integral,i=e.handleSelect,l=A()("item__inner",{active:t===n});return h.a.createElement("div",{className:"item"},h.a.createElement("div",{className:l,onClick:i},h.a.createElement("div",{className:"item__money"},a,"\u5143"),h.a.createElement("div",{className:"item__integral"},r,"\u79ef\u5206")))}var L=function(e){var t=e.selectId,n=e.items,a=e.handleSelect;return h.a.createElement("div",{className:"items"},n.map(function(e){var n=(Number(e.disCount)/10).toFixed(2);return h.a.createElement(F,{key:e.productId,id:e.productId,selectId:t,money:e.salesPrice,integral:e.productCostBalance*n,handleSelect:function(){return a(e.productId,e.productCostBalance*n)}})}))},P=b.a.CancelToken;function W(e){var t=e.loading,n=e.selectId,a=e.items,r=e.handleSelect;return t?h.a.createElement(x.a,null):a.length?h.a.createElement(L,{selectId:n,items:a,handleSelect:r}):h.a.createElement(w.a,null)}var H="13",V=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(s.a)(this,Object(o.a)(t).call(this,e))).handleChange=n.handleChange.bind(Object(u.a)(Object(u.a)(n))),n.handleSubmit=n.handleSubmit.bind(Object(u.a)(Object(u.a)(n))),n.handleToggleType=n.handleToggleType.bind(Object(u.a)(Object(u.a)(n))),n.handleSelect=n.handleSelect.bind(Object(u.a)(Object(u.a)(n))),n.state={items:[],skeletonLoading:!1,qq:"",chargeType:"2",selectId:"",type:H,operators:[],integral:0,availableIntegral:0},n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){I.a.addClass(document.body,"qq");var e=this.props.history.location.state.id;this.loadUserInfo(),this.loadOperatorById(e),this.loadProdcutsByType(this.state.type)}},{key:"componentWillUnmount",value:function(){I.a.removeClass(document.body,"qq"),this.loadUserInfoSource.cancel("Operation canceled by the user."),this.loadOperatorSource.cancel("Operation canceled by the user."),this.loadProdcutsSource.cancel("Operation canceled by the user.")}},{key:"loadUserInfo",value:function(){var e=Object(i.a)(r.a.mark(function e(){var t,n;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.loadUserInfoSource=P.source(),e.prev=1,e.next=4,Object(y.B)(null,{cancelToken:this.loadUserInfoSource.token});case 4:t=e.sent,200===(n=t.data).status&&this.setState({availableIntegral:Number(n.data[0].balance)});case 7:return e.prev=7,e.finish(7);case 9:case"end":return e.stop()}},e,this,[[1,,7,9]])}));return function(){return e.apply(this,arguments)}}()},{key:"loadOperatorById",value:function(){var e=Object(i.a)(r.a.mark(function e(t){var n,a;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.loadOperatorSource=P.source(),e.prev=1,e.next=4,Object(y.x)(t,{cancelToken:this.loadOperatorSource.token});case 4:n=e.sent,200===(a=n.data).status&&this.setState({operators:a.data});case 7:return e.prev=7,e.finish(7);case 9:case"end":return e.stop()}},e,this,[[1,,7,9]])}));return function(t){return e.apply(this,arguments)}}()},{key:"loadProdcutsByType",value:function(){var e=Object(i.a)(r.a.mark(function e(t){var n,a;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({skeletonLoading:!0}),this.loadProdcutsSource=P.source(),e.prev=2,e.next=5,Object(y.A)(t,{cancelToken:this.loadProdcutsSource.token});case 5:n=e.sent,200===(a=n.data).status&&this.setState({items:a.data});case 8:return e.prev=8,this.setState({skeletonLoading:!1}),e.finish(8);case 11:case"end":return e.stop()}},e,this,[[2,,8,11]])}));return function(t){return e.apply(this,arguments)}}()},{key:"doSubmit",value:function(){var e=Object(i.a)(r.a.mark(function e(t){var n,a,i,l,c=this;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=v.a.loading("\u5904\u7406\u4e2d"),a={chargeAddr:this.state.qq,chargeType:this.state.chargeType,productId:this.state.selectId,tranPwd:t},e.prev=2,e.next=5,Object(y.K)(a);case 5:i=e.sent,200===(l=i.data).status?v.a.alert(l.msg):1017===l.status?I.a.confirmRetry("\u5bc6\u7801\u9519\u8bef",function(){c.retryTransPswd()}):v.a.alert(l.msg);case 8:return e.prev=8,n.hide(),e.finish(8);case 11:case"end":return e.stop()}},e,this,[[2,,8,11]])}));return function(t){return e.apply(this,arguments)}}()},{key:"retryTransPswd",value:function(){this.handleSubmit()}},{key:"reset",value:function(){this.setState({selectId:""})}},{key:"handleToggleType",value:function(e){var t=this;if(e!==this.state.type){this.reset();var n="13"===e?"2":"3";this.setState({type:e,chargeType:n},function(){t.loadProdcutsByType(e)})}}},{key:"handleSelect",value:function(e,t){this.setState({selectId:e,integral:t})}},{key:"handleChange",value:function(e){this.setState({qq:e.target.value})}},{key:"handleSubmit",value:function(){var e=this;this.state.qq?this.state.selectId?this.state.integral>this.state.availableIntegral?v.a.alert("\u79ef\u5206\u4e0d\u8db3"):I.a.paymentConfirm({title:"\u5145\u503c",amount:this.state.integral,useable:this.state.availableIntegral,callback:function(t,n){if(!n.value)return!1;e.doSubmit(n.value)}}):v.a.alert("\u8bf7\u9009\u62e9\u4ea7\u54c1"):v.a.alert("\u8bf7\u8f93\u5165QQ\u53f7")}},{key:"render",value:function(){var e=this.state,t=e.selectId,n=e.type,a=e.items,r=e.operators,i=e.skeletonLoading;return h.a.createElement(Y,null,h.a.createElement(f.Helmet,{defaultTitle:"\u6c83\u94f6\u4f01\u670d",title:"Q\u5e01\u5145\u503c"}),h.a.createElement("header",null,h.a.createElement(z,{type:n,items:r,handleToggleType:this.handleToggleType})),h.a.createElement("main",{className:"main"},h.a.createElement("div",{className:"u_p_xxx"},h.a.createElement("div",{className:"input-box"},h.a.createElement("input",{type:"number",className:"input input-primary",value:this.state.qq,onChange:this.handleChange,placeholder:"\u8bf7\u8f93\u5165QQ\u53f7",autoComplete:"off"}))),h.a.createElement("h2",{className:"u_mx_xxx u_mb_x"},"\u5145Q\u5e01"),h.a.createElement(W,{loading:i,selectId:t,items:a,handleSelect:this.handleSelect}),h.a.createElement("div",{className:"u_p_xxx"},h.a.createElement("button",{className:"btn btn-quartus",onClick:this.handleSubmit},"\u7acb\u5373\u5145\u503c"))),h.a.createElement(T.a,null))}}]),t}(p.Component);n.d(t,"view",function(){return V})}}]);
//# sourceMappingURL=12.b4bd0b25.chunk.js.map