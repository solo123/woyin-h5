{"version":3,"sources":["common/Backhome.js","asset/images/icon/home.svg","common/SkeletonPlaceholder.js","pages/Order.js"],"names":["LayoutFixedRight","styled","div","_templateObject","StyledBackhome","_templateObject2","StyledHomeIcon","img","_templateObject3","__webpack_exports__","react__WEBPACK_IMPORTED_MODULE_1___default","a","createElement","react_router_dom__WEBPACK_IMPORTED_MODULE_3__","to","src","homeIcon","alt","module","exports","__webpack_require__","p","LayoutPage","_ref","_ref$count","count","items","i","push","key","className","Page","currentPage","Item","id","react__WEBPACK_IMPORTED_MODULE_9___default","List","_ref2","map","item","Content","_ref3","loading","_common_SkeletonPlaceholder__WEBPACK_IMPORTED_MODULE_14__","length","isLoading","Order","state","status","scrollListener","_this","scrollContainer","scrollTop","offsetHeight","itemsElem","weui","loadNextPage","_callee","page","_ref5","data","C_Users_htbst_Desktop_woyin_h5_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default","wrap","_context","prev","next","_isMounted","api","getOrderList","sent","code","abrupt","setState","concat","Object","C_Users_htbst_Desktop_woyin_h5_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_1__","hide","finish","stop","reset","handleClick","this","addEventListener","removeEventListener","_this2","_this$state","classNames","active","onClick","ref","node","_common_Backhome__WEBPACK_IMPORTED_MODULE_15__","Component"],"mappings":"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","file":"static/js/10.2456ddac.chunk.js","sourcesContent":["import React, { Component } from 'react';\r\nimport styled from 'styled-components'\r\nimport { Link } from \"react-router-dom\"\r\n\r\nimport homeIcon from '../asset/images/icon/home.svg'\r\n\r\nconst LayoutFixedRight = styled.div`\r\n  position: fixed;\r\n  right: 0;\r\n  bottom: 100px;\r\n`\r\nconst StyledBackhome = styled.div`\r\n  background: rgba(0, 0, 0, .5);\r\n  padding: 5px 3px 6px 5px;\r\n  border-top-left-radius: 3px;\r\n  border-bottom-left-radius: 3px;\r\n`\r\nconst StyledHomeIcon = styled.img`\r\n  width: 35px;\r\n  height: 35px;\r\n`\r\n\r\nexport default function () {\r\n  return (\r\n    <LayoutFixedRight>\r\n      <Link to=\"/\">\r\n        <StyledBackhome>\r\n          <StyledHomeIcon src={homeIcon} alt=\"回到首页\" />\r\n        </StyledBackhome>\r\n      </Link>\r\n    </LayoutFixedRight>\r\n  )\r\n}","module.exports = __webpack_public_path__ + \"static/media/home.73f12746.svg\";","import React from 'react'\r\nimport styled from 'styled-components'\r\n\r\nconst LayoutPage = styled.div`\r\n  .item{\r\n    margin-bottom: 30px;\r\n  }\r\n  .line{\r\n    height: 25px;\r\n    background: #eee;\r\n    margin-bottom: 10px;\r\n  }\r\n  .w80{\r\n    width: 80%;\r\n  }\r\n  .w50{\r\n    width: 50%;\r\n  }\r\n  .w30{\r\n    width: 30%;\r\n  }\r\n`\r\n\r\nexport default ({count = 1}) => {\r\n  const items = []\r\n  for(let i = 0; i < count; i++) {\r\n    items.push((\r\n      <div key={i} className=\"item\">\r\n        <div className=\"line\"></div>\r\n        <div className=\"line w80\"></div>\r\n        <div className=\"line w50\"></div>\r\n        <div className=\"line w30\"></div>\r\n      </div>\r\n    ))\r\n  }\r\n  return <LayoutPage>{items}</LayoutPage>\r\n}","import React, { Component } from 'react'\r\nimport styled from 'styled-components'\r\nimport classNames from 'classnames'\r\nimport weui from 'weui.js'\r\n\r\nimport api from '../api'\r\nimport SkeletonPlaceholder from '../common/SkeletonPlaceholder'\r\nimport Backhome from '../common/Backhome'\r\n\r\nconst Page = styled.div`\r\n  position: absolute;\r\n  top: 0;\r\n  left: 0;\r\n  right: 0;\r\n  bottom: 0;\r\n  display: flex;\r\n  flex-direction: column;\r\n  nav{\r\n    display: flex;\r\n    flex-shrink: 0;\r\n    line-height: 60px;\r\n    background: #fff;\r\n    a{\r\n      flex: 1;\r\n      text-align: center;\r\n      transition: all .3s ease;\r\n      color: #888;\r\n      &.active{\r\n        color: #444;\r\n        font-size: 16px;\r\n        font-weight: bold;\r\n      }\r\n    }\r\n  }\r\n  .container{\r\n    flex-shrink: 1;\r\n    flex-grow: 1;\r\n    overflow-y: auto;\r\n  }\r\n  .list{\r\n    margin: 15px 15px 0 15px;\r\n    .item{\r\n      background: #fff;\r\n      margin-bottom: 15px;\r\n      &__head{\r\n        display: flex;\r\n        justify-content: space-between;\r\n        border-bottom: 1px solid #eaeaea;\r\n        padding: 15px;\r\n      }\r\n      &__body{\r\n        padding: 15px 15px 0 15px;\r\n      }\r\n      &__foot{\r\n        display: flex;\r\n        justify-content: space-between;\r\n        font-size: 12px;        \r\n        padding: 15px;\r\n      }\r\n      &__title{\r\n      }\r\n      &__status{\r\n        font-size: 12px;\r\n      }\r\n    }\r\n  }\r\n`\r\n\r\nlet currentPage = 1\r\n\r\nconst Item = ({id}) => {\r\n  return (\r\n    <div className=\"item\">\r\n      <div className=\"item__head\">\r\n        <h2 className=\"item__title\">Q币</h2>\r\n        <div className=\"item__status\">处理中</div>\r\n      </div>\r\n      <div className=\"item__body\">\r\n        Q币\r\n      </div>\r\n      <div className=\"item__foot\">\r\n        <div>2019-01-20 17:27:36</div>\r\n        <div>合计积分 106</div>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nconst List = ({items}) => {\r\n  return items.map(item => {\r\n    return <Item key={item.id} id={item.id} />\r\n  })\r\n}\r\n    \r\nconst Content = ({loading, items}) => {\r\n  if(loading) {\r\n    return <div className=\"u_mx_xxx u_pt_xxx\"><SkeletonPlaceholder count={3} /></div>\r\n  }\r\n  if(items.length) {\r\n    return <div className=\"list\"><List items={items} /></div>\r\n  }\r\n  return null\r\n}\r\n\r\nlet isLoading = false\r\nclass Order extends Component {\r\n  state = {\r\n    status: '1',\r\n    loading: true,\r\n    items: []\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.loadNextPage(this.state.status, currentPage) \r\n    this.scrollContainer.addEventListener('scroll', this.scrollListener)\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    this._isMounted = false\r\n    this.scrollContainer.removeEventListener('scroll', this.scrollListener)\r\n  }\r\n\r\n  scrollListener = () => {\r\n    if(isLoading){ return }\r\n\r\n    const scrollTop = this.scrollContainer.scrollTop\r\n    const winHeight = this.scrollContainer.offsetHeight\r\n    const docHeight = this.itemsElem.offsetHeight\r\n\r\n    if((scrollTop + winHeight) >= docHeight){\r\n      isLoading = true\r\n      this.loading = weui.loading('加载中')\r\n      this.loadNextPage(this.state.status, ++currentPage)\r\n    }\r\n  }\r\n\r\n  loadNextPage = async(status, page) => {\r\n    this._isMounted = true\r\n    try {\r\n      const {data} = await api.getOrderList(status, page)\r\n      if(data.code === '1'){\r\n        if(!this._isMounted){return}\r\n        this.setState({\r\n          items: [...this.state.items, ...data.items]\r\n        }, () => {\r\n          isLoading = false\r\n        })\r\n      }\r\n    }finally {\r\n      if(this.loading) {\r\n        this.loading.hide()\r\n      }\r\n      if(!this._isMounted){return}\r\n      this.setState({loading: false})\r\n    }\r\n  }\r\n\r\n  reset = () => {\r\n    currentPage = 1\r\n    this.setState({items: []})\r\n  }\r\n\r\n  handleClick = status => {\r\n    if(this.state.status === status) {return}\r\n    this.reset()\r\n    this.setState({status: status, loading: true}, () => {\r\n      this.loadNextPage(status, currentPage)\r\n    })\r\n  }\r\n\r\n  render() {\r\n    const {loading, items, status} = this.state\r\n\r\n    return (\r\n      <Page>\r\n        <nav>\r\n          <a className={classNames({active: status === '1'})} onClick={() => this.handleClick('1')}>处理中</a>\r\n          <a className={classNames({active: status === '2'})} onClick={() => this.handleClick('2')}>成功</a>\r\n          <a className={classNames({active: status === '3'})} onClick={() => this.handleClick('3')}>失败</a>\r\n        </nav>\r\n        <div className=\"container\" ref={node => this.scrollContainer = node}>\r\n          <main ref={node => this.itemsElem = node}>\r\n            <Content loading={loading} items={items} />\r\n          </main>\r\n        </div>\r\n        <Backhome />\r\n      </Page>\r\n    )\r\n  }\r\n}\r\n\r\nexport default Order"],"sourceRoot":""}