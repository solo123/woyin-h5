{"version":3,"sources":["../node_modules/classnames/index.js","components/Operator.js","pages/charge/RechargeVoucher/views/RechargeVoucher.js","pages/charge/RechargeVoucher/index.js"],"names":["__WEBPACK_AMD_DEFINE_RESULT__","hasOwn","hasOwnProperty","classNames","classes","i","arguments","length","arg","argType","push","Array","isArray","inner","apply","key","call","join","module","exports","default","undefined","StyledContainer","styled","div","_templateObject","__webpack_exports__","_ref","count","onClick","onChange","react__WEBPACK_IMPORTED_MODULE_1___default","a","createElement","className","type","value","ICON_SCHEAM","20","tmIcon","2","snIcon","3","ymxIcon","19","jdIcon","5","xcIcon","6","7","hgdsIcon","8","kdjIcon","9","bskIcon","10","xbkIcon","11","dqIcon","12","bgyIcon","13","appleIcon","14","wnIcon","15","qcsIcon","StyledPageContainer","StyledPage","_templateObject2","LayoutBox","_templateObject3","StyledBgBox","_templateObject4","StyledIcon","img","_templateObject5","StyledName","h2","_templateObject6","StyledOpeator","_templateObject7","StyledTitle","_templateObject8","StyledTextRight","_templateObject9","StyledItems","_templateObject10","StyledItem","_templateObject11","StyledItemInner","_templateObject12","StyledFixedBottom","_templateObject13","LayoutFlex","_templateObject14","StyledSubmitBtn","_templateObject15","StyledDisableSubmitBtn","_templateObject16","StyledSumBox","_templateObject17","StyledSum","span","_templateObject18","Item","id","selectId","price","integral","handleSelect","external_React_default","classnames","active","CancelToken","axios","TITLE_SCHEAM","_default","props","_this","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","handleClick","bind","assertThisInitialized","handleChange","handleSubmit","state","config","ecard","MIN_COUNT","class","match","params","pass","name","items","availableIntegral","loadUserInfo","loadSubProducts","submitSource","cancel","loadUserInfoSource","loadSubProductsSource","source","getUserInfo","cancelToken","token","data","status","setState","Number","balance","skeletonLoading","getSubProducts","pswd","loading","weui","productId","amount","tranPwd","rechargeVoucher","alert","msg","util","confirmRetry","_this2","retryTransPswd","hide","_this3","updateBtnStatus","_this4","MAX_COUNT","e","_this5","sum","paymentConfirm","title","useable","callback","input","trim","doSubmit","_this6","_this$state","Helmet","defaultTitle","src","Operator","map","item","disCount","toFixed","RechargeVoucher_Item","salesPrice","productCostBalance","Backhome","Component","__webpack_require__","d","RechargeVoucher_default"],"mappings":"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","file":"static/js/14.0a4786fe.chunk.js","sourcesContent":["/*!\n  Copyright (c) 2017 Jed Watson.\n  Licensed under the MIT License (MIT), see\n  http://jedwatson.github.io/classnames\n*/\n\n/* global define */\n(function () {\n  'use strict';\n\n  var hasOwn = {}.hasOwnProperty;\n\n  function classNames() {\n    var classes = [];\n\n    for (var i = 0; i < arguments.length; i++) {\n      var arg = arguments[i];\n      if (!arg) continue;\n      var argType = typeof arg;\n\n      if (argType === 'string' || argType === 'number') {\n        classes.push(arg);\n      } else if (Array.isArray(arg) && arg.length) {\n        var inner = classNames.apply(null, arg);\n\n        if (inner) {\n          classes.push(inner);\n        }\n      } else if (argType === 'object') {\n        for (var key in arg) {\n          if (hasOwn.call(arg, key) && arg[key]) {\n            classes.push(key);\n          }\n        }\n      }\n    }\n\n    return classes.join(' ');\n  }\n\n  if (typeof module !== 'undefined' && module.exports) {\n    classNames.default = classNames;\n    module.exports = classNames;\n  } else if (typeof define === 'function' && typeof define.amd === 'object' && define.amd) {\n    // register as 'classnames', consistent with npm package name\n    define('classnames', [], function () {\n      return classNames;\n    });\n  } else {\n    window.classNames = classNames;\n  }\n})();","import React from 'react';\r\nimport styled from 'styled-components'\r\n\r\nconst StyledContainer = styled.div`\r\n  width: 105px;\r\n  display: inline-block;\r\n  vertical-align: middle;\r\n  span,\r\n  input {\r\n    position: relative;\r\n    float: left;\r\n    width: 30px;\r\n    height: 30px;\r\n    line-height: 30px;\r\n    background: #f6f6f6;\r\n    text-align: center;\r\n  }\r\n  .num{\r\n    -webkit-appearance: none;\r\n    border-radius: 0;\r\n    width: 45px;\r\n    height: 30px;\r\n    line-height: normal;\r\n    border: 0;\r\n    border-left: 1px solid #fff;\r\n    border-right: 1px solid #fff;\r\n    background: #f6f6f6;\r\n    font-size: 12px;\r\n    text-align: center;\r\n    font-family: industry;\r\n  }\r\n`\r\nexport default ({count, onClick, onChange}) => {\r\n  return (\r\n    <StyledContainer>\r\n      <span className=\"minus\" onClick={() => onClick(count - 1)}>-</span>\r\n      <input className=\"num\" type=\"text\" onChange={onChange} value={count}/>\r\n      <span className=\"plus\" onClick={() => onClick(count + 1)}>+</span>\r\n    </StyledContainer>\r\n  )\r\n}\r\n\r\n","import React, {Component} from 'react'\r\nimport styled from 'styled-components'\r\nimport classnames from 'classnames'\r\nimport weui from 'weui.js'\r\nimport axios from 'axios'\r\nimport {Helmet} from \"react-helmet\"\r\n\r\nimport config from '@/config'\r\nimport {getUserInfo, getSubProducts, rechargeVoucher} from '@/api'\r\nimport util from '@/util'\r\nimport Backhome from '@/components/Backhome'\r\nimport Opeator from '@/components/Operator'\r\n\r\nimport appleIcon from '@/asset/images/ecard/apple.png'\r\nimport bgyIcon from '@/asset/images/ecard/bgy.png'\r\nimport bskIcon from '@/asset/images/ecard/bsk.png'\r\nimport dqIcon from '@/asset/images/ecard/dq.png'\r\nimport hgdsIcon from '@/asset/images/ecard/hgds.png'\r\nimport jdIcon from '@/asset/images/ecard/jd.png'\r\nimport kdjIcon from '@/asset/images/ecard/kdj.png'\r\nimport qcsIcon from '@/asset/images/ecard/qcs.png'\r\nimport snIcon from '@/asset/images/ecard/sn.png'\r\nimport tmIcon from '@/asset/images/ecard/tm.png'\r\nimport wnIcon from '@/asset/images/ecard/wn.png'\r\nimport xbkIcon from '@/asset/images/ecard/xbk.png'\r\nimport xcIcon from '@/asset/images/ecard/xc.png'\r\nimport ymxIcon from '@/asset/images/ecard/ymx.png'\r\n\r\nconst ICON_SCHEAM = {\r\n  '20': tmIcon,\r\n  '2': snIcon,\r\n  '3': ymxIcon,\r\n  '19': jdIcon,\r\n  '5': xcIcon,\r\n  '6': xcIcon,\r\n  '7': hgdsIcon,\r\n  '8': kdjIcon,\r\n  '9': bskIcon,\r\n  '10': xbkIcon,\r\n  '11': dqIcon,\r\n  '12': bgyIcon,\r\n  '13': appleIcon,\r\n  '14': wnIcon,\r\n  '15': qcsIcon\r\n}\r\n\r\nconst StyledPageContainer = styled.div`\r\n  padding-bottom: 50px;\r\n`\r\nconst StyledPage = styled.div`\r\n  background: #fff;\r\n  dt{\r\n    font-size: 14px;\r\n    margin-bottom: 10px;\r\n  }\r\n  dd{\r\n    color: #888;\r\n    margin-bottom: 10px;\r\n    ol{\r\n      margin-left: 1em;\r\n      li {\r\n        margin-bottom: 5px;\r\n        list-style: decimal;\r\n      }\r\n    }\r\n  }\r\n`\r\nconst LayoutBox = styled.div`\r\n  padding: 15px;\r\n`\r\nconst StyledBgBox = styled.div`\r\n  display: flex;\r\n  align-items: center;\r\n  padding: 15px;\r\n  background: #f6f6f6;\r\n  margin-bottom: 15px;\r\n`\r\nconst StyledIcon = styled.img`\r\n  width: 50px;\r\n  height: 50px;\r\n`\r\nconst StyledName = styled.h2`\r\n  flex: 1;\r\n  margin-left: 15px;\r\n  font-size: 16px;\r\n  font-weight: bold;\r\n`\r\nconst StyledOpeator = styled.div`\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n`\r\nconst StyledTitle = styled.h2`\r\n  font-size: 14px;\r\n  padding: 15px;\r\n  border-bottom: 1px solid #f6f6f6;\r\n`\r\nconst StyledTextRight = styled.div`\r\n  padding-right: 15px;\r\n  padding-bottom: 15px;\r\n  font-size: 12px;\r\n  color: #b5b5b5;\r\n  text-align: right;\r\n`\r\nconst StyledItems = styled.div`\r\n  display: flex;\r\n  flex-wrap: wrap;\r\n  margin-bottom: 10px;\r\n  margin-left: 10px;\r\n  margin-top: 10px;\r\n  margin-right: 10px;\r\n`\r\nconst StyledItem = styled.div`\r\n  width: 90px;\r\n  padding: 5px;\r\n`\r\nconst StyledItemInner = styled.div`\r\n  padding: 10px;\r\n  text-align: center;\r\n  font-family: industry;\r\n  border: 1px solid #eaeaea;\r\n  &.active{\r\n    color: #fff;\r\n    background: #e1c38c;\r\n    border-color: #c89850;\r\n  }\r\n`\r\nconst StyledFixedBottom = styled.div`\r\n  position: fixed;\r\n  bottom: 0;\r\n  left: 0;\r\n  right: 0;\r\n  background: #fff;\r\n`\r\nconst LayoutFlex = styled.div`\r\n  display: flex;\r\n  justify-content: space-between;\r\n`\r\nconst StyledSubmitBtn = styled.div`\r\n  color: #fff;\r\n  font-size: 16px;\r\n  font-weight: bold;\r\n  padding: 0 30px;\r\n  line-height: 50px;\r\n  background: #e1c38c;\r\n`\r\nconst StyledDisableSubmitBtn = styled.div`\r\n  color: #fff;\r\n  font-size: 16px;\r\n  font-weight: bold;\r\n  padding: 0 30px;\r\n  line-height: 50px;\r\n  background: #ccc;\r\n`\r\nconst StyledSumBox = styled.div`\r\n  line-height: 50px;\r\n  padding: 0 15px;\r\n`\r\nconst StyledSum = styled.span`\r\n  color: #F53415;\r\n  font-family: industry;\r\n`\r\n\r\nconst Item = ({id, selectId, price, integral, handleSelect}) => {\r\n  return (\r\n    <StyledItem>\r\n      <StyledItemInner \r\n        className={classnames({active: selectId === id})}\r\n        onClick={() => handleSelect(id, integral)}\r\n      >\r\n        {price}元\r\n      </StyledItemInner>\r\n    </StyledItem>\r\n  )\r\n}\r\n\r\nconst CancelToken = axios.CancelToken\r\n\r\nconst TITLE_SCHEAM = {\r\n  '20': '京东E卡',\r\n  '2': '京东E卡',\r\n  '3': '京东E卡',\r\n  '19': '京东E卡',\r\n  '5': '京东E卡',\r\n  '6': '京东E卡',\r\n  '7': '京东E卡',\r\n  '8': '京东E卡',\r\n  '9': '京东E卡',\r\n  '10': '京东E卡',\r\n  '11': '京东E卡',\r\n  '12': '京东E卡',\r\n  '13': '京东E卡',\r\n  '14': '京东E卡',\r\n  '15': '京东E卡'\r\n}\r\n\r\nexport default class extends Component {\r\n  constructor(props) {\r\n    super(props)\r\n\r\n    this.handleClick = this.handleClick.bind(this)\r\n    this.handleChange = this.handleChange.bind(this)\r\n    this.handleSelect = this.handleSelect.bind(this)\r\n    this.handleSubmit = this.handleSubmit.bind(this)\r\n    \r\n    this.state = {\r\n      count: config.ecard.MIN_COUNT,\r\n      class: props.match.params.id,\r\n      pass: false,\r\n      name: TITLE_SCHEAM[props.match.params.id],\r\n      selectId: '',\r\n      items: [],\r\n\r\n      integral: 0,\r\n      availableIntegral: 0\r\n    }\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.loadUserInfo()\r\n    this.loadSubProducts(this.state.class)\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    this.submitSource && this.submitSource.cancel('Operation canceled by the user.')\r\n    this.loadUserInfoSource && this.loadUserInfoSource.cancel('Operation canceled by the user.')\r\n    this.loadSubProductsSource && this.loadSubProductsSource.cancel('Operation canceled by the user.')\r\n  }\r\n\r\n  async loadUserInfo() {\r\n    this.loadUserInfoSource = CancelToken.source()\r\n    try {\r\n      const {data} = await getUserInfo(null, {cancelToken: this.loadUserInfoSource.token})\r\n      if(data.status === 200) {\r\n        this.setState({availableIntegral: Number(data.data[0].balance)})\r\n      }\r\n    }finally {\r\n    }\r\n  }\r\n\r\n  async loadSubProducts(id) {\r\n    this.setState({skeletonLoading: true})\r\n    this.loadSubProductsSource = CancelToken.source()\r\n    try {\r\n      const {data} = await getSubProducts(id, {cancelToken: this.loadSubProductsSource.token})\r\n      if(data.status === 200) {\r\n        this.setState({items: data.data})\r\n      }\r\n    }finally {\r\n      this.setState({skeletonLoading: false})\r\n    }\r\n  }\r\n\r\n  async doSubmit(pswd) {\r\n    const loading = weui.loading('处理中')\r\n    this.submitSource = CancelToken.source()\r\n    const params = {\r\n      productId: this.state.selectId,\r\n      amount: this.state.count + '',\r\n      tranPwd: pswd\r\n    }\r\n    try {\r\n      const {data} = await rechargeVoucher(params, {cancelToken: this.submitSource.token})\r\n      if(data.status === 200) {\r\n        weui.alert(data.msg)\r\n      }else if(data.status === 1017) {\r\n        util.confirmRetry('密码错误', () => {\r\n          this.retryTransPswd()\r\n        })\r\n      }else {\r\n        weui.alert(data.msg)\r\n      }  \r\n    }finally {\r\n      loading.hide() \r\n    }    \r\n  }\r\n\r\n  handleSelect(id, integral) {\r\n    this.setState({selectId: id, integral: integral}, () => {\r\n      this.updateBtnStatus()\r\n    })\r\n  }\r\n\r\n  handleClick(count) {\r\n    if(config.ecard.MAX_COUNT >= count && count >= config.ecard.MIN_COUNT) {\r\n      this.setState({count}, () => {\r\n        this.updateBtnStatus()\r\n      })\r\n    }\r\n  }\r\n\r\n  updateBtnStatus() {\r\n    if(this.state.selectId) {\r\n      this.setState({pass: true})\r\n    }else {\r\n      this.setState({pass: false})\r\n    }\r\n  }\r\n\r\n  handleChange(e) {\r\n  }\r\n\r\n  handleSubmit() {\r\n    const sum = this.state.count * this.state.integral\r\n    util.paymentConfirm({\r\n      title: '兑换卡券',\r\n      useable: this.state.availableIntegral,\r\n      amount: sum,\r\n      callback: (e, input) => {\r\n        if(!input.value.trim()) {\r\n          alert('请输入交易密码')\r\n          return false\r\n        }\r\n        this.doSubmit(input.value)\r\n      }\r\n    })\r\n  }\r\n\r\n  retryTransPswd() {\r\n    this.handleSubmit()\r\n  }\r\n\r\n\r\n  render() {\r\n    const {pass, items, selectId} = this.state\r\n\r\n    return (\r\n      <div>\r\n        <Helmet defaultTitle=\"沃银企服\" title=\"电子卡券\"/>\r\n        <StyledPageContainer>\r\n          <div className=\"u_mb_xx\">\r\n            <StyledPage>\r\n                <LayoutBox>\r\n                  <StyledBgBox>\r\n                    <StyledIcon src={ICON_SCHEAM[this.state.class]} />\r\n                    <StyledName>{TITLE_SCHEAM[this.state.class]}</StyledName>\r\n                  </StyledBgBox>\r\n                  <StyledOpeator>\r\n                    <span>兑换数量(最多可购{config.ecard.MAX_COUNT}张)</span>\r\n                    <Opeator \r\n                      count={this.state.count}\r\n                      onClick={this.handleClick}\r\n                      onChange={this.handleChange}\r\n                    />\r\n                  </StyledOpeator>\r\n                </LayoutBox>\r\n            </StyledPage>\r\n          </div>\r\n          <div className=\"u_mb_xx\">\r\n            <StyledPage>\r\n              <StyledTitle>选择面值</StyledTitle>\r\n              <div>\r\n                <StyledItems>\r\n                  {items.map(item => {\r\n                    const disCount = (Number(item.disCount) / 10).toFixed(2)\r\n                    return (\r\n                      <Item \r\n                        key={item.productId} \r\n                        id={item.productId}\r\n                        price={item.salesPrice} \r\n                        selectId={selectId}\r\n                        integral={item.productCostBalance * disCount}\r\n                        handleSelect={this.handleSelect}\r\n                      />\r\n                    )\r\n                  })}\r\n                </StyledItems>\r\n                <StyledTextRight>订单支付后立即生效，不可退回</StyledTextRight>\r\n              </div>\r\n            </StyledPage>\r\n          </div>\r\n          <div className=\"u_mb_xx\">\r\n            <StyledPage>\r\n              <StyledTitle>产品详情</StyledTitle>\r\n              <LayoutBox>\r\n                <dl>\r\n                  <dt>有效期：</dt>\r\n                  <dd>京东E卡有效期为3个月</dd>\r\n                </dl>\r\n                <dl>\r\n                  <dt>商品说明：</dt>\r\n                  <dd>\r\n                    <ol>\r\n                      <li>购买成功后您将收到对应产品的京东E卡信息；</li>\r\n                      <li>京东E卡不记名、不挂失、不兑现、不计息、不可修改密码。购买后需要妥善保管卡号及密码；</li>\r\n                      <li>京东E卡仅能购买京东自营商品 （页面显示有“京东自营”或者商品编号为6位或者7位数，但出版物、全球购、虚拟产品、部分团购及抢购商品、投资金银类、夺宝岛和第三方卖家商品不在此内）；</li>\r\n                      <li>使用京东E卡购买的商品发生退货时，所支付资金会自动退回到卡内；</li>\r\n                      <li>登录京东首页，选择喜欢的商品加入购物车并根据页面上的提示进行购物操作。在提交订单页面，点击“使用优惠/抵用“，选择礼品卡，输入您的京东E卡的密码，点击绑定即可绑定到您的账户中，然后根据需要选择您使用的京东E卡，点击提交订单即可完成操作。注：如需一次使用多张E卡，可点击“添加礼品卡“继续绑定，然后点击勾选多张E卡即可使用；</li>\r\n                      <li>京东将不会对E卡消费的金额开具发票。</li>\r\n                    </ol>\t\t\t\t\t\r\n                  </dd>\r\n                </dl>\r\n              </LayoutBox>\r\n            </StyledPage>\r\n          </div>\r\n          <StyledFixedBottom>\r\n            <LayoutFlex>\r\n              <StyledSumBox>兑换积分：<StyledSum>{this.state.integral * this.state.count}</StyledSum></StyledSumBox>\r\n              {pass\r\n                ? <StyledSubmitBtn onClick={this.handleSubmit}>立即兑换</StyledSubmitBtn>\r\n                : <StyledDisableSubmitBtn>立即兑换</StyledDisableSubmitBtn>\r\n              }\r\n            </LayoutFlex>\r\n          </StyledFixedBottom>\r\n        </StyledPageContainer>\r\n        <Backhome />\r\n      </div>\r\n    )\r\n  }\r\n}","import view from './views/RechargeVoucher'\r\n\r\nexport {view}"],"sourceRoot":""}