{"version":3,"sources":["../node_modules/classnames/index.js","common/Operator.js","pages/RechargeVoucherDetail/views/Detail.js","pages/RechargeVoucherDetail/index.js"],"names":["__WEBPACK_AMD_DEFINE_RESULT__","hasOwn","hasOwnProperty","classNames","classes","i","arguments","length","arg","argType","push","Array","isArray","inner","apply","key","call","join","module","exports","default","undefined","StyledContainer","styled","div","_templateObject","Operator","_ref","count","onClick","onChange","external_React_default","a","createElement","className","type","value","ICON_SCHEAM","20","tmIcon","2","snIcon","3","ymxIcon","19","jdIcon","5","xcIcon","6","7","hgdsIcon","8","kdjIcon","9","bskIcon","10","xbkIcon","11","dqIcon","12","bgyIcon","13","appleIcon","14","wnIcon","15","qcsIcon","StyledPageContainer","Detail_templateObject","StyledPage","_templateObject2","LayoutBox","_templateObject3","StyledBgBox","_templateObject4","StyledIcon","img","_templateObject5","StyledName","h2","_templateObject6","StyledOpeator","_templateObject7","StyledTitle","_templateObject8","StyledTextRight","_templateObject9","StyledItems","_templateObject10","StyledItem","_templateObject11","StyledItemInner","_templateObject12","StyledFixedBottom","_templateObject13","LayoutFlex","_templateObject14","StyledSubmitBtn","_templateObject15","StyledDisableSubmitBtn","_templateObject16","StyledSumBox","_templateObject17","StyledSum","span","_templateObject18","Item","id","selectId","price","integral","handleSelect","classnames","active","CancelToken","axios","TITLE_SCHEAM","_default","props","_this","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","handleClick","bind","assertThisInitialized","handleChange","handleSubmit","state","config","ecard","MIN_COUNT","class","match","params","pass","name","items","availableIntegral","loadUserInfo","loadSubProducts","submitSource","cancel","loadUserInfoSource","loadSubProductsSource","source","getUserInfo","cancelToken","token","data","status","setState","Number","balance","skeletonLoading","getSubProducts","pswd","loading","weui","productId","amount","tranPwd","rechargeVoucher","alert","msg","util","confirmRetry","_this2","retryTransPswd","hide","_this3","updateBtnStatus","_this4","MAX_COUNT","e","_this5","sum","paymentConfirm","title","useable","callback","input","trim","doSubmit","_this6","_this$state","Helmet","defaultTitle","src","map","item","disCount","toFixed","Detail_Item","salesPrice","productCostBalance","Backhome","Component","__webpack_require__","d","__webpack_exports__","Detail_default"],"mappings":"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","file":"static/js/15.ffef3837.chunk.js","sourcesContent":["/*!\n  Copyright (c) 2017 Jed Watson.\n  Licensed under the MIT License (MIT), see\n  http://jedwatson.github.io/classnames\n*/\n\n/* global define */\n(function () {\n  'use strict';\n\n  var hasOwn = {}.hasOwnProperty;\n\n  function classNames() {\n    var classes = [];\n\n    for (var i = 0; i < arguments.length; i++) {\n      var arg = arguments[i];\n      if (!arg) continue;\n      var argType = typeof arg;\n\n      if (argType === 'string' || argType === 'number') {\n        classes.push(arg);\n      } else if (Array.isArray(arg) && arg.length) {\n        var inner = classNames.apply(null, arg);\n\n        if (inner) {\n          classes.push(inner);\n        }\n      } else if (argType === 'object') {\n        for (var key in arg) {\n          if (hasOwn.call(arg, key) && arg[key]) {\n            classes.push(key);\n          }\n        }\n      }\n    }\n\n    return classes.join(' ');\n  }\n\n  if (typeof module !== 'undefined' && module.exports) {\n    classNames.default = classNames;\n    module.exports = classNames;\n  } else if (typeof define === 'function' && typeof define.amd === 'object' && define.amd) {\n    // register as 'classnames', consistent with npm package name\n    define('classnames', [], function () {\n      return classNames;\n    });\n  } else {\n    window.classNames = classNames;\n  }\n})();","import React from 'react';\r\nimport styled from 'styled-components'\r\n\r\nconst StyledContainer = styled.div`\r\n  width: 105px;\r\n  display: inline-block;\r\n  vertical-align: middle;\r\n  span,\r\n  input {\r\n    position: relative;\r\n    float: left;\r\n    width: 30px;\r\n    height: 30px;\r\n    line-height: 30px;\r\n    background: #f6f6f6;\r\n    text-align: center;\r\n  }\r\n  .num{\r\n    -webkit-appearance: none;\r\n    border-radius: 0;\r\n    width: 45px;\r\n    height: 30px;\r\n    line-height: normal;\r\n    border: 0;\r\n    border-left: 1px solid #fff;\r\n    border-right: 1px solid #fff;\r\n    background: #f6f6f6;\r\n    font-size: 12px;\r\n    text-align: center;\r\n    font-family: industry;\r\n  }\r\n`\r\nexport default ({count, onClick, onChange}) => {\r\n  return (\r\n    <StyledContainer>\r\n      <span className=\"minus\" onClick={() => onClick(count - 1)}>-</span>\r\n      <input className=\"num\" type=\"text\" onChange={onChange} value={count}/>\r\n      <span className=\"plus\" onClick={() => onClick(count + 1)}>+</span>\r\n    </StyledContainer>\r\n  )\r\n}\r\n\r\n","import React, { Component } from 'react'\r\nimport styled from 'styled-components'\r\nimport classnames from 'classnames'\r\nimport weui from 'weui.js'\r\nimport axios from 'axios'\r\nimport {Helmet} from \"react-helmet\"\r\n\r\nimport config from '@/config'\r\nimport Opeator from '@/common/Operator'\r\nimport {getUserInfo, getSubProducts, rechargeVoucher} from '@/api'\r\nimport util from '@/util'\r\nimport Backhome from '@/common/Backhome'\r\n\r\nimport appleIcon from '@/asset/images/ecard/apple.png'\r\nimport bgyIcon from '@/asset/images/ecard/bgy.png'\r\nimport bskIcon from '@/asset/images/ecard/bsk.png'\r\nimport dqIcon from '@/asset/images/ecard/dq.png'\r\nimport hgdsIcon from '@/asset/images/ecard/hgds.png'\r\nimport jdIcon from '@/asset/images/ecard/jd.png'\r\nimport kdjIcon from '@/asset/images/ecard/kdj.png'\r\nimport qcsIcon from '@/asset/images/ecard/qcs.png'\r\nimport snIcon from '@/asset/images/ecard/sn.png'\r\nimport tmIcon from '@/asset/images/ecard/tm.png'\r\nimport wnIcon from '@/asset/images/ecard/wn.png'\r\nimport xbkIcon from '@/asset/images/ecard/xbk.png'\r\nimport xcIcon from '@/asset/images/ecard/xc.png'\r\nimport ymxIcon from '@/asset/images/ecard/ymx.png'\r\n\r\nconst ICON_SCHEAM = {\r\n  '20': tmIcon,\r\n  '2': snIcon,\r\n  '3': ymxIcon,\r\n  '19': jdIcon,\r\n  '5': xcIcon,\r\n  '6': xcIcon,\r\n  '7': hgdsIcon,\r\n  '8': kdjIcon,\r\n  '9': bskIcon,\r\n  '10': xbkIcon,\r\n  '11': dqIcon,\r\n  '12': bgyIcon,\r\n  '13': appleIcon,\r\n  '14': wnIcon,\r\n  '15': qcsIcon\r\n}\r\n\r\nconst StyledPageContainer = styled.div`\r\n  padding-bottom: 50px;\r\n`\r\nconst StyledPage = styled.div`\r\n  background: #fff;\r\n\r\n  dt{\r\n    font-size: 14px;\r\n    margin-bottom: 10px;\r\n  }\r\n  dd{\r\n    color: #888;\r\n    margin-bottom: 10px;\r\n    ol{\r\n      margin-left: 1em;\r\n      li {\r\n        margin-bottom: 5px;\r\n        list-style: decimal;\r\n      }\r\n    }\r\n  }\r\n`\r\nconst LayoutBox = styled.div`\r\n  padding: 15px;\r\n`\r\nconst StyledBgBox = styled.div`\r\n  display: flex;\r\n  align-items: center;\r\n  padding: 15px;\r\n  background: #f6f6f6;\r\n  margin-bottom: 15px;\r\n`\r\nconst StyledIcon = styled.img`\r\n  width: 50px;\r\n  height: 50px;\r\n`\r\nconst StyledName = styled.h2`\r\n  flex: 1;\r\n  margin-left: 15px;\r\n  font-size: 16px;\r\n  font-weight: bold;\r\n`\r\nconst StyledOpeator = styled.div`\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n`\r\nconst StyledTitle = styled.h2`\r\n  font-size: 14px;\r\n  padding: 15px;\r\n  border-bottom: 1px solid #f6f6f6;\r\n`\r\nconst StyledTextRight = styled.div`\r\n  padding-right: 15px;\r\n  padding-bottom: 15px;\r\n  font-size: 12px;\r\n  color: #b5b5b5;\r\n  text-align: right;\r\n`\r\n\r\nconst StyledItems = styled.div`\r\n  display: flex;\r\n  flex-wrap: wrap;\r\n  margin-bottom: 10px;\r\n  margin-left: 10px;\r\n  margin-top: 10px;\r\n  margin-right: 10px;\r\n`\r\nconst StyledItem = styled.div`\r\n  width: 90px;\r\n  padding: 5px;\r\n`\r\nconst StyledItemInner = styled.div`\r\n  padding: 10px;\r\n  text-align: center;\r\n  font-family: industry;\r\n  border: 1px solid #eaeaea;\r\n  &.active{\r\n    color: #fff;\r\n    background: #e1c38c;\r\n    border-color: #c89850;\r\n  }\r\n`\r\nconst StyledFixedBottom = styled.div`\r\n  position: fixed;\r\n  bottom: 0;\r\n  left: 0;\r\n  right: 0;\r\n  background: #fff;\r\n`\r\nconst LayoutFlex = styled.div`\r\n  display: flex;\r\n  justify-content: space-between;\r\n`\r\nconst StyledSubmitBtn = styled.div`\r\n  color: #fff;\r\n  font-size: 16px;\r\n  font-weight: bold;\r\n  padding: 0 30px;\r\n  line-height: 50px;\r\n  background: #e1c38c;\r\n`\r\nconst StyledDisableSubmitBtn = styled.div`\r\n  color: #fff;\r\n  font-size: 16px;\r\n  font-weight: bold;\r\n  padding: 0 30px;\r\n  line-height: 50px;\r\n  background: #ccc;\r\n`\r\nconst StyledSumBox = styled.div`\r\n  line-height: 50px;\r\n  padding: 0 15px;\r\n`\r\nconst StyledSum = styled.span`\r\n  color: #F53415;\r\n  font-family: industry;\r\n`\r\n\r\nconst Item = ({id, selectId, price, integral, handleSelect}) => {\r\n  return (\r\n    <StyledItem>\r\n      <StyledItemInner \r\n        className={classnames({active: selectId === id})}\r\n        onClick={() => handleSelect(id, integral)}\r\n      >\r\n        {price}元\r\n      </StyledItemInner>\r\n    </StyledItem>\r\n  )\r\n}\r\n\r\nconst CancelToken = axios.CancelToken\r\n\r\nconst TITLE_SCHEAM = {\r\n  '20': '京东E卡',\r\n  '2': '京东E卡',\r\n  '3': '京东E卡',\r\n  '19': '京东E卡',\r\n  '5': '京东E卡',\r\n  '6': '京东E卡',\r\n  '7': '京东E卡',\r\n  '8': '京东E卡',\r\n  '9': '京东E卡',\r\n  '10': '京东E卡',\r\n  '11': '京东E卡',\r\n  '12': '京东E卡',\r\n  '13': '京东E卡',\r\n  '14': '京东E卡',\r\n  '15': '京东E卡'\r\n}\r\n\r\nexport default class extends Component {\r\n  constructor(props) {\r\n    super(props)\r\n\r\n    this.handleClick = this.handleClick.bind(this)\r\n    this.handleChange = this.handleChange.bind(this)\r\n    this.handleSelect = this.handleSelect.bind(this)\r\n    this.handleSubmit = this.handleSubmit.bind(this)\r\n    \r\n    this.state = {\r\n      count: config.ecard.MIN_COUNT,\r\n      class: props.match.params.id,\r\n      pass: false,\r\n      name: TITLE_SCHEAM[props.match.params.id],\r\n      selectId: '',\r\n      items: [],\r\n\r\n      integral: 0,\r\n      availableIntegral: 0\r\n    }\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.loadUserInfo()\r\n    this.loadSubProducts(this.state.class)\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    this.submitSource && this.submitSource.cancel('Operation canceled by the user.')\r\n    this.loadUserInfoSource && this.loadUserInfoSource.cancel('Operation canceled by the user.')\r\n    this.loadSubProductsSource && this.loadSubProductsSource.cancel('Operation canceled by the user.')\r\n  }\r\n\r\n  async loadUserInfo() {\r\n    this.loadUserInfoSource = CancelToken.source()\r\n    try {\r\n      const {data} = await getUserInfo(null, {cancelToken: this.loadUserInfoSource.token})\r\n      if(data.status === 200) {\r\n        this.setState({availableIntegral: Number(data.data[0].balance)})\r\n      }\r\n    }finally {\r\n    }\r\n  }\r\n\r\n  async loadSubProducts(id) {\r\n    this.setState({skeletonLoading: true})\r\n    this.loadSubProductsSource = CancelToken.source()\r\n    try {\r\n      const {data} = await getSubProducts(id, {cancelToken: this.loadSubProductsSource.token})\r\n      if(data.status === 200) {\r\n        this.setState({items: data.data})\r\n      }\r\n    }finally {\r\n      this.setState({skeletonLoading: false})\r\n    }\r\n  }\r\n\r\n  async doSubmit(pswd) {\r\n    const loading = weui.loading('处理中')\r\n    this.submitSource = CancelToken.source()\r\n    const params = {\r\n      productId: this.state.selectId,\r\n      amount: this.state.count,\r\n      tranPwd: pswd\r\n    }\r\n    try {\r\n      const {data} = await rechargeVoucher(params, {cancelToken: this.submitSource.token})\r\n      if(data.status === 200) {\r\n        weui.alert(data.msg)\r\n      }else if(data.status === 1017) {\r\n        util.confirmRetry('密码错误', () => {\r\n          this.retryTransPswd()\r\n        })\r\n      }else {\r\n        weui.alert(data.msg)\r\n      }  \r\n    }finally {\r\n      loading.hide() \r\n    }    \r\n  }\r\n\r\n  handleSelect(id, integral) {\r\n    this.setState({selectId: id, integral: integral}, () => {\r\n      this.updateBtnStatus()\r\n    })\r\n  }\r\n\r\n  handleClick(count) {\r\n    if(config.ecard.MAX_COUNT >= count && count >= config.ecard.MIN_COUNT) {\r\n      this.setState({count}, () => {\r\n        this.updateBtnStatus()\r\n      })\r\n    }\r\n  }\r\n\r\n  updateBtnStatus() {\r\n    if(this.state.selectId) {\r\n      this.setState({pass: true})\r\n    }else {\r\n      this.setState({pass: false})\r\n    }\r\n  }\r\n\r\n  handleChange(e) {\r\n  }\r\n\r\n  handleSubmit() {\r\n    const sum = this.state.count * this.state.integral\r\n    util.paymentConfirm({\r\n      title: '兑换卡券',\r\n      useable: this.state.availableIntegral,\r\n      amount: sum,\r\n      callback: (e, input) => {\r\n        if(!input.value.trim()) {\r\n          alert('请输入交易密码')\r\n          return false\r\n        }\r\n        this.doSubmit(input.value)\r\n      }\r\n    })\r\n  }\r\n\r\n  retryTransPswd() {\r\n    this.handleSubmit()\r\n  }\r\n\r\n\r\n  render() {\r\n    const {pass, items, selectId} = this.state\r\n\r\n    return (\r\n      <div>\r\n        <Helmet defaultTitle=\"沃银企服\" title=\"电子卡券\"/>\r\n        <StyledPageContainer>\r\n          <div className=\"u_mb_xx\">\r\n            <StyledPage>\r\n                <LayoutBox>\r\n                  <StyledBgBox>\r\n                    <StyledIcon src={ICON_SCHEAM[this.state.class]} />\r\n                    <StyledName>{TITLE_SCHEAM[this.state.class]}</StyledName>\r\n                  </StyledBgBox>\r\n                  <StyledOpeator>\r\n                    <span>兑换数量(最多可购{config.ecard.MAX_COUNT}张)</span>\r\n                    <Opeator \r\n                      count={this.state.count}\r\n                      onClick={this.handleClick}\r\n                      onChange={this.handleChange}\r\n                    />\r\n                  </StyledOpeator>\r\n                </LayoutBox>\r\n            </StyledPage>\r\n          </div>\r\n          <div className=\"u_mb_xx\">\r\n            <StyledPage>\r\n              <StyledTitle>选择面值</StyledTitle>\r\n              <div>\r\n                <StyledItems>\r\n                  {items.map(item => {\r\n                    const disCount = (Number(item.disCount) / 10).toFixed(2)\r\n                    return (\r\n                      <Item \r\n                        key={item.productId} \r\n                        id={item.productId}\r\n                        price={item.salesPrice} \r\n                        selectId={selectId}\r\n                        integral={item.productCostBalance * disCount}\r\n                        handleSelect={this.handleSelect}\r\n                      />\r\n                    )\r\n                  })}\r\n                </StyledItems>\r\n                <StyledTextRight>订单支付后立即生效，不可退回</StyledTextRight>\r\n              </div>\r\n            </StyledPage>\r\n          </div>\r\n          <div className=\"u_mb_xx\">\r\n            <StyledPage>\r\n              <StyledTitle>产品详情</StyledTitle>\r\n              <LayoutBox>\r\n                <dl>\r\n                  <dt>有效期：</dt>\r\n                  <dd>京东E卡有效期为3个月</dd>\r\n                </dl>\r\n                <dl>\r\n                  <dt>商品说明：</dt>\r\n                  <dd>\r\n                    <ol>\r\n                      <li>购买成功后您将收到对应产品的京东E卡信息；</li>\r\n                      <li>京东E卡不记名、不挂失、不兑现、不计息、不可修改密码。购买后需要妥善保管卡号及密码；</li>\r\n                      <li>京东E卡仅能购买京东自营商品 （页面显示有“京东自营”或者商品编号为6位或者7位数，但出版物、全球购、虚拟产品、部分团购及抢购商品、投资金银类、夺宝岛和第三方卖家商品不在此内）；</li>\r\n                      <li>使用京东E卡购买的商品发生退货时，所支付资金会自动退回到卡内；</li>\r\n                      <li>登录京东首页，选择喜欢的商品加入购物车并根据页面上的提示进行购物操作。在提交订单页面，点击“使用优惠/抵用“，选择礼品卡，输入您的京东E卡的密码，点击绑定即可绑定到您的账户中，然后根据需要选择您使用的京东E卡，点击提交订单即可完成操作。注：如需一次使用多张E卡，可点击“添加礼品卡“继续绑定，然后点击勾选多张E卡即可使用；</li>\r\n                      <li>京东将不会对E卡消费的金额开具发票。</li>\r\n                    </ol>\t\t\t\t\t\r\n                  </dd>\r\n                </dl>\r\n              </LayoutBox>\r\n            </StyledPage>\r\n          </div>\r\n          <StyledFixedBottom>\r\n            <LayoutFlex>\r\n              <StyledSumBox>兑换积分：<StyledSum>{this.state.integral * this.state.count}</StyledSum></StyledSumBox>\r\n              {pass\r\n                ? <StyledSubmitBtn onClick={this.handleSubmit}>立即兑换</StyledSubmitBtn>\r\n                : <StyledDisableSubmitBtn>立即兑换</StyledDisableSubmitBtn>\r\n              }\r\n            </LayoutFlex>\r\n          </StyledFixedBottom>\r\n        </StyledPageContainer>\r\n        <Backhome />\r\n      </div>\r\n    )\r\n  }\r\n}","import view from './views/Detail'\r\n\r\nexport {view}"],"sourceRoot":""}