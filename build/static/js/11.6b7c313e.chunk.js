(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{500:function(e,t,n){e.exports=n.p+"static/media/banner.c6b6b97b.jpg"},501:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAD4AAAA+CAYAAABzwahEAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMDY3IDc5LjE1Nzc0NywgMjAxNS8wMy8zMC0yMzo0MDo0MiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTUgKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjI5OEQyNDIxNUMwOTExRTlCMzlBRDEwNjEwQjU5RkFGIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjI5OEQyNDIyNUMwOTExRTlCMzlBRDEwNjEwQjU5RkFGIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6Mjk4RDI0MUY1QzA5MTFFOUIzOUFEMTA2MTBCNTlGQUYiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6Mjk4RDI0MjA1QzA5MTFFOUIzOUFEMTA2MTBCNTlGQUYiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz4w/prlAAAClklEQVR42uSbvS5EQRTH7c0WCg+g8QQUEmofDZFoFD6WXfECOjR6jaXAA7gz8RGEQqIgsRKNF6BQikZLaCTWmbg3uRlzv2fOzJ17kn9yd3aL+9tz/ueemexW2usdZYzdagmhL0GTTsmgKYMGfZUJnIDq3vV3WcBdUCPwulIG8H3QIr9YLUF5N0Rv2AxOA57+F47Fma5HfcBGcDesvG0Gd0WNzHaP07jytjHjJA20LeCJPG0beGJP2+RxkiXTRQenaT1tQ6m7eaGLCJ7Z00UGlwZdJI9TGeVdtIwT2dBFAM80nBQdXKqni+JxoirTJoNTFZ42vdRdDGjTwJV62lRwVGhTPE6xytukjBMd0LrBlQ0nJoOje9oEj1Nd5a0z48QEaGxwrZ7WBb6P7Gn2y55t3R4nyJneAm141z2gaR0ZpxqgVwKvZ0Gf2ODYjWyTg2ZxAerELHXsRtYErXFrd6BhzOYWNpz8gIbimk7G8l7l1m6joFVkPGw4eQLNgB5B96Bu0LwCT/vQo5iPsyhPv3nQfiyAjhRAt5JAywSP8zS7mXNubT4HfFMAzTw9gjnAJN1wTIEOBPDHEjzdivO0bHCSciJjoIfcWi1F5sPKeyTtjecBzzqciEBFX4gy6DzgeU9D5wSgCxHwe3k9LQNc1iFCLQSe9/wNaDnNcKICXPbJSU3Q8NjamXd9DRrL28jyglNFW0vRY23a22CMy/J0VnDVGw6R509UQScFx9pwiMpeSiMTRJeD7OkkZX+gwtNcvFYNOjkJwvd6Da5fcqb9OK6E/O/MiCNghdHnKBhOTI9TtlN0NHsaOz5AS3xXtx36HTQI+vLBma4sh2YzwQDo2V9gXX0HNOGVQdsi2JeOv2Mu9nR64N/8FWAAqYCNrww7EU0AAAAASUVORK5CYII="},560:function(e,t,n){"use strict";n.r(t);var a=n(124),r=n(407),i=n.n(r),c=n(408),l=n(59),o=n(60),s=n(63),u=n(61),d=n(62),p=n(122),m=n(116),h=n(0),b=n.n(h),v=n(405),f=n.n(v),g=n(119),I=n.n(g),y=n(117),x=n(406),k=n(121),w=n(409),j=n(403),O=n(431),A=n(410),N=n(402),T=n(414),E=n.n(T),S=n(437),G=n.n(S),C=n(438),R=n.n(C),z=n(439),M=n.n(z),B={2:G.a,3:R.a,4:M.a};function Q(e){var t=e.id,n=e.currId,a=e.name,r=e.handleToggleType,i=E()({active:t===n});return b.a.createElement("li",{className:i,onClick:function(){return r(t)}},b.a.createElement("img",{className:"icon",src:B[t],alt:""}),a)}var U=function(e){var t=e.items,n=e.currId,a=e.handleToggleType;return b.a.createElement("ul",{className:"nav"},t.map(function(e){return b.a.createElement(Q,{key:e.productClassifyId,currId:n,id:e.productClassifyId,name:e.productClassifyName,handleToggleType:a})}))},D=n(500),J=n.n(D),Z=n(501),Y=n.n(Z);function F(){var e=Object(m.a)(["\n\n  header{\n    padding: 110px 15px 0 15px;\n    background: url(",") center top no-repeat;\n    background-size: 100%;\n    margin-bottom: 15px;\n    .nav{\n      display: flex;\n      background: #fff;\n      border-radius: 3px;\n      box-shadow: 0 1px 3px rgba(26,26,26,.1);\n      li{\n        flex: 1;\n        position: relative;\n        text-align: center;\n        padding: 15px 0;\n        font-size: 15px;\n        &.active{\n          color: #ff7b00;\n          &:after{\n            content: '';\n            position: absolute;\n            left: 50%;\n            bottom: 3px;\n            transform: translate(-50%);\n            height: 2px;\n            width: 60px;\n            background: #ff7b00;\n          }\n        }\n        .icon{\n          display: block;\n          width: 35px;\n          margin: 0 auto 5px;\n        }\n      }\n    }\n  }\n  .main{\n    margin: 0 15px;\n    border-radius: 5px;\n    overflow: hidden;\n    background: #fff;\n    .input-box{\n      padding: 12px;\n      border: 1px solid #ff7b00;\n    }\n    .items{\n      display: flex;\n      flex-wrap: wrap;\n      margin: 0 10px;\n      .item{\n        width: 33.33%;\n        padding: 5px;\n        &__inner{\n          position: relative;\n          text-align: center;\n          padding: 10px;\n          border-radius: 2px;\n          border: 1px solid #eaeaea;\n          &.active{\n            border-color: #ff7b00;\n            &:after{\n              content: '';\n              position: absolute;\n              bottom: 0;\n              right: 0;\n              background: url(",") center top no-repeat;\n              background-size: 100%;\n              width: 20px;\n              height: 20px;\n            }\n          }\n        }\n        &__money{\n          font-size: 16px;\n          font-weight: bold;\n        }\n        &__integral{\n          color: #7a7a7a;\n          font-size: 12px;\n        }\n      }\n    }\n  }\n"]);return F=function(){return e},e}var L=y.b.div(F(),J.a,Y.a);function P(e){var t=e.id,n=e.productId,a=e.money,r=e.integral,i=e.handleSelect,c=E()("item__inner",{active:t===n});return b.a.createElement("div",{className:"item"},b.a.createElement("div",{className:c,onClick:i},b.a.createElement("div",{className:"item__money"},a,"\u5143"),b.a.createElement("div",{className:"item__integral"},r,"\u79ef\u5206")))}var W=function(e){var t=e.productId,n=e.items,a=e.handleSelect;return b.a.createElement("div",{className:"items"},n.map(function(e){var n=Number(e.productCostBalance)*Number(e.disCount);return b.a.createElement(P,{key:e.productId,id:e.productId,productId:t,money:e.salesPrice,integral:n,handleSelect:function(){return a(e.productId,n)}})}))};function H(){var e=Object(m.a)(["\n  body{\n    background: #614338;\n  }\n"]);return H=function(){return e},e}var V=f.a.CancelToken;function X(e){var t=e.loading,n=e.productId,a=e.items,r=e.handleSelect;return t?b.a.createElement(O.a,null):a.length?b.a.createElement(W,{productId:n,items:a,handleSelect:r}):b.a.createElement(A.a,null)}var _=Object(y.a)(H()),q={13:"2",14:"3"},K=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(s.a)(this,Object(u.a)(t).call(this,e))).handleChange=n.handleChange.bind(Object(p.a)(Object(p.a)(n))),n.handleSubmit=n.handleSubmit.bind(Object(p.a)(Object(p.a)(n))),n.handleSelect=n.handleSelect.bind(Object(p.a)(Object(p.a)(n))),n.handleToggleType=n.handleToggleType.bind(Object(p.a)(Object(p.a)(n))),n.state={currId:"",items:[],operators:[],skeletonLoading:!1,qq:"",productId:"",integral:0,availableIntegral:0},n}return Object(d.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.history.location.state.id;this.loadUserInfo(),this.loadOperatorById(t).then(function(){var t=e.state.operators[0].productClassifyId;t&&e.setState({currId:t},function(){e.loadProdcutsByType(t)})})}},{key:"componentWillUnmount",value:function(){this.loadUserInfoSource.cancel("Operation canceled by the user."),this.loadOperatorSource.cancel("Operation canceled by the user."),this.loadProdcutsSource.cancel("Operation canceled by the user.")}},{key:"loadUserInfo",value:function(){var e=Object(c.a)(i.a.mark(function e(){var t,n;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.loadUserInfoSource=V.source(),e.prev=1,e.next=4,Object(j.D)(null,{cancelToken:this.loadUserInfoSource.token});case 4:t=e.sent,200===(n=t.data).status&&this.setState({availableIntegral:Number(n.data[0].balance)});case 7:return e.prev=7,e.finish(7);case 9:case"end":return e.stop()}},e,this,[[1,,7,9]])}));return function(){return e.apply(this,arguments)}}()},{key:"loadOperatorById",value:function(){var e=Object(c.a)(i.a.mark(function e(t){var n,a;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.loadOperatorSource=V.source(),e.prev=1,e.next=4,Object(j.z)(t,{cancelToken:this.loadOperatorSource.token});case 4:n=e.sent,200===(a=n.data).status&&this.setState({operators:a.data});case 7:return e.prev=7,e.finish(7);case 9:case"end":return e.stop()}},e,this,[[1,,7,9]])}));return function(t){return e.apply(this,arguments)}}()},{key:"loadProdcutsByType",value:function(){var e=Object(c.a)(i.a.mark(function e(t){var n,a;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({skeletonLoading:!0}),this.loadProdcutsSource=V.source(),e.prev=2,e.next=5,Object(j.C)(t,{cancelToken:this.loadProdcutsSource.token});case 5:n=e.sent,200===(a=n.data).status&&this.setState({items:a.data});case 8:return e.prev=8,this.setState({skeletonLoading:!1}),e.finish(8);case 11:case"end":return e.stop()}},e,this,[[2,,8,11]])}));return function(t){return e.apply(this,arguments)}}()},{key:"doSubmit",value:function(){var e=Object(c.a)(i.a.mark(function e(t){var n,a,r,c=this;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=I.a.loading("\u5904\u7406\u4e2d"),e.prev=1,e.next=4,Object(j.M)(t);case 4:a=e.sent,200===(r=a.data).status?Object(w.b)("/result",{type:"success",title:r.msg}):1017===r.status?k.a.confirmRetry("\u5bc6\u7801\u9519\u8bef",function(){c.retryTransPswd()}):I.a.alert(r.msg);case 7:return e.prev=7,n.hide(),e.finish(7);case 10:case"end":return e.stop()}},e,null,[[1,,7,10]])}));return function(t){return e.apply(this,arguments)}}()},{key:"retryTransPswd",value:function(){this.handleSubmit()}},{key:"reset",value:function(){this.setState({productId:""})}},{key:"handleToggleType",value:function(e){var t=this;e!==this.state.currId&&(this.reset(),this.setState({currId:e},function(){t.loadProdcutsByType(e)}))}},{key:"handleSelect",value:function(e,t){this.setState({productId:e,integral:t})}},{key:"handleChange",value:function(e){this.setState(Object(a.a)({},e.target.name,e.target.value))}},{key:"verify",value:function(){if(this.state.qq)if(this.state.productId){if(!(this.state.integral>this.state.availableIntegral))return!0;I.a.alert("\u79ef\u5206\u4e0d\u8db3")}else I.a.alert("\u8bf7\u9009\u62e9\u4ea7\u54c1");else I.a.alert("\u8bf7\u8f93\u5165QQ\u53f7")}},{key:"handleSubmit",value:function(){var e=this;this.verify()&&k.a.paymentConfirm({title:"\u5145\u503c",amount:this.state.integral,useable:this.state.availableIntegral,callback:function(t,n){if(!n.value)return!1;var a={chargeAddr:e.state.qq,chargeType:q[e.state.currId],productId:e.state.productId,tranPwd:n.value};e.doSubmit(a)}})}},{key:"render",value:function(){var e=this.state,t=e.productId,n=e.currId,a=e.items,r=e.operators,i=e.skeletonLoading;return b.a.createElement(L,null,b.a.createElement(_,null),b.a.createElement(x.Helmet,{title:"Q\u5e01\u5145\u503c"}),b.a.createElement("header",null,b.a.createElement(U,{currId:n,items:r,handleToggleType:this.handleToggleType})),b.a.createElement("main",{className:"main"},b.a.createElement("div",{className:"u_p_xxx"},b.a.createElement("div",{className:"input-box"},b.a.createElement("input",{type:"number",name:"qq",className:"input input-primary",value:this.state.qq,onChange:this.handleChange,placeholder:"\u8bf7\u8f93\u5165QQ\u53f7",autoComplete:"off"}))),b.a.createElement("h2",{className:"u_mx_xxx u_mb_x"},"\u5145Q\u5e01"),b.a.createElement(X,{loading:i,productId:t,items:a,handleSelect:this.handleSelect}),b.a.createElement("div",{className:"u_p_xxx"},b.a.createElement("button",{className:"btn btn-quartus",onClick:this.handleSubmit},"\u7acb\u5373\u5145\u503c"))),b.a.createElement(N.a,null))}}]),t}(h.Component);n.d(t,"view",function(){return K})}}]);
//# sourceMappingURL=11.6b7c313e.chunk.js.map