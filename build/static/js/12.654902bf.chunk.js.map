{"version":3,"sources":["asset/images/qb/banner.jpg","asset/images/qb/checked.png","pages/RechargeQB/views/Nav.js","pages/RechargeQB/views/styled.js","pages/RechargeQB/views/List.js","pages/RechargeQB/views/QB.js","pages/RechargeQB/index.js"],"names":["module","exports","__webpack_require__","p","ICON_SCHEMA","2","cmcc","3","cucc","4","ctcc","Item","_ref","id","type","name","handleToggleType","itemClass","classnames","active","external_React_default","a","createElement","className","onClick","src","alt","Nav","_ref2","items","map","item","key","productClassifyId","productClassifyName","styled","div","_templateObject","banner","checked","selectId","money","integral","handleSelect","itemInnerClass","List","disCount","Number","toFixed","List_Item","productId","salesPrice","productCostBalance","CancelToken","axios","Product","loading","ProductSkeleton","length","views_List","EmptyArrayPlaceholder","INIT_TYPE","_default","props","_this","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","handleChange","bind","assertThisInitialized","handleSubmit","state","skeletonLoading","qq","chargeType","operators","availableIntegral","util","addClass","document","body","history","location","loadUserInfo","loadOperatorById","loadProdcutsByType","removeClass","loadUserInfoSource","cancel","loadOperatorSource","loadProdcutsSource","source","api","getUserInfo","cancelToken","token","data","status","setState","balance","getProducts","getRechargePhoneProductsByType","pswd","weui","params","chargeAddr","tranPwd","rechargeQB","alert","msg","confirmRetry","_this2","retryTransPswd","hide","_this3","reset","e","target","value","_this4","paymentConfirm","title","amount","useable","callback","inputElem","doSubmit","_this$state","Helmet","defaultTitle","views_Nav","onChange","placeholder","autoComplete","Backhome","Component","d","__webpack_exports__","QB_default"],"mappings":"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","file":"static/js/12.654902bf.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/banner.c6b6b97b.jpg\";","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAD4AAAA+CAYAAABzwahEAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMDY3IDc5LjE1Nzc0NywgMjAxNS8wMy8zMC0yMzo0MDo0MiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTUgKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjI5OEQyNDIxNUMwOTExRTlCMzlBRDEwNjEwQjU5RkFGIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjI5OEQyNDIyNUMwOTExRTlCMzlBRDEwNjEwQjU5RkFGIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6Mjk4RDI0MUY1QzA5MTFFOUIzOUFEMTA2MTBCNTlGQUYiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6Mjk4RDI0MjA1QzA5MTFFOUIzOUFEMTA2MTBCNTlGQUYiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz4w/prlAAAClklEQVR42uSbvS5EQRTH7c0WCg+g8QQUEmofDZFoFD6WXfECOjR6jaXAA7gz8RGEQqIgsRKNF6BQikZLaCTWmbg3uRlzv2fOzJ17kn9yd3aL+9tz/ueemexW2usdZYzdagmhL0GTTsmgKYMGfZUJnIDq3vV3WcBdUCPwulIG8H3QIr9YLUF5N0Rv2AxOA57+F47Fma5HfcBGcDesvG0Gd0WNzHaP07jytjHjJA20LeCJPG0beGJP2+RxkiXTRQenaT1tQ6m7eaGLCJ7Z00UGlwZdJI9TGeVdtIwT2dBFAM80nBQdXKqni+JxoirTJoNTFZ42vdRdDGjTwJV62lRwVGhTPE6xytukjBMd0LrBlQ0nJoOje9oEj1Nd5a0z48QEaGxwrZ7WBb6P7Gn2y55t3R4nyJneAm141z2gaR0ZpxqgVwKvZ0Gf2ODYjWyTg2ZxAerELHXsRtYErXFrd6BhzOYWNpz8gIbimk7G8l7l1m6joFVkPGw4eQLNgB5B96Bu0LwCT/vQo5iPsyhPv3nQfiyAjhRAt5JAywSP8zS7mXNubT4HfFMAzTw9gjnAJN1wTIEOBPDHEjzdivO0bHCSciJjoIfcWi1F5sPKeyTtjecBzzqciEBFX4gy6DzgeU9D5wSgCxHwe3k9LQNc1iFCLQSe9/wNaDnNcKICXPbJSU3Q8NjamXd9DRrL28jyglNFW0vRY23a22CMy/J0VnDVGw6R509UQScFx9pwiMpeSiMTRJeD7OkkZX+gwtNcvFYNOjkJwvd6Da5fcqb9OK6E/O/MiCNghdHnKBhOTI9TtlN0NHsaOz5AS3xXtx36HTQI+vLBma4sh2YzwQDo2V9gXX0HNOGVQdsi2JeOv2Mu9nR64N/8FWAAqYCNrww7EU0AAAAASUVORK5CYII=\"","import React from 'react'\r\nimport classnames from 'classnames'\r\n\r\nimport cmcc from '@/asset/images/recharge/cmcc.png'\r\nimport cucc from '@/asset/images/recharge/cucc.png'\r\nimport ctcc from '@/asset/images/recharge/ctcc.png'\r\n\r\nconst ICON_SCHEMA = {\r\n  '2': cmcc,\r\n  '3': cucc,\r\n  '4': ctcc\r\n}\r\n\r\nfunction Item({id, type, name, handleToggleType}) {\r\n  const itemClass = classnames({'active': id === type})\r\n  return (\r\n    <li \r\n      className={itemClass} \r\n      onClick={() => handleToggleType(id)}\r\n    >\r\n      <img className=\"icon\" src={ICON_SCHEMA[id]} alt=\"\"/>\r\n      {name}\r\n    </li>\r\n  )\r\n}\r\n\r\nfunction Nav({items, type, handleToggleType}) {\r\n  return (\r\n    <ul className=\"nav\">\r\n      {items.map(item => (\r\n        <Item\r\n          key={item.productClassifyId} \r\n          type={type}\r\n          id={item.productClassifyId}\r\n          name={item.productClassifyName}\r\n          handleToggleType={handleToggleType}\r\n        />\r\n      ))}\r\n    </ul>\r\n  )\r\n}\r\n\r\nexport default Nav","import styled from 'styled-components'\r\n\r\nimport banner from '@/asset/images/qb/banner.jpg'\r\nimport checked from '@/asset/images/qb/checked.png'\r\n\r\nexport default styled.div`\r\n\r\n  header{\r\n    padding: 110px 15px 0 15px;\r\n    background: url(${banner}) center top no-repeat;\r\n    background-size: 100%;\r\n    margin-bottom: 15px;\r\n    .nav{\r\n      display: flex;\r\n      background: #fff;\r\n      border-radius: 3px;\r\n      box-shadow: 0 1px 3px rgba(26,26,26,.1);\r\n      li{\r\n        flex: 1;\r\n        position: relative;\r\n        text-align: center;\r\n        padding: 15px 0;\r\n        font-size: 15px;\r\n        &.active{\r\n          color: #ff7b00;\r\n          &:after{\r\n            content: '';\r\n            position: absolute;\r\n            left: 50%;\r\n            bottom: 3px;\r\n            transform: translate(-50%);\r\n            height: 2px;\r\n            width: 60px;\r\n            background: #ff7b00;\r\n          }\r\n        }\r\n        .icon{\r\n          display: block;\r\n          width: 35px;\r\n          margin: 0 auto 5px;\r\n        }\r\n      }\r\n    }\r\n  }\r\n  .main{\r\n    margin: 0 15px;\r\n    border-radius: 5px;\r\n    overflow: hidden;\r\n    background: #fff;\r\n    .input-box{\r\n      padding: 12px;\r\n      border: 1px solid #ff7b00;\r\n    }\r\n    .items{\r\n      display: flex;\r\n      flex-wrap: wrap;\r\n      margin: 0 10px;\r\n      .item{\r\n        width: 33.33%;\r\n        padding: 5px;\r\n        &__inner{\r\n          position: relative;\r\n          text-align: center;\r\n          padding: 10px;\r\n          border-radius: 2px;\r\n          border: 1px solid #eaeaea;\r\n          &.active{\r\n            border-color: #ff7b00;\r\n            &:after{\r\n              content: '';\r\n              position: absolute;\r\n              bottom: 0;\r\n              right: 0;\r\n              background: url(${checked}) center top no-repeat;\r\n              background-size: 100%;\r\n              width: 20px;\r\n              height: 20px;\r\n            }\r\n          }\r\n        }\r\n        &__money{\r\n          font-size: 16px;\r\n          font-weight: bold;\r\n        }\r\n        &__integral{\r\n          color: #7a7a7a;\r\n          font-size: 12px;\r\n        }\r\n      }\r\n    }\r\n  }\r\n`\r\n","import React from 'react'\r\nimport classnames from 'classnames'\r\n\r\nfunction Item({id, selectId, money, integral, handleSelect}) {\r\n  const itemInnerClass = classnames('item__inner', {'active': id === selectId})\r\n  return (\r\n    <div className=\"item\">\r\n      <div className={itemInnerClass} onClick={handleSelect}>\r\n        <div className=\"item__money\">{money}元</div>\r\n        <div className=\"item__integral\">{integral}积分</div>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nfunction List({selectId, items, handleSelect}) {\r\n  return (\r\n    <div className=\"items\">\r\n      {items.map(item => {\r\n      const disCount = (Number(item.disCount) / 10).toFixed(2)\r\n      return (\r\n        <Item\r\n          key={item.productId}\r\n          id={item.productId}\r\n          selectId={selectId}\r\n          money={item.salesPrice}\r\n          integral={item.productCostBalance * disCount}\r\n          handleSelect={() => handleSelect(item.productId, item.productCostBalance * disCount)}\r\n        />\r\n      )\r\n    })}\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default List","import React, { Component } from 'react'\r\nimport axios from 'axios'\r\nimport weui from 'weui.js'\r\nimport {Helmet} from \"react-helmet\"\r\n\r\nimport api, {getProducts, rechargeQB} from '@/api'\r\nimport util from '@/util'\r\nimport ProductSkeleton from '@/common/ProductSkeleton'\r\nimport EmptyArrayPlaceholder from '@/common/EmptyArrayPlaceholder'\r\nimport Backhome from '@/common/Backhome'\r\nimport Nav from './Nav'\r\nimport Page from './styled'\r\nimport List from './List'\r\n\r\nconst CancelToken = axios.CancelToken\r\n\r\nfunction Product({loading, selectId, items, handleSelect}) {\r\n  if(loading) {\r\n    return <ProductSkeleton />\r\n  }\r\n  if(items.length) {\r\n    return <List selectId={selectId} items={items} handleSelect={handleSelect} />\r\n  }\r\n  return <EmptyArrayPlaceholder />\r\n}\r\n\r\nconst INIT_TYPE = '13'\r\n\r\nexport default class extends Component {\r\n  constructor(props) {\r\n    super(props)\r\n\r\n    this.handleChange = this.handleChange.bind(this)\r\n    this.handleSubmit = this.handleSubmit.bind(this)\r\n    this.handleToggleType = this.handleToggleType.bind(this)\r\n    this.handleSelect = this.handleSelect.bind(this)\r\n\r\n    this.state = {\r\n      items: [],\r\n      skeletonLoading: false,\r\n\r\n      qq: '',\r\n      chargeType: '2',\r\n      selectId: '',\r\n\r\n      type: INIT_TYPE,\r\n      operators: [],\r\n\r\n      integral: 0,\r\n      availableIntegral: 0\r\n    }\r\n  }\r\n\r\n  componentDidMount() {\r\n    util.addClass(document.body, 'qq')\r\n    const {id} = this.props.history.location.state\r\n    this.loadUserInfo()\r\n    this.loadOperatorById(id)\r\n    this.loadProdcutsByType(this.state.type)\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    util.removeClass(document.body, 'qq')\r\n    this.loadUserInfoSource.cancel('Operation canceled by the user.')\r\n    this.loadOperatorSource.cancel('Operation canceled by the user.')\r\n    this.loadProdcutsSource.cancel('Operation canceled by the user.')\r\n  }\r\n\r\n  async loadUserInfo() {\r\n    this.loadUserInfoSource = CancelToken.source()\r\n    try {\r\n      const {data} = await api.getUserInfo(null, {cancelToken: this.loadUserInfoSource.token})\r\n      if(data.status === 200) {\r\n        this.setState({availableIntegral: Number(data.data[0].balance)})\r\n      }\r\n    }finally {\r\n    }\r\n  }\r\n\r\n  async loadOperatorById(id) {\r\n    this.loadOperatorSource = CancelToken.source()\r\n    try {\r\n      const {data} = await getProducts(id, {cancelToken: this.loadOperatorSource.token})\r\n      if(data.status === 200) {\r\n        this.setState({operators: data.data})\r\n      }\r\n    }finally {\r\n    }\r\n  }\r\n\r\n  async loadProdcutsByType(type) {\r\n    this.setState({skeletonLoading: true})\r\n    this.loadProdcutsSource = CancelToken.source()\r\n    try {\r\n      const {data} = await api.getRechargePhoneProductsByType(type, {cancelToken: this.loadProdcutsSource.token})\r\n      if(data.status === 200) {\r\n        this.setState({items: data.data})\r\n      }\r\n    }finally {\r\n      this.setState({skeletonLoading: false})\r\n    }\r\n  }\r\n\r\n  async doSubmit(pswd) {\r\n    const loading = weui.loading('处理中')\r\n    const params = {\r\n      chargeAddr: this.state.qq,\r\n      chargeType: this.state.chargeType,\r\n      productId: this.state.selectId,\r\n      tranPwd: pswd,\r\n    }\r\n    try {\r\n      const {data} = await rechargeQB(params)\r\n      if(data.status === 200) {\r\n        weui.alert(data.msg)\r\n      }else if(data.status === 1017) {\r\n        util.confirmRetry('密码错误', () => {\r\n          this.retryTransPswd()\r\n        })\r\n      }else {\r\n        weui.alert(data.msg)\r\n      }\r\n    }finally {\r\n      loading.hide()\r\n    }\r\n  }\r\n\r\n  retryTransPswd() {\r\n    this.handleSubmit()\r\n  }\r\n\r\n  reset() {\r\n    this.setState({selectId: ''})\r\n  }\r\n\r\n  handleToggleType(type) {\r\n    if(type === this.state.type) {return}\r\n    this.reset()\r\n    const chargeType = type === '13' ? '2' : '3'\r\n    this.setState({type, chargeType: chargeType}, () => {\r\n      this.loadProdcutsByType(type)\r\n    })\r\n  }\r\n\r\n  handleSelect(selectId, integral) {\r\n    this.setState({selectId, integral})\r\n  }\r\n\r\n  handleChange(e) {\r\n    this.setState({qq: e.target.value})\r\n  }\r\n\r\n  handleSubmit() {\r\n    if(!this.state.qq) {\r\n      weui.alert('请输入QQ号')\r\n      return\r\n    }\r\n    if(!this.state.selectId) {\r\n      weui.alert('请选择产品')\r\n      return\r\n    }\r\n    if(this.state.integral > this.state.availableIntegral) {\r\n      weui.alert('积分不足')\r\n      return\r\n    }\r\n\r\n    util.paymentConfirm({\r\n      title: '充值',\r\n      amount: this.state.integral,\r\n      useable: this.state.availableIntegral,\r\n      callback: (e, inputElem) => {\r\n        if(!inputElem.value) {return false}\r\n        this.doSubmit(inputElem.value)\r\n      }\r\n    })\r\n  }\r\n\r\n  render() {\r\n    const {selectId, type, items, operators, skeletonLoading} = this.state\r\n\r\n    return (\r\n      <Page>\r\n        \r\n        <Helmet defaultTitle=\"沃银企服\" title=\"Q币充值\"/>\r\n\r\n        <header>\r\n          <Nav type={type} items={operators} handleToggleType={this.handleToggleType} />\r\n        </header>\r\n\r\n        <main className=\"main\">\r\n          <div className=\"u_p_xxx\">\r\n            <div className=\"input-box\">\r\n              <input \r\n                type=\"number\" \r\n                className=\"input input-primary\"\r\n                value={this.state.qq}\r\n                onChange={this.handleChange} \r\n                placeholder=\"请输入QQ号\" \r\n                autoComplete=\"off\"\r\n              />\r\n            </div>\r\n          </div>\r\n\r\n          <h2 className=\"u_mx_xxx u_mb_x\">充Q币</h2>\r\n          <Product loading={skeletonLoading} selectId={selectId} items={items} handleSelect={this.handleSelect} />\r\n\r\n          <div className=\"u_p_xxx\">\r\n            <button className=\"btn btn-quartus\" onClick={this.handleSubmit}>立即充值</button>\r\n          </div>\r\n        </main>\r\n\r\n        <Backhome />\r\n      </Page>\r\n    )\r\n  }\r\n}","import view from './views/QB'\r\n\r\nexport {view}"],"sourceRoot":""}